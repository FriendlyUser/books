<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- favicon -->
    <link rel="shortcut icon" href="/images/favicon.png">
    <!-- theme meta -->
    <meta name="theme-name" content="pinwheel-astro">
    <meta name="msapplication-TileColor" content="#000000">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6">

  </script>
  
    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000">
    <meta name="generator" content="Astro v2.6.6">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <!-- google font css -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&#38;family=Merriweather:wght@700;900&#38;display=swap" rel="stylesheet">

    <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
		<script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>

    <!-- responsive meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

    <!-- title -->
    <title>
      Master Game Development: Create 7 Python Games with Pygame to Boost Your Skills
    </title>

    <!-- canonical url -->
    

    <!-- noindex robots -->
    

    <!-- meta-description -->
    <meta name="description" content="Build 7 classic games using pygame">

    <!-- author from config.json -->
    <meta name="author" content="FriendlyUser">

    <!-- og-title -->
    <meta property="og:title" content="Master Game Development: Create 7 Python Games with Pygame to Boost Your Skills">

    <!-- og-description -->
    <meta property="og:description" content="Build 7 classic games using pygame">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pinwheel-astro.vercel.app/books/python_pygame_ref/">

    <!-- twitter-title -->
    <meta name="twitter:title" content="Master Game Development: Create 7 Python Games with Pygame to Boost Your Skills">

    <!-- twitter-description -->
    <meta name="twitter:description" content="Build 7 classic games using pygame">

    <!-- og-image -->
    <meta property="og:image" content="https://pinwheel-astro.vercel.app/images/og-image.png">

    <!-- twitter-image -->
    <meta name="twitter:image" content="https://pinwheel-astro.vercel.app/images/og-image.png">
    <meta name="twitter:card" content="summary_large_image">
  <link rel="stylesheet" href="/_astro/_single_.db0af2d4.css" />
<link rel="stylesheet" href="/_astro/404.99013387.css" /><script type="module" src="/_astro/hoisted.f0b9be19.js"></script></head>
  <body>
    
    <header class="header">
  <nav class="navbar container">
    <!-- logo -->
    <div class="order-0">
      <a href="/" class="navbar-brand block">
  <img alt="Pinwheel Astro" style="height:31px;width:147px" width="294" height="62" src="/_astro/logo_ZThIBR.png" loading="lazy" decoding="async">
</a>
    </div>
    <!-- navbar toggler -->
    <input id="nav-toggle" type="checkbox" class="hidden">
    <label id="show-button" for="nav-toggle" class="order-2 flex cursor-pointer items-center lg:order-1 lg:hidden">
      <svg class="h-6 fill-current" viewBox="0 0 20 20">
        <title>Menu Open</title>
        <path d="M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z"></path>
      </svg>
    </label>
    <label id="hide-button" for="nav-toggle" class="order-2 hidden cursor-pointer items-center lg:order-1">
      <svg class="h-6 fill-current" viewBox="0 0 20 20">
        <title>Menu Close</title>
        <polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"></polygon>
      </svg>
    </label>
    <!-- /navbar toggler -->

    <ul id="nav-menu" class="navbar-nav order-3 hidden w-full lg:order-1 lg:flex lg:w-auto lg:space-x-2">
      <li class="nav-item">
                <a href="/" class="nav-link inline-block lg:block false">
                  Home
                </a>
              </li><li class="nav-item">
                <a href="/books" class="nav-link inline-block lg:block false">
                  Books
                </a>
              </li><li class="nav-item">
                <a href="/contact" class="nav-link inline-block lg:block false">
                  Contact
                </a>
              </li>
      <li class="nav-item mt-2 lg:hidden">
        <a class="btn btn-white btn-sm border-border" href="/books">
          View Books</a>
      </li>
    </ul>
    <div class="order-1 ml-auto hidden items-center md:order-2 md:ml-0 lg:flex">
      <a class="btn btn-white btn-sm" href="/signin"> View Books</a>
    </div>
  </nav>
</header>
<script>
  const button = document.getElementById("dropdown-button");
  button.addEventListener("click", () => {
    const dropdown = document.getElementById("dropdown");
    dropdown.classList.toggle(dropdown.style === "hidden" ? "block" : "hidden");
  });

  //sticky header
  const header = document.querySelector(".header");
  window.addEventListener("scroll", () => {
    const scrollY = window.scrollY;
    if (scrollY > 0) {
      header.classList.add("header-sticky");
    } else {
      header.classList.remove("header-sticky");
    }
  });
</script>
    <main id="main-content">
      
  <section class="section blog-single">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-10">
          <img class="w-full rounded-xl" alt="" width="920" height="450" src="/_astro/294668704_3D4EV.png" loading="lazy" decoding="async">
        </div>
        <div class="mt-10 max-w-[810px] lg:col-9">
          <h1 class="h2">
            Master Game Development: Create 7 Python Games with Pygame to Boost Your Skills
          </h1>
          <div class="mb-5 mt-6 flex items-center space-x-2">
            <ul class="mb-4">
              <li class="mr-4 inline-block">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" class="mr-2 -mt-1 inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M248 104c-53 0-96 43-96 96s43 96 96 96 96-43 96-96-43-96-96-96zm0 144c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm0-240C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-49.7 0-95.1-18.3-130.1-48.4 14.9-23 40.4-38.6 69.6-39.5 20.8 6.4 40.6 9.6 60.5 9.6s39.7-3.1 60.5-9.6c29.2 1 54.7 16.5 69.6 39.5-35 30.1-80.4 48.4-130.1 48.4zm162.7-84.1c-24.4-31.4-62.1-51.9-105.1-51.9-10.2 0-26 9.6-57.6 9.6-31.5 0-47.4-9.6-57.6-9.6-42.9 0-80.6 20.5-105.1 51.9C61.9 339.2 48 299.2 48 256c0-110.3 89.7-200 200-200s200 89.7 200 200c0 43.2-13.9 83.2-37.3 115.9z"></path></svg>
                
              </li>

              <!-- <li class="mr-4 inline-block">
                <FaRegCalendarAlt className={"mr-2 -mt-1 inline-block"} />
                {dateFormat(post.data?.pubDate)}
              </li> -->
              <li class="mr-4 inline-block">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mr-2 -mt-1 inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"></path></svg>
                229 Mins read
              </li>
              <li class="mr-4 inline-block">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mr-2 -mt-1 inline-block" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"></path></svg>
                
              </li>
            </ul>
          </div>

          <div class="content">
            <div id="search" class="ml-3 p-4 -mt-8"></div>
            <article id="article">
              <h1 id="chapter-1-introduction">Chapter 1: Introduction</h1>
<h2 id="overview-of-pygame">Overview of Pygame</h2>
<p>Pygame is a popular Python library used for creating 2D games. It is built on top of the SDL (Simple DirectMedia Layer) library, which provides a low-level interface for handling things like graphics, sound, and input. Pygame makes game development easier by providing higher-level abstractions on top of SDL, allowing developers to create games using Python code rather than lower-level C or C++ code. Some of the features that Pygame provides include sprite and collision detection, animation, sound effects, and keyboard/mouse input handling.</p>
<h2 id="introduction-to-python">Introduction to Python</h2>
<p>Python is a high-level, interpreted programming language that is widely used for a variety of tasks, from web development to data analysis to game development. It was created in the late 1980s by Guido van Rossum and has since become one of the most popular programming languages in the world.</p>
<p>Python is known for its readability and ease of use, which makes it a great choice for beginners. It has a simple syntax that emphasizes code readability, which means that it is easy to write and understand. Python is also an interpreted language, which means that you don’t have to compile your code before running it. This makes development faster and easier since you can see the results of your code immediately.</p>
<p>Python has a large and active community of developers who contribute to a vast number of open-source libraries and frameworks. This makes it easy to find solutions to common problems and extend the functionality of your programs with minimal effort.</p>
<h2 id="setting-up-the-development-environment">Setting up the development environment</h2>
<p>Before we can start developing games in Python with Pygame, we need to set up our development environment. Here are the steps to do so:</p>
<ol>
<li>
<p>Install Python: You can download and install Python from the official website (<a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a>). Make sure to choose the version of Python that is compatible with your operating system.</p>
</li>
<li>
<p>Install Pygame: Once Python is installed, you can install Pygame by opening a command prompt or terminal and typing <code>pip install pygame</code>. This will download and install the Pygame library and all of its dependencies.</p>
</li>
<li>
<p>Choose an IDE: There are many Integrated Development Environments (IDEs) available for Python. Some popular options include PyCharm, VS Code, and Sublime Text. Choose the one that best fits your needs and install it.</p>
</li>
<li>
<p>Create a new project: Once your IDE is installed, create a new Python project and give it a name. This will create a new directory for your project.</p>
</li>
<li>
<p>Set up a virtual environment: It is a good practice to create a virtual environment for each project. This will ensure that any dependencies you install are isolated to that project and won’t interfere with other projects. You can create a new virtual environment by opening a command prompt or terminal, navigating to your project directory, and typing <code>python -m venv venv</code>. This will create a new virtual environment in a directory named <code>venv</code>.</p>
</li>
<li>
<p>Activate the virtual environment: After creating the virtual environment, you need to activate it. To do so, type <code>source venv/bin/activate</code> on a Unix-based system, or <code>venv\Scripts\activate</code> on a Windows-based system. This will activate the virtual environment and allow you to install packages that are specific to your project.</p>
</li>
</ol>
<p>Confirm that you want to proceed with the above steps, and I’ll move on to the next section.</p>
<h2 id="overview-of-the-games-that-will-be-built">Overview of the games that will be built</h2>
<p>In this book, we will build seven simple games using Pygame. Here’s a brief overview of each game:</p>
<ol>
<li>
<p>Pong: We will start with the classic game of Pong. In this game, the player controls a paddle that can move up and down, and the objective is to hit the ball with the paddle and score points.</p>
</li>
<li>
<p>Snake: Next, we will build the game of Snake. In this game, the player controls a snake that moves around the screen and eats food to grow longer. The objective is to avoid running into the walls or the snake’s own tail.</p>
</li>
<li>
<p>Connect Four: We will then build a version of the classic game of Connect Four. In this game, two players take turns dropping pieces into a grid, trying to connect four pieces in a row horizontally, vertically, or diagonally.</p>
</li>
<li>
<p>Tetris: Next up is the game of Tetris. In this game, falling blocks must be arranged to form complete rows, which disappear and earn points for the player.</p>
</li>
<li>
<p>Memory Puzzle: We will then build a simple memory puzzle game. In this game, the player is shown a grid of tiles, each with a picture on it. The player must memorize the position of the pictures and then match them up by flipping over two tiles at a time.</p>
</li>
<li>
<p>Platformer: Next, we will build a simple platformer game. In this game, the player controls a character that can jump and move left and right. The objective is to navigate through a series of levels, avoiding obstacles and enemies along the way.</p>
</li>
<li>
<p>Asteroids: Finally, we will build the classic game of Asteroids. In this game, the player controls a spaceship that must shoot down asteroids and other enemies while avoiding collisions.</p>
</li>
</ol>
<p>By building these games, you will learn the basics of game development with Pygame and gain a deeper understanding of how games work.</p>
<h1 id="chapter-2-getting-started-with-pygame">Chapter 2: Getting Started with Pygame</h1>
<h2 id="overview-of-pygame-library">Overview of Pygame library</h2>
<p>Pygame is a Python library that provides a set of tools and functions for building 2D games. It is built on top of the SDL library, which provides a low-level interface for handling things like graphics, sound, and input. Here are some of the key features of the Pygame library:</p>
<ol>
<li>
<p>Graphics: Pygame provides a set of functions for drawing shapes, images, and text on the screen. It also includes support for animations, sprite sheets, and tile maps.</p>
</li>
<li>
<p>Sound: Pygame provides a set of functions for playing and mixing sound effects and music. It supports multiple channels of audio and provides a simple interface for loading and playing sound files.</p>
</li>
<li>
<p>Input: Pygame provides functions for handling keyboard, mouse, and joystick input. It supports multiple input devices and provides a simple interface for polling input events.</p>
</li>
<li>
<p>Collision detection: Pygame provides functions for detecting collisions between sprites and other objects in the game world. It supports both rectangular and pixel-perfect collision detection.</p>
</li>
<li>
<p>Font and text: Pygame provides functions for loading and rendering text on the screen. It supports TrueType fonts and provides a simple interface for setting text color, size, and alignment.</p>
</li>
<li>
<p>Event handling: Pygame provides a simple event loop for handling user input and other events in the game world. It supports a variety of events, including keyboard and mouse input, window resize events, and custom user-defined events.</p>
</li>
</ol>
<p>Overall, Pygame provides a robust set of tools for building 2D games in Python. Its ease of use and high-level abstractions make it a great choice for beginners, while its flexibility and extensibility make it suitable for more advanced game developers as well.</p>
<h2 id="installing-pygame">Installing Pygame</h2>
<p>To install Pygame, you can use pip, which is a package installer for Python. Here are the steps:</p>
<ol>
<li>
<p>Open up your command prompt or terminal.</p>
</li>
<li>
<p>Run the following command to install Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">pip install pygame</span></span></code></pre>
<p>This will download and install the latest version of Pygame.</p>
</li>
<li>
<p>Once the installation is complete, you can test that Pygame is working correctly by running the following code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create a 640x480 window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the title of the window</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'Pygame Test'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Run the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame properly</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This will open up a blank window with the title “Pygame Test”. If you close the window, the program will exit cleanly.</p>
</li>
</ol>
<p>That’s it! You’re now ready to start building games with Pygame.</p>
<h2 id="setting-up-the-pygame-environment">Setting up the Pygame environment</h2>
<p>Sure! Before we start building games with Pygame, we need to set up our development environment. Here are the steps:</p>
<ol>
<li>
<p>Install Python: If you don’t already have Python installed, you can download it from the official Python website (<a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a>). Make sure to download and install the latest version of Python.</p>
</li>
<li>
<p>Install Pygame: Once you have Python installed, you can install Pygame using pip. Open up your command prompt or terminal and run the following command:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">pip install pygame</span></span></code></pre>
<p>This will download and install the latest version of Pygame.</p>
</li>
<li>
<p>Set up your IDE: You can use any text editor or IDE that supports Python for developing games with Pygame. Some popular choices include Visual Studio Code, PyCharm, and Sublime Text. Make sure to install the relevant plugins or extensions for your chosen IDE to support Python.</p>
</li>
<li>
<p>Test your Pygame installation: To make sure that Pygame is installed correctly, you can run the following code in your IDE:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>If Pygame is installed correctly, you should see no errors. If you do encounter any errors, make sure to double-check that you have installed Pygame correctly.</p>
</li>
</ol>
<p>That’s it! You’re now ready to start building games with Pygame.</p>
<h2 id="creating-a-pygame-window">Creating a Pygame window</h2>
<p>Sure! Here’s a simple code snippet that creates a Pygame window:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the display window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'My Pygame Window'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Start the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Fill the background with white</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw things on the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Let’s go through this code step-by-step:</p>
<ol>
<li>
<p>Import the <code>pygame</code> module.</p>
</li>
<li>
<p>Initialize Pygame by calling <code>pygame.init()</code>.</p>
</li>
<li>
<p>Set up the display window by calling <code>pygame.display.set_mode()</code> and passing in a tuple that represents the size of the window in pixels. We also set the caption of the window to “My Pygame Window” using <code>pygame.display.set_caption()</code>.</p>
</li>
<li>
<p>Start the game loop by setting the <code>running</code> variable to <code>True</code>. Inside the loop, we handle events using a <code>for</code> loop that iterates over the list of events returned by <code>pygame.event.get()</code>. If the user clicks the “X” button in the corner of the window, we set <code>running</code> to <code>False</code> to exit the loop.</p>
</li>
<li>
<p>Fill the background of the window with white using <code>screen.fill()</code>. We pass in a tuple representing the RGB values of the color white.</p>
</li>
<li>
<p>Draw things on the screen using Pygame’s drawing functions. For example, you could draw a circle using <code>pygame.draw.circle()</code>.</p>
</li>
<li>
<p>Update the display by calling <code>pygame.display.flip()</code>.</p>
</li>
<li>
<p>Clean up Pygame by calling <code>pygame.quit()</code>.</p>
</li>
</ol>
<p>That’s it! When you run this code, you should see a blank Pygame window appear with the title “My Pygame Window”.</p>
<h2 id="handling-pygame-events">Handling Pygame events</h2>
<p>Sure! Here’s an example of how to handle Pygame events:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the display window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'Event Handling'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Start the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'The spacebar was pressed!'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Fill the background with white</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw things on the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we’re handling two types of events: the <code>pygame.QUIT</code> event, which is triggered when the user clicks the “X” button in the corner of the window, and the <code>pygame.KEYDOWN</code> event, which is triggered when a key on the keyboard is pressed.</p>
<p>When the <code>pygame.QUIT</code> event is triggered, we set <code>running</code> to <code>False</code> to exit the game loop and quit the program.</p>
<p>When the <code>pygame.KEYDOWN</code> event is triggered, we check which key was pressed by accessing the <code>key</code> attribute of the <code>event</code> object. If the <code>K_ESCAPE</code> key was pressed, we set <code>running</code> to <code>False</code> to exit the game loop and quit the program. If the spacebar was pressed, we print a message to the console.</p>
<p>Note that you can handle many other types of events in Pygame, such as mouse events and joystick events. You can also define your own custom events using <code>pygame.event.Event()</code>.</p>
<h2 id="understanding-the-pygame-event-loop">Understanding the Pygame event loop</h2>
<p>Sure! The Pygame event loop is the main loop that listens for and handles events that occur while your Pygame program is running. These events can include things like user input (e.g. keyboard and mouse events), system events (e.g. window resize events), and user-defined events.</p>
<p>Here’s an example of how the Pygame event loop works:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the display window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'Event Loop'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Start the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'The spacebar was pressed!'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Fill the background with white</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw things on the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, the event loop is the <code>for</code> loop that begins on line 11 and ends on line 15. The <code>pygame.event.get()</code> function is called inside the loop to get a list of all events that have occurred since the last time the function was called.</p>
<p>Inside the loop, we check for two types of events: the <code>pygame.QUIT</code> event, which is triggered when the user clicks the “X” button in the corner of the window, and the <code>pygame.KEYDOWN</code> event, which is triggered when a key on the keyboard is pressed.</p>
<p>When the <code>pygame.QUIT</code> event is triggered, we set <code>running</code> to <code>False</code> to exit the game loop and quit the program.</p>
<p>When the <code>pygame.KEYDOWN</code> event is triggered, we check which key was pressed by accessing the <code>key</code> attribute of the <code>event</code> object. If the <code>K_ESCAPE</code> key was pressed, we set <code>running</code> to <code>False</code> to exit the game loop and quit the program. If the spacebar was pressed, we print a message to the console.</p>
<p>After handling events, we fill the background of the window with white, draw things on the screen, and update the display using <code>pygame.display.flip()</code>.</p>
<p>The event loop is an essential part of any Pygame program, as it allows you to respond to user input and other events in real time.</p>
<h2 id="handling-keyboard-and-mouse-events">Handling keyboard and mouse events</h2>
<p>Sure! Here’s an example of how to handle keyboard and mouse events in Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the display window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'Keyboard and Mouse Events'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Start the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'The spacebar was pressed!'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'A mouse button was pressed!'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEMOTION</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'The mouse was moved!'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Fill the background with white</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw things on the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we’re handling keyboard events (<code>pygame.KEYDOWN</code>) and mouse events (<code>pygame.MOUSEBUTTONDOWN</code> and <code>pygame.MOUSEMOTION</code>).</p>
<p>When a <code>pygame.KEYDOWN</code> event occurs, we check which key was pressed by accessing the <code>key</code> attribute of the <code>event</code> object. If the <code>K_ESCAPE</code> key was pressed, we set <code>running</code> to <code>False</code> to exit the game loop and quit the program. If the spacebar was pressed, we print a message to the console.</p>
<p>When a <code>pygame.MOUSEBUTTONDOWN</code> event occurs, we print a message to the console indicating that a mouse button was pressed.</p>
<p>When a <code>pygame.MOUSEMOTION</code> event occurs, we print a message to the console indicating that the mouse was moved.</p>
<p>Note that you can handle many other types of keyboard and mouse events in Pygame, such as <code>pygame.KEYUP</code> events (which occur when a key is released), <code>pygame.MOUSEBUTTONUP</code> events (which occur when a mouse button is released), and <code>pygame.MOUSEWHEEL</code> events (which occur when the mouse wheel is scrolled). You can also access the position of the mouse cursor using the <code>pygame.mouse.get_pos()</code> function.</p>
<h2 id="creating-custom-events">Creating custom events</h2>
<p>Sure! Here’s an example of how to create and handle custom events in Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the display window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'Custom Events'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define a custom event</span></span>
<span class="line"><span style="color: #D19A66">MY_EVENT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">USEREVENT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.time.</span><span style="color: #61AFEF">set_timer</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">MY_EVENT</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1000</span><span style="color: #ABB2BF">)  </span><span style="color: #7F848E; font-style: italic"># fire every 1000 milliseconds</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Start the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MY_EVENT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'My custom event was fired!'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Fill the background with white</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw things on the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we’re defining a custom event using the <code>pygame.USEREVENT</code> constant, which is provided by Pygame for this purpose. We’re creating a new custom event by adding <code>1</code> to <code>pygame.USEREVENT</code>, resulting in a value of <code>pygame.USEREVENT + 1</code>. We’re then setting up a timer using the <code>pygame.time.set_timer()</code> function, which will fire our custom event every 1000 milliseconds (1 second).</p>
<p>In the game loop, we’re handling events using a <code>for</code> loop and the <code>pygame.event.get()</code> function, just like we did before. However, we’re now checking for our custom event using the <code>MY_EVENT</code> constant that we defined earlier. When the custom event is fired, we print a message to the console.</p>
<p>Note that you can create and handle multiple custom events in Pygame, and you can pass data along with custom events using the <code>pygame.event.Event()</code> constructor. You can also use the <code>pygame.time.set_timer()</code> function to fire events at regular intervals, as we did in this example.</p>
<h2 id="implementing-event-based-game-logic">Implementing event-based game logic</h2>
<p>Sure! Here’s an example of how to implement event-based game logic in Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the display window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'Event-based Game Logic'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define custom events</span></span>
<span class="line"><span style="color: #D19A66">MOVE_EVENT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">USEREVENT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #D19A66">FIRE_EVENT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">USEREVENT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.time.</span><span style="color: #61AFEF">set_timer</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">MOVE_EVENT</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">500</span><span style="color: #ABB2BF">)  </span><span style="color: #7F848E; font-style: italic"># fire every 500 milliseconds</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.time.</span><span style="color: #61AFEF">set_timer</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FIRE_EVENT</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2000</span><span style="color: #ABB2BF">)  </span><span style="color: #7F848E; font-style: italic"># fire every 2000 milliseconds</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define player class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">fire</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'Player fired a bullet!'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">event</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MOVE_EVENT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">FIRE_EVENT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">fire</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create player object</span></span>
<span class="line"><span style="color: #ABB2BF">player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Player</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">(player)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Start the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MOVE_EVENT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">FIRE_EVENT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(event)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Fill the background with white</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw all sprites on the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we’re defining two custom events using the <code>pygame.USEREVENT</code> constant, just like in the previous example. We’re also setting up timers for both events, so that they fire every 500 milliseconds and 2000 milliseconds, respectively.</p>
<p>We’re then defining a <code>Player</code> class that inherits from <code>pygame.sprite.Sprite</code>. This class represents the player character in our game. The <code>Player</code> class has methods for moving left, moving right, and firing a bullet. These methods are called in the <code>update()</code> method of the <code>Player</code> class, depending on which event is passed in.</p>
<p>In the game loop, we’re handling events using a <code>for</code> loop and the <code>pygame.event.get()</code> function, just like before. However, we’re now checking for both custom events (<code>MOVE_EVENT</code> and <code>FIRE_EVENT</code>) and passing the event object to the <code>update()</code> method of all sprites in the <code>all_sprites</code> group. In the <code>update()</code> method of the <code>Player</code> class, we’re checking which event is passed in and calling the appropriate method (<code>move_left()</code>, <code>move_right()</code>, or <code>fire()</code>).</p>
<p>Note that in this example, we’re using the <code>pygame.sprite.Group</code> class to manage all the sprites in our game. We’re adding the player sprite to the <code>all_sprites</code> group, and then calling the <code>update()</code> and <code>draw()</code> methods of the group in the game loop. This allows us to easily update and draw all sprites in the game, including the player character.</p>
<p>Finally, we fill the screen with white, draw all sprites on the screen using the <code>draw()</code> method of the <code>all_sprites</code> group, and update the display using <code>pygame.display.flip()</code>.</p>
<p>This is just a simple example of how to implement event-based game logic in Pygame. In a real game, you would likely have many more custom events and many more sprites to manage. However, the basic idea is the same: define custom events, pass them to the <code>update()</code> method of all sprites that need to respond to them, and update the game state accordingly.</p>
<p>Event-based game logic can be a powerful way to manage complex game logic and handle user input in Pygame. By defining custom events and using the Pygame event loop, you can create games that respond to user input in a natural and intuitive way.</p>
<h2 id="handling-window-events-and-resizing">Handling window events and resizing</h2>
<p>In addition to handling keyboard and mouse events, it’s also important to handle window events such as resizing. When the user resizes the game window, you’ll need to update the game display to match the new size of the window.</p>
<p>To handle window events, you can listen for the <code>pygame.VIDEORESIZE</code> event, which is generated whenever the game window is resized. This event includes a new size for the game display, which you can use to update the display surface.</p>
<p>Here’s an example of how to handle the <code>pygame.VIDEORESIZE</code> event in Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game display</span></span>
<span class="line"><span style="color: #ABB2BF">width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">640</span></span>
<span class="line"><span style="color: #ABB2BF">height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">480</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">VIDEORESIZE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the game display to match the new window size</span></span>
<span class="line"><span style="color: #ABB2BF">            screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((event.w, event.h), pygame.</span><span style="color: #D19A66">RESIZABLE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we listen for the <code>pygame.VIDEORESIZE</code> event in the event loop. When this event is received, we update the game display surface using the new window size (<code>event.w</code> and <code>event.h</code>). We also set the <code>pygame.RESIZABLE</code> flag to allow the user to resize the game window.</p>
<p>Note that updating the game display surface in response to the <code>pygame.VIDEORESIZE</code> event can be computationally expensive, so you may want to limit the frequency of updates or implement more efficient resizing logic if you have a particularly complex game display.</p>
<h2 id="using-pygames-clock-to-control-frame-rate">Using Pygame’s clock to control frame rate</h2>
<p>Controlling the frame rate of your game is important for maintaining a smooth and consistent user experience. One way to do this in Pygame is to use the <code>pygame.time.Clock</code> object.</p>
<p>The <code>pygame.time.Clock</code> object is used to control the frame rate by regulating the speed at which the game loop runs. You can create a <code>Clock</code> object by calling the <code>pygame.time.Clock()</code> function.</p>
<p>Here’s an example of how to use <code>pygame.time.Clock</code> to control the frame rate of your game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game display</span></span>
<span class="line"><span style="color: #ABB2BF">width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">640</span></span>
<span class="line"><span style="color: #ABB2BF">height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">480</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the clock</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit the frame rate to 60 FPS</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we create a <code>Clock</code> object using <code>pygame.time.Clock()</code> and set the desired frame rate by calling its <code>tick()</code> method. The <code>tick()</code> method takes an argument that specifies the maximum number of frames per second (FPS) that the game loop should run at. In this case, we set it to 60 FPS.</p>
<p>Note that the <code>tick()</code> method automatically adjusts the frame rate to match the maximum FPS specified, so if the game loop takes longer than the specified time to run, the frame rate will be reduced accordingly.</p>
<p>By using <code>pygame.time.Clock</code>, you can ensure that your game runs smoothly and consistently across different platforms and hardware configurations.</p>
<h2 id="using-pygames-font-module-to-display-text">Using Pygame’s font module to display text</h2>
<p>Pygame’s <code>font</code> module allows you to easily display text on the game screen. This module provides a <code>Font</code> class that you can use to load a font file and render text as a <code>Surface</code> object, which you can then blit onto the game display.</p>
<p>Here’s an example of how to use Pygame’s <code>font</code> module to display text:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game display</span></span>
<span class="line"><span style="color: #ABB2BF">width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">640</span></span>
<span class="line"><span style="color: #ABB2BF">height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">480</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the font</span></span>
<span class="line"><span style="color: #ABB2BF">font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_surface </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Hello, world!"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text_surface, (width</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> text_surface.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">()</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, height</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> text_surface.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">()</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we create a <code>Font</code> object by calling <code>pygame.font.Font(None, 36)</code>, which loads the default system font with a size of 36. We then render the text “Hello, world!” as a <code>Surface</code> object by calling the <code>render()</code> method of the <code>Font</code> object, passing in the text, <code>True</code> to enable antialiasing, and the color of the text as an RGB tuple.</p>
<p>We then blit the text surface onto the game display using the <code>blit()</code> method of the display surface, positioning it at the center of the screen. Finally, we call <code>pygame.display.flip()</code> to update the game display.</p>
<p>By using Pygame’s <code>font</code> module, you can easily add text to your game and customize its appearance by loading different font files and adjusting the size, color, and style of the text.</p>
<h2 id="using-pygames-image-module-to-load-and-display-images">Using Pygame’s image module to load and display images</h2>
<p>Pygame’s <code>image</code> module allows you to easily load and display images in your game. This module provides a <code>load()</code> function that you can use to load an image file and create a <code>Surface</code> object, which you can then blit onto the game display.</p>
<p>Here’s an example of how to use Pygame’s <code>image</code> module to load and display an image:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game display</span></span>
<span class="line"><span style="color: #ABB2BF">width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">640</span></span>
<span class="line"><span style="color: #ABB2BF">height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">480</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Load the image</span></span>
<span class="line"><span style="color: #ABB2BF">image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"example.png"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(image, (width</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> image.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">()</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, height</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> image.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">()</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we load an image file called “example.png” by calling <code>pygame.image.load("example.png")</code>, which creates a <code>Surface</code> object containing the image data. We then blit the image surface onto the game display using the <code>blit()</code> method of the display surface, positioning it at the center of the screen. Finally, we call <code>pygame.display.flip()</code> to update the game display.</p>
<p>By using Pygame’s <code>image</code> module, you can easily add images to your game and customize their appearance by loading different image files and manipulating the image data as <code>Surface</code> objects.</p>
<h2 id="using-pygames-sprite-module-to-manage-game-entities">Using Pygame’s sprite module to manage game entities</h2>
<p>The Pygame <code>sprite</code> module provides a powerful way to manage game entities, such as the player, enemies, and other objects in your game. By using sprites, you can easily handle collision detection, update and draw multiple objects at once, and perform other game logic.</p>
<p>To use the <code>sprite</code> module, you’ll first need to create a <code>Sprite</code> subclass that represents your game entity. Here’s an example of a simple sprite subclass:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we create a <code>Player</code> class that inherits from <code>pygame.sprite.Sprite</code>. We then define an <code>__init__()</code> method that creates a <code>Surface</code> object representing the player’s appearance, and a <code>Rect</code> object representing the player’s position and size on the game display.</p>
<p>Once you’ve defined your sprite subclass, you can create instances of it and add them to a sprite group. Here’s an example of how to do that:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Player</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(player)</span></span></code></pre>
<p>In this example, we create an instance of our <code>Player</code> class and add it to a sprite group called <code>all_sprites</code>. We can then update and draw all of the sprites in the group using the <code>update()</code> and <code>draw()</code> methods:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game logic</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we call <code>all_sprites.update()</code> to update the position and other properties of all of the sprites in the group, and then call <code>all_sprites.draw(screen)</code> to draw all of the sprites onto the game display surface.</p>
<p>By using the Pygame <code>sprite</code> module to manage your game entities, you can create more complex games with multiple objects that interact with each other. You can also easily handle collision detection and other game logic using the built-in methods of the <code>Sprite</code> class.</p>
<h2 id="using-pygames-mixer-module-to-play-sounds-and-music">Using Pygame’s mixer module to play sounds and music</h2>
<p>The Pygame <code>mixer</code> module allows you to play sounds and music in your game. With this module, you can load sound and music files, play them, pause them, stop them, and control their volume.</p>
<p>To use the <code>mixer</code> module, you’ll first need to initialize it in your game’s code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Next, you can load sound and music files into Pygame using the <code>Sound()</code> and <code>music.load()</code> methods, respectively. Here’s an example of how to load a sound file:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">shot_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'shot.wav'</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In this example, we create a <code>Sound</code> object called <code>shot_sound</code> by passing the filename of the sound file to the <code>Sound()</code> method.</p>
<p>You can then play the sound using the <code>play()</code> method:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">shot_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>You can also control the volume of the sound using the <code>set_volume()</code> method:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">shot_sound.</span><span style="color: #61AFEF">set_volume</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>To play music in your game, you can use the <code>music.load()</code> and <code>music.play()</code> methods:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'music.mp3'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In this example, we load a music file called <code>music.mp3</code> and play it indefinitely by passing <code>-1</code> as the argument to the <code>play()</code> method.</p>
<p>To pause or stop sounds and music, you can use the <code>pause()</code>, <code>unpause()</code>, and <code>stop()</code> methods:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">shot_sound.</span><span style="color: #61AFEF">pause</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">stop</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In addition to these methods, the <code>mixer</code> module provides other useful features, such as the ability to fade sounds and music in and out over time.</p>
<p>By using the Pygame <code>mixer</code> module, you can add sound effects and music to your game, making it more engaging and immersive for players.</p>
<h2 id="optimizing-pygame-performance-and-resources">Optimizing Pygame performance and resources</h2>
<p>When developing a game with Pygame, it’s important to consider performance and resource optimization to ensure that your game runs smoothly and efficiently. Here are a few tips for optimizing Pygame performance and resources:</p>
<ol>
<li>
<p>Use sprites: Pygame’s <code>sprite</code> module provides a convenient way to manage game entities, which can help improve performance. By grouping entities into sprites, you can update and draw them all at once, rather than individually.</p>
</li>
<li>
<p>Use image and sound caching: Loading images and sounds can be slow and resource-intensive, especially if they are loaded repeatedly. You can improve performance by using Pygame’s image and sound caching functionality to load resources into memory once, and then access them quickly from there.</p>
</li>
<li>
<p>Use surfaces wisely: Pygame’s <code>Surface</code> objects can be used to represent images, text, and other graphical elements in your game. However, creating and manipulating surfaces can be slow and resource-intensive. To optimize performance, try to create surfaces only when necessary, and reuse them as much as possible.</p>
</li>
<li>
<p>Limit screen updates: Updating the entire game screen can be a slow operation, especially if your game has many graphical elements. To optimize performance, try to limit the number of screen updates by only updating the parts of the screen that have changed.</p>
</li>
<li>
<p>Use hardware acceleration: Pygame supports hardware acceleration through the use of the SDL library. Enabling hardware acceleration can significantly improve performance, especially for graphics-intensive games.</p>
</li>
<li>
<p>Optimize game logic: Finally, optimizing your game logic can also improve performance. Consider ways to reduce the number of calculations and operations your game needs to perform, such as by using simpler collision detection algorithms, or by reducing the number of objects on screen at once.</p>
</li>
</ol>
<p>By following these tips, you can optimize your Pygame game for performance and resource usage, resulting in a smoother and more enjoyable gaming experience for your players.</p>
<h1 id="chapter-3-building-a-simple-pong-game">Chapter 3: Building a Simple Pong Game</h1>
<h2 id="overview-of-pong-game">Overview of Pong game</h2>
<p>Pong is a classic arcade-style game that was first released in the 1970s. The game is played on a two-dimensional playing field, with two players controlling paddles on opposite sides of the screen. The goal of the game is to use the paddles to hit a ball back and forth across the playing field, without letting the ball pass behind the player’s paddle. Each time a player successfully hits the ball, they score a point. The game ends when one player reaches a predetermined number of points, or when a player fails to hit the ball and it passes behind their paddle.</p>
<p>Pong is a relatively simple game, but it has proven to be very popular over the years, and has been adapted to a wide variety of platforms and technologies. In this book, we will build a version of Pong using Python and Pygame, which will allow us to explore the basics of game development, including graphics, sound, and user input.</p>
<h2 id="setting-up-the-game-environment">Setting up the game environment</h2>
<p>Before we can start building our Pong game, we need to set up our development environment. Here are the steps to follow:</p>
<ol>
<li>
<p>Install Python: If you haven’t already, you’ll need to install Python on your computer. You can download the latest version of Python from the official website (<a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a>). Follow the installation instructions for your operating system.</p>
</li>
<li>
<p>Install Pygame: Pygame is a Python library that provides a set of tools and functions for game development. To install Pygame, open a command prompt or terminal window and enter the following command:</p>
</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">pip install pygame</span></span></code></pre>
<p>This will download and install the latest version of Pygame.</p>
<ol start="3">
<li>
<p>Create a new project directory: Create a new directory on your computer to store your Pong game project. You can name it whatever you like. This will be the root directory for your project.</p>
</li>
<li>
<p>Set up the project files: Within your project directory, create a new Python file called <code>pong.py</code>. This will be the main file for your Pong game. You can also create additional files as needed for your game logic.</p>
</li>
<li>
<p>Open the project directory in your IDE: Open your project directory in your integrated development environment (IDE) of choice, such as PyCharm or Visual Studio Code. This will allow you to edit and run your game code within the context of the project.</p>
</li>
</ol>
<p>With these steps complete, you should now have a working development environment for your Pong game project, and you’re ready to start building the game!</p>
<h2 id="drawing-game-elements">Drawing game elements</h2>
<p>Now that we have our game environment set up, we can start drawing the game elements on the screen using Pygame. Here are the steps to follow:</p>
<ol>
<li>Import the Pygame library: At the top of your <code>pong.py</code> file, import the Pygame library using the following code:</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span></code></pre>
<ol start="2">
<li>Initialize Pygame: Before we can use Pygame, we need to initialize it by calling the <code>pygame.init()</code> function. Add the following code to your <code>pong.py</code> file:</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span></code></pre>
<ol start="3">
<li>Set up the game window: We need to create a Pygame window to display the game. To do this, we need to set the width and height of the window, as well as a caption for the window. Add the following code to your <code>pong.py</code> file:</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span></span>
<span class="line"><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span></span>
<span class="line"><span style="color: #D19A66">WIN</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Pong"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>This sets the width and height of the game window to 800 pixels by 600 pixels, and sets the caption to “Pong”.</p>
<ol start="4">
<li>Set up the game loop: In order to update the game and display the changes on the screen, we need to set up a game loop. The game loop will run continuously until the user closes the game window. Add the following code to your <code>pong.py</code> file:</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This creates an infinite loop that continually checks for Pygame events. If the user clicks the “X” button in the game window, Pygame will quit and exit the program.</p>
<ol start="5">
<li>Draw game elements: Now we’re ready to start drawing the game elements on the screen. Pygame uses the concept of “sprites” to represent game entities, such as the ball and paddles in Pong. We’ll create a <code>Ball</code> class and a <code>Paddle</code> class to represent these game elements, and draw them on the screen using Pygame’s <code>draw</code> module.</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">radius</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> radius</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> color</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">win</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(win, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> color</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">win</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(win, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height))</span></span></code></pre>
<p>This creates the <code>Ball</code> and <code>Paddle</code> classes, which contain the necessary properties and methods to draw the ball and paddles on the screen.</p>
<ol start="6">
<li>Create game objects: Finally, we need to create instances of the <code>Ball</code> and <code>Paddle</code> classes and draw them on the screen within the game loop. Add the following code to your <code>pong.py</code> file:</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">paddle1 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">paddle2 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Add sprites to sprite groups</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(paddle1, paddle2, ball)</span></span>
<span class="line"><span style="color: #ABB2BF">paddles.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(paddle1, paddle2)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Move the paddles</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_w]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle1.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_s]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle1.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle2.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle2.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the ball and check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(ball, paddles, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        score_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">line</span><span style="color: #ABB2BF">(screen, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit the game</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<h2 id="adding-game-logic">Adding game logic</h2>
<p>To make Pong a functional game, we need to add game logic to detect when the ball goes past a paddle and award points to the opposing player. We’ll also need to reset the ball after each point is scored. Here’s the updated code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game environment</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Pong"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Load game sounds</span></span>
<span class="line"><span style="color: #ABB2BF">score_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"score.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define game classes</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.height:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.height</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for ball going out of bounds</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            score_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            score_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create game objects</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">paddles </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">paddle1 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">40</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">paddle2 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Add sprites to sprite groups</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(paddle1, paddle2, ball)</span></span>
<span class="line"><span style="color: #ABB2BF">paddles.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(paddle1, paddle2)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">player1_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">player2_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Move the paddles</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_w]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle1.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_s]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle1.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle2.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Next, we need to add collision detection to the ball and paddles, so that the ball bounces off them correctly. We can do this by checking if the ball collides with the paddles, and then changing the direction of the ball accordingly.</p>
<p>To do this, we’ll add the following code inside the game loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># check for collisions with paddles</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle1.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"x"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle2.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"x"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># check for collisions with top and bottom walls</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.top </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> ball.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"y"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>The <code>colliderect()</code> method of the Pygame sprite class checks if two sprites’ rectangles overlap. If the ball collides with a paddle, we call the <code>bounce()</code> method of the ball, passing in the direction of the bounce (“x” for bouncing horizontally, “y” for bouncing vertically). We’ll define the <code>bounce()</code> method of the <code>Ball</code> class shortly.</p>
<p>We also check for collisions with the top and bottom walls of the screen, and bounce the ball vertically if it hits them.</p>
<p>Now let’s add the <code>bounce()</code> method to the <code>Ball</code> class. This method will change the direction of the ball based on the direction passed in as an argument. We’ll add this code to the <code>Ball</code> class:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">direction</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"x"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"y"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_y </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span></code></pre>
<p>This method checks the direction passed in as an argument, and then multiplies the ball’s horizontal or vertical speed by -1 to change its direction.</p>
<p>Next, we need to update the position of the ball each frame, and check if it goes off the left or right edge of the screen. If it does, we’ll reset its position and update the score of the player who scored.</p>
<p>Add the following code to the game loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf"># update ball position</span></span>
<span class="line"><span style="color: #abb2bf">ball.update()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># check for scoring</span></span>
<span class="line"><span style="color: #abb2bf">if ball.rect.left &#x3C;= 0:</span></span>
<span class="line"><span style="color: #abb2bf">    player2_score += 1</span></span>
<span class="line"><span style="color: #abb2bf">    ball.reset()</span></span>
<span class="line"><span style="color: #abb2bf">elif ball.rect.right >= WIDTH:</span></span>
<span class="line"><span style="color: #abb2bf">    player1_score += 1</span></span>
<span class="line"><span style="color: #abb2bf">    ball.reset()</span></span></code></pre>
<p>The <code>update()</code> method of the <code>Ball</code> class will update the position of the ball based on its speed. If the ball goes off the left or right edge of the screen, we reset its position using the <code>reset()</code> method of the <code>Ball</code> class. We’ll define this method shortly.</p>
<p>We also update the score of the player who scored. We’ll need to display the score on the screen, so let’s add that next.</p>
<p>Add the following code to the game loop, after the <code>screen.blit()</code> calls:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf"># render scores</span></span>
<span class="line"><span style="color: #abb2bf">player1_text = font.render(str(player1_score), True, (255, 255, 255))</span></span>
<span class="line"><span style="color: #abb2bf">player2_text = font.render(str(player2_score), True, (255, 255, 255))</span></span>
<span class="line"><span style="color: #abb2bf">screen.blit(player1_text, (WIDTH // 4, 10))</span></span>
<span class="line"><span style="color: #abb2bf">screen.blit(player2_text, (3 * WIDTH // 4, 10))</span></span></code></pre>
<p>This code creates two Pygame <code>Surface</code> objects containing the score of each player, using the <code>render()</code> method of the Pygame font class. We then blit these surfaces onto the screen at the appropriate positions.</p>
<p>Finally, we need to define the <code>reset()</code> method of the <code>Ball</code> class. This method resets the position of the ball to the center of the screen, and resets its speed to a random value. Add the following code to the <code>Ball</code> class:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">def</span></span></code></pre>
<h2 id="adding-sounds-and-music">Adding sounds and music</h2>
<p>To make our Pong game more engaging, we can add sound effects and background music. Pygame provides a mixer module for playing sounds and music.</p>
<p>First, let’s load the sound effects and music files. We can do this by calling the <code>pygame.mixer.Sound()</code> function and passing in the filename of the sound effect or music file.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Load sounds and music</span></span>
<span class="line"><span style="color: #ABB2BF">pong_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"pong.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">score_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"score.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"background_music.mp3"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Here, we’ve loaded two sound effects: <code>pong.wav</code> and <code>score.wav</code>, and a background music file <code>background_music.mp3</code>. We can play these sounds and music using the <code>play()</code> method of the <code>pygame.mixer.Sound</code> and <code>pygame.mixer.music</code> objects.</p>
<p>Next, let’s add the sounds and music to our game logic. We’ll play the <code>pong_sound</code> whenever the ball collides with a paddle, and the <code>score_sound</code> whenever a player scores.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Inside Ball class's move method</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Check collision with paddles</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle1.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">    pong_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle2.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">    pong_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Check if a player scores</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    score_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    score_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Here, we’ve added the sound effects to the collision detection logic for the paddles and scoring conditions. Whenever the ball collides with a paddle, we play the <code>pong_sound</code> and reverse the horizontal speed of the ball. Whenever a player scores, we play the <code>score_sound</code> and reset the ball.</p>
<p>Lastly, let’s add the background music to the game loop.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Inside main game loop</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Play background music</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Here, we’re playing the <code>background_music</code> in an infinite loop.</p>
<p>With these additions, our Pong game is now more engaging and fun to play!</p>
<h2 id="adding-a-game-over-screen">Adding a game over screen</h2>
<p>To add a game over screen, we first need to modify the <code>run</code> function to detect when the game is over. In Pong, the game is over when one player reaches the score of 11. We can add a check for this condition after each point is scored.</p>
<p>We can then create a new function called <code>show_game_over_screen</code> that displays the game over message and waits for the user to press a key to restart the game. We can also add a background image to the game over screen to make it more visually appealing.</p>
<p>Here’s the updated code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> os</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game Constants</span></span>
<span class="line"><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span></span>
<span class="line"><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span></span>
<span class="line"><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">60</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Colors</span></span>
<span class="line"><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize sound mixer</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Load sound files</span></span>
<span class="line"><span style="color: #ABB2BF">pong_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(os.path.</span><span style="color: #61AFEF">join</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'sounds'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'pong.ogg'</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">score_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(os.path.</span><span style="color: #61AFEF">join</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'sounds'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'score.ogg'</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Pong"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Load background image</span></span>
<span class="line"><span style="color: #ABB2BF">background_img </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(os.path.</span><span style="color: #61AFEF">join</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'img'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'background.jpg'</span><span style="color: #ABB2BF">)).</span><span style="color: #61AFEF">convert</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">background_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> background_img.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.sprite.Sprite.</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">stop</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.sprite.Sprite.</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedx</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            score_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            score_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Function to show the game over screen</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">show_game_over_screen</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background_img, background_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #98C379">"GAME OVER"</span><span style="color: #ABB2BF">,</span><span style="color: #98C379">"Arial"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #98C379">"Press ESC to Quit or SPACE to Play Again"</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">"Arial"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">22</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> waiting:</span></span>
<span class="line"><span style="color: #ABB2BF">        clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                    running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>The new function, <code>game_over_screen</code>, first draws the background image and the “GAME OVER” text in the center of the screen. It then displays a message asking the player to press the space bar to play again or the escape key to quit. The <code>True</code> parameter in the <code>draw_text</code> function call makes the text centered on the coordinates instead of being anchored to the top-left corner.</p>
<p>The function then enters a loop that waits for the player to press a key. If the player presses the escape key, the game quits immediately. If the player presses the space bar, the <code>reset</code> function is called, which resets the game state and starts a new game.</p>
<p>Finally, if the player closes the window, the game exits.</p>
<h2 id="implementing-player-controls-with-keyboard-input">Implementing player controls with keyboard input</h2>
<p>To implement player controls with keyboard input, we need to add code to the <code>Paddle</code> class to move the paddle up and down based on keyboard input. We’ll do this by adding two methods to the <code>Paddle</code> class: <code>move_up</code> and <code>move_down</code>.</p>
<p>Here’s the updated <code>Paddle</code> class with the new methods:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([width, height])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span></code></pre>
<p>The <code>move_up</code> method moves the paddle up by 5 pixels, and the <code>move_down</code> method moves the paddle down by 5 pixels. Note that we’re hardcoding the movement amount here, but you could make this a parameter or a constant if you wanted to.</p>
<p>Now, in the game loop, we need to detect keyboard input and call these methods on the appropriate paddle. We can do this by adding code to the event loop in the <code>main</code> function:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_w:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle1.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_s:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle1.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle2.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle2.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Here, we’re checking for <code>KEYDOWN</code> events and then checking which key was pressed. If the W key is pressed, we move the first paddle up; if the S key is pressed, we move it down. Similarly, if the up arrow key is pressed, we move the second paddle up, and if the down arrow key is pressed, we move it down.</p>
<p>With these changes, the players can now control their paddles using the keyboard.</p>
<h2 id="creating-game-objects-such-as-ball-and-paddles">Creating game objects such as ball and paddles</h2>
<p>To create game objects such as ball and paddles in Pygame, we can use the Sprite class provided by the Pygame library. The Sprite class is a useful tool for creating game objects that can be updated and drawn on the screen with ease. We can create our own custom classes for game objects by inheriting from the Sprite class.</p>
<p>Let’s start by creating a Paddle class that will represent the paddles in our Pong game. The Paddle class will inherit from the Sprite class and will have properties such as position, size, color, and velocity.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([width, height])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity</span></span></code></pre>
<p>In the constructor of the Paddle class, we create a Surface object with the given width and height and fill it with the specified color. We then get the rectangle that bounds the Surface and set its position to (x, y). The velocity of the paddle is set to 0 by default.</p>
<p>The update method of the Paddle class is called once per frame and updates the position of the paddle based on its velocity.</p>
<p>We can create a Ball class in a similar manner:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">radius</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([radius </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, radius </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, color, (radius, radius), radius)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span></code></pre>
<p>In the constructor of the Ball class, we create a Surface object with the given radius and fill it with black color. We then draw a circle of the specified color at the center of the Surface. We get the rectangle that bounds the Surface and set its position to (x, y). The velocity of the ball is set to [0, 0] by default.</p>
<p>The update method of the Ball class is called once per frame and updates the position of the ball based on its velocity.</p>
<h2 id="implementing-ball-movement-and-collision-detection">Implementing ball movement and collision detection</h2>
<p>To implement ball movement and collision detection, we need to modify the <code>Ball</code> class. We will add a <code>move</code> method to update the ball’s position based on its current velocity. We will also add a <code>check_collision</code> method to detect collisions with the walls and paddles.</p>
<p>Here’s the updated <code>Ball</code> class:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">size</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([size, size])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">), (</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">), (</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">paddles</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check collision with top/bottom walls</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">], </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check collision with paddles</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> paddle </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> paddles:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">], </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">])</span></span></code></pre>
<p>In the <code>move</code> method, we update the ball’s position based on its current velocity, which is stored in the <code>direction</code> attribute. We also multiply the velocity by a <code>speed</code> factor to control how fast the ball moves.</p>
<p>In the <code>check_collision</code> method, we check for collisions with the top and bottom walls of the screen using the <code>rect</code> attribute of the ball. If a collision is detected, we reverse the <code>y</code> component of the <code>direction</code> vector to make the ball bounce.</p>
<p>We also check for collisions with the paddles using the <code>colliderect</code> method of the ball’s <code>rect</code> object. If a collision is detected, we reverse the <code>x</code> component of the <code>direction</code> vector to make the ball bounce off the paddle.</p>
<p>To update the ball’s position and check for collisions, we need to call the <code>move</code> and <code>check_collision</code> methods in the game loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Move ball and check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">([paddle1, paddle2])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw elements on screen</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">line</span><span style="color: #ABB2BF">(screen, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">, [</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">], [</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">], </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Here, we first call the <code>move</code> and <code>check_collision</code> methods on the ball object to update its position and check for collisions with the paddles and walls. Then, we draw all the game elements on the screen, including the ball, using the <code>all_sprites</code> group. Finally, we update the display and use the <code>clock</code> object to control the frame rate of the game.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># event handling</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># move the ball and detect collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.</span><span style="color: #61AFEF">collides_with</span><span style="color: #ABB2BF">(paddle1) </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> ball.</span><span style="color: #61AFEF">collides_with</span><span style="color: #ABB2BF">(paddle2):</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        hit_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.</span><span style="color: #61AFEF">hit_wall</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce_wall</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        wall_hit_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># update game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># check if ball goes out of bounds</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.</span><span style="color: #61AFEF">out_of_bounds</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            p2_score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> p2_score </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIN_SCORE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            p1_score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> p1_score </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIN_SCORE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># fill the screen with black</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># draw game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># draw scores</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(p1_score), font, </span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(p2_score), font, </span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># update display and control frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span></code></pre>
<h2 id="implementing-ai-for-computer-controlled-paddle">Implementing AI for computer-controlled paddle</h2>
<p>To implement an AI for the computer-controlled paddle, we need to calculate the position of the ball and move the paddle accordingly. We can use a simple approach for the AI by having the computer-controlled paddle move towards the y-coordinate of the ball’s center.</p>
<p>We can implement this by adding a new <code>update</code> method to the <code>Paddle</code> class that takes the position of the ball as an argument. In this method, we can calculate the y-coordinate of the ball’s center and the y-coordinate of the center of the paddle. We then compare these values to determine whether the paddle should move up or down.</p>
<p>Here’s the updated <code>Paddle</code> class with the new <code>update</code> method:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([width, height])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">ball_pos</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        ball_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> ball_pos[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BALL_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball_y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> paddle_y:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> ball_y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> paddle_y:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We’ve added a new <code>update</code> method that takes the <code>ball_pos</code> argument, which is a tuple containing the x and y position of the ball. In the <code>update</code> method, we calculate the y-coordinate of the ball’s center by adding half of the ball’s size to the y-coordinate of the ball’s position. We do the same for the y-coordinate of the paddle’s center. We then compare these values to determine whether the paddle should move up or down.</p>
<p>We can call this method for the computer-controlled paddle in the main game loop, after updating the ball’s position:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Event handling</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(ball.rect.center)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check collision</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">collide_rect</span><span style="color: #ABB2BF">(ball, paddle1):</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'x'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">speed_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">collide_rect</span><span style="color: #ABB2BF">(ball, paddle2):</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'x'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">speed_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We pass the center position of the ball to the <code>update</code> method of both paddles. For the player-controlled paddle, this argument is ignored. For the computer-controlled paddle, it is used to update the position of the paddle based on the ball’s position.</p>
<p>With this implementation, the computer-controlled paddle will move towards the y-coordinate of the ball’s center, making the game more challenging and fun to play.</p>
<p>To implement the AI for the computer-controlled paddle, we need to determine the direction in which the paddle should move based on the position of the ball. We can achieve this by calculating the difference between the y-coordinate of the center of the ball and the center of the paddle.</p>
<p>In the <code>update()</code> method of the <code>Paddle</code> class, we will add the AI logic to move the computer-controlled paddle towards the y-coordinate of the ball’s center. We will use the <code>self.speed</code> attribute to control the speed at which the paddle moves.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">class Paddle(pygame.sprite.Sprite):</span></span>
<span class="line"><span style="color: #abb2bf">    def __init__(self, x, y, width, height, color):</span></span>
<span class="line"><span style="color: #abb2bf">        super().__init__()</span></span>
<span class="line"><span style="color: #abb2bf">        self.image = pygame.Surface([width, height])</span></span>
<span class="line"><span style="color: #abb2bf">        self.image.fill(color)</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect = self.image.get_rect()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.x = x</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.y = y</span></span>
<span class="line"><span style="color: #abb2bf">        self.speed = 5  # add speed attribute for paddle movement</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def move_up(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.y -= self.speed</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def move_down(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.y += self.speed</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def update(self, ball):</span></span>
<span class="line"><span style="color: #abb2bf">        # calculate the difference between the y-coordinate of the ball's center and the center of the paddle</span></span>
<span class="line"><span style="color: #abb2bf">        diff = self.rect.centery - ball.rect.centery</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">        if abs(diff) &#x3C; self.speed:</span></span>
<span class="line"><span style="color: #abb2bf">            # if the difference is less than the speed, move the paddle to the y-coordinate of the ball's center</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.centery = ball.rect.centery</span></span>
<span class="line"><span style="color: #abb2bf">        else:</span></span>
<span class="line"><span style="color: #abb2bf">            # otherwise, move the paddle towards the y-coordinate of the ball's center</span></span>
<span class="line"><span style="color: #abb2bf">            if diff &#x3C; 0:</span></span>
<span class="line"><span style="color: #abb2bf">                self.rect.y += self.speed</span></span>
<span class="line"><span style="color: #abb2bf">            else:</span></span>
<span class="line"><span style="color: #abb2bf">                self.rect.y -= self.speed</span></span></code></pre>
<p>Here, we calculate the difference between the y-coordinate of the center of the paddle and the center of the ball using the <code>rect.centery</code> attribute. If the difference is less than the paddle’s speed, we move the paddle to the y-coordinate of the ball’s center. Otherwise, we move the paddle towards the y-coordinate of the ball’s center by adding or subtracting the speed from the y-coordinate of the paddle’s center.</p>
<p>With this AI logic implemented, the computer-controlled paddle will now move towards the y-coordinate of the ball’s center, making the game more challenging and fun to play.</p>
<h2 id="adding-scoring-functionality">Adding scoring functionality</h2>
<p>To make the game more engaging, we need to add scoring functionality to it. Each time a player misses the ball, the other player will get a point. We will implement this by creating a <code>Scoreboard</code> class that keeps track of each player’s score and displays it on the screen.</p>
<p>First, we will create a <code>Scoreboard</code> class that will store the scores of both players and will display them on the screen. The <code>__init__()</code> method will initialize the font and set the initial scores to zero. The <code>update()</code> method will update the score of the player who scored and the <code>display()</code> method will display the scores on the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Scoreboard</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player1_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player2_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">player</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> player </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player1_score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player2_score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">display</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">f</span><span style="color: #98C379">"</span><span style="color: #D19A66">{</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player1_score</span><span style="color: #D19A66">}</span><span style="color: #98C379"> - </span><span style="color: #D19A66">{</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player2_score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span></span>
<span class="line"><span style="color: #ABB2BF">        text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(score_text, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span></code></pre>
<p>Next, we will modify the <code>PongGame</code> class to update the scores when a player misses the ball. In the <code>update()</code> method, we will add code to check if the ball goes out of bounds and update the scores accordingly. We will also reset the ball’s position and direction when a player scores a point.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">PongGame</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Initialize game window and other elements</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create game objects</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player1 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player2 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create scoreboard</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.scoreboard </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Scoreboard</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update game objects</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player1.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player2.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check if ball goes out of bounds and update scores</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.rect.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.scoreboard.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.rect.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.scoreboard.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle collisions</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update game state</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw game objects</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw scoreboard</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.scoreboard.</span><span style="color: #61AFEF">display</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update display and control frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># ...</span></span></code></pre>
<p>With these changes, the game will keep track of each player’s score and display it on the screen.
Great! With the scoring functionality added, players can now keep track of their progress and compete against each other.</p>
<p>Let’s update the game loop to check for scoring conditions. When the ball goes past a paddle, we will reset the ball’s position and increment the opposing player’s score. We’ll also update the display to show the new score.</p>
<p>Here’s the updated game loop with scoring functionality:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Move the paddles</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_w]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle1.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_s]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle1.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle2.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle2.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update ball position</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collision with walls</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.top </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> ball.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce_y</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collision with paddles</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle1.rect) </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> ball.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle2.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce_x</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for scoring</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        score2 </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        score1 </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background_img, background_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score1), </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score2), </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle1.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle2.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Control frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Now, when a player scores a point, their score is incremented, and the ball is reset to the center of the screen. The updated score is then displayed on the screen.</p>
<p>With the addition of scoring, our Pong game is now fully functional and ready to play!</p>
<h2 id="implementing-game-over-logic-and-resetting-the-game">Implementing game over logic and resetting the game</h2>
<p>To implement game over logic, we need to check if either player has reached the maximum score, which is typically 11 points in Pong. We can add this check to the game loop after updating the ball’s position.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">while not game_over:</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">            sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Handle player controls</span></span>
<span class="line"><span style="color: #abb2bf">    keys = pygame.key.get_pressed()</span></span>
<span class="line"><span style="color: #abb2bf">    if keys[pygame.K_q]:</span></span>
<span class="line"><span style="color: #abb2bf">        pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">        sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf">    if keys[pygame.K_w]:</span></span>
<span class="line"><span style="color: #abb2bf">        paddle1.move_up()</span></span>
<span class="line"><span style="color: #abb2bf">    if keys[pygame.K_s]:</span></span>
<span class="line"><span style="color: #abb2bf">        paddle1.move_down()</span></span>
<span class="line"><span style="color: #abb2bf">    if keys[pygame.K_UP]:</span></span>
<span class="line"><span style="color: #abb2bf">        paddle2.move_up()</span></span>
<span class="line"><span style="color: #abb2bf">    if keys[pygame.K_DOWN]:</span></span>
<span class="line"><span style="color: #abb2bf">        paddle2.move_down()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Move the ball</span></span>
<span class="line"><span style="color: #abb2bf">    ball.move()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Check for collisions with paddles</span></span>
<span class="line"><span style="color: #abb2bf">    if ball.collides_with_paddle(paddle1) or ball.collides_with_paddle(paddle2):</span></span>
<span class="line"><span style="color: #abb2bf">        ball.bounce()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Check for scoring</span></span>
<span class="line"><span style="color: #abb2bf">    if ball.off_screen_left():</span></span>
<span class="line"><span style="color: #abb2bf">        player2_score += 1</span></span>
<span class="line"><span style="color: #abb2bf">        ball.reset()</span></span>
<span class="line"><span style="color: #abb2bf">    elif ball.off_screen_right():</span></span>
<span class="line"><span style="color: #abb2bf">        player1_score += 1</span></span>
<span class="line"><span style="color: #abb2bf">        ball.reset()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Check for game over</span></span>
<span class="line"><span style="color: #abb2bf">    if player1_score == MAX_SCORE or player2_score == MAX_SCORE:</span></span>
<span class="line"><span style="color: #abb2bf">        game_over = True</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Draw the game elements</span></span>
<span class="line"><span style="color: #abb2bf">    screen.blit(background_img, background_rect)</span></span>
<span class="line"><span style="color: #abb2bf">    draw_text(screen, f"{player1_score} : {player2_score}", WIDTH // 2, 30, (255, 255, 255))</span></span>
<span class="line"><span style="color: #abb2bf">    paddle1.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    paddle2.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    ball.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Update the display</span></span>
<span class="line"><span style="color: #abb2bf">    pygame.display.update()</span></span>
<span class="line"><span style="color: #abb2bf">    clock.tick(FPS)</span></span></code></pre>
<p>If either player reaches the maximum score, we set <code>game_over</code> to <code>True</code> and exit the game loop. We can then display a game over screen with the final scores and give the player the option to restart the game.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">show_game_over_screen</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background_img, background_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #98C379">"GAME OVER"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #C678DD">f</span><span style="color: #98C379">"Player 1: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">player1_score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #C678DD">f</span><span style="color: #98C379">"Player 2: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">player2_score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #98C379">"Press R to restart"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> waiting:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_r:</span></span>
<span class="line"><span style="color: #ABB2BF">                    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Add this code after the game loop</span></span>
<span class="line"><span style="color: #61AFEF">show_game_over_screen</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">player1_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">player2_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>This code displays a game over screen with the final scores and waits for the player to press the “R” key to restart the game. We also reset the scores and set <code>game_over</code> back to <code>False</code> so that the game can be played again.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reset_game</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">global</span><span style="color: #ABB2BF"> paddle1_score, paddle2_score, game_over</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Reset scores</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle1_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle2_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Reset paddles and ball</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle1.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle2.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set game_over flag to False</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle player controls</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">handle_player_controls</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle1.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle2.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(paddle1, paddle2)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for game over</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> paddle1_score </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MAX_SCORE</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> paddle2_score </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MAX_SCORE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_game_objects</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw scores</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_scores</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game over screen if game is over</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_game_over_screen</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Control frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>With these changes, the game can be reset when a player wins by pressing the <code>R</code> key. The <code>reset_game</code> function resets the scores and game objects and sets the <code>game_over</code> flag to <code>False</code>. The game loop checks for the <code>R</code> key being pressed and calls the <code>reset_game</code> function if it is. The game can then be played again from the beginning.</p>
<h2 id="adding-difficulty-levels-and-game-variations">Adding difficulty levels and game variations</h2>
<p>To make the game more interesting and challenging, we can add difficulty levels and game variations. For example, we can make the ball move faster and the computer paddle more difficult to beat at higher levels.</p>
<p>We can also add power-ups such as a larger paddle or slower ball, or obstacles such as a moving wall that the ball must avoid. These variations can be randomly generated or selected by the player at the start of the game.</p>
<p>Another variation could be a two-player mode, where two players can play against each other on the same screen, each controlling their own paddle with a different set of keys.</p>
<p>To implement these features, we can add new classes and functions to our game, such as a <code>PowerUp</code> class or a <code>TwoPlayer</code> class. We can also add new menu screens to allow the player to select their preferred difficulty level or game variation.</p>
<p>With these additions, our Pong game will become more dynamic and engaging, providing hours of entertainment for players of all skill levels.</p>
<h2 id="optimizing-and-improving-game-performance">Optimizing and improving game performance</h2>
<p>Optimizing and improving game performance is an important step in the game development process. Here are a few tips and techniques for optimizing Pygame performance:</p>
<ol>
<li>
<p>Use Pygame’s sprite module to manage game entities efficiently. This will help you avoid having to redraw the entire screen every frame.</p>
</li>
<li>
<p>Minimize the number of Pygame events that you’re processing in each frame. The more events you process, the slower the game will run. You can accomplish this by selectively processing only the events that are important to your game.</p>
</li>
<li>
<p>Use Pygame’s clock module to control the frame rate of your game. This will help ensure that your game runs smoothly on all machines.</p>
</li>
<li>
<p>Use Pygame’s image module to load images into your game. This module is optimized for performance and will help your game run more smoothly.</p>
</li>
<li>
<p>Use Pygame’s font module to display text in your game. This module is also optimized for performance and will help your game run more smoothly.</p>
</li>
<li>
<p>Avoid using Python’s built-in <code>time.sleep()</code> function. This function can slow down your game and cause it to stutter.</p>
</li>
<li>
<p>Use Pygame’s mixer module to play sounds and music in your game. This module is optimized for performance and will help your game run more smoothly.</p>
</li>
<li>
<p>Finally, make sure that you’re running your game on a machine that meets the recommended system requirements. If your machine is underpowered, your game may not run as smoothly as it should.</p>
</li>
</ol>
<p>By following these tips and techniques, you can optimize your Pygame game for performance and ensure that it runs smoothly on all machines.</p>
<h2 id="adding-multiplayer-functionality">Adding multiplayer functionality</h2>
<p>To add multiplayer functionality to our Pong game, we need to modify the game logic to handle input from two players instead of just one.</p>
<p>First, we need to create a second paddle object for the second player. We can do this by copying the code that creates the first paddle object and modifying it to create the second paddle object at the right side of the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Create the paddles</span></span>
<span class="line"><span style="color: #ABB2BF">paddle1 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">40</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">paddle2 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span></code></pre>
<p>Next, we need to modify the game loop to handle input from both players. We can do this by checking the state of the keys for both players and moving the paddles accordingly.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Get the state of the keyboard for both players</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_w]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle1.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_s]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle1.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle2.</span><span style="color: #61AFEF">move_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle2.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Move the ball</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle1.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> ball.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle2.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for scoring</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        player2_score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> ball.rect.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        player1_score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(player1_score), </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(player2_score), </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle1.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle2.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    ball.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>With these changes, the game now handles input from two players and allows for multiplayer gameplay.</p>
<h2 id="improving-graphics-with-sprites-and-animations">Improving graphics with sprites and animations</h2>
<p>Sprites and animations can greatly enhance the graphics of a game and make it more engaging for players. In Pygame, sprites are game objects that can be moved and manipulated as a single unit, and animations are a series of images that are displayed in sequence to create the illusion of motion.</p>
<p>To implement sprites and animations in our Pong game, we can start by creating sprite classes for our game objects. For example, we can create a <code>Ball</code> sprite class that inherits from Pygame’s <code>Sprite</code> class and define its properties and behaviors. Similarly, we can create a <code>Paddle</code> sprite class that inherits from <code>Sprite</code> and add methods for moving the paddle up and down.</p>
<p>To create animations, we can use a technique called sprite sheets, which is a single image that contains multiple frames of animation. We can use Pygame’s <code>image.load()</code> function to load the sprite sheet image and then use Pygame’s <code>Surface.subsurface()</code> function to extract individual frames from the sprite sheet. We can then use these frames to create animations using Pygame’s <code>Sprite</code> class and its <code>image</code> and <code>rect</code> properties.</p>
<p>Once we have created our sprite classes and animations, we can add them to the game loop and update them as needed. For example, we can update the <code>Ball</code> sprite’s position and check for collisions with the <code>Paddle</code> sprites. We can also update the animations for the <code>Ball</code> sprite and the <code>Paddle</code> sprites to make them look more realistic.</p>
<p>Adding sprites and animations can be a bit more complex than the other features we have implemented in our Pong game so far, but it can greatly enhance the game’s visuals and make it more enjoyable for players.</p>
<h2 id="implementing-game-physics-such-as-ball-spin-and-bouncing-angles">Implementing game physics such as ball spin and bouncing angles</h2>
<p>Implementing game physics in Pong can add an extra layer of realism and strategy to the game. Here are some steps to implement ball spin and bouncing angles:</p>
<ol>
<li>Add a <code>spin</code> attribute to the <code>Ball</code> class that tracks the ball’s current spin value.</li>
<li>Add a method to the <code>Ball</code> class that allows you to change the ball’s spin value.</li>
<li>Modify the <code>update</code> method in the <code>Ball</code> class to apply the ball’s spin to its x and y velocities. This can be done by adding the spin value to the x and y velocities each frame.</li>
<li>Modify the <code>check_collision</code> method in the <code>Ball</code> class to adjust the angle of the ball’s bounce based on the position of the paddle it hits. For example, if the ball hits the top half of a paddle, it should bounce upwards at an angle, while if it hits the bottom half of the paddle, it should bounce downwards at an angle.</li>
</ol>
<p>Here’s an example implementation of these steps:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">radius</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> radius</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> color</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.spin </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">set_colorkey</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.spin</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.spin</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">paddle</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> paddle.rect.left </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> paddle.rect.centerx:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> paddle.velocity_y </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.spin </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-abs</span><span style="color: #ABB2BF">(paddle.velocity_y) </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> paddle.rect.left </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> paddle.rect.centerx:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> paddle.velocity_y </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.spin </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">abs</span><span style="color: #ABB2BF">(paddle.velocity_y) </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> paddle.rect.right </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> paddle.rect.centerx:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> paddle.velocity_y </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.spin </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-abs</span><span style="color: #ABB2BF">(paddle.velocity_y) </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> paddle.rect.right </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> paddle.rect.centerx:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> paddle.velocity_y </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.spin </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">abs</span><span style="color: #ABB2BF">(paddle.velocity_y) </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span></code></pre>
<p>In this implementation, the <code>spin</code> attribute tracks the ball’s current spin value, which is added to the x and y velocities each frame in the <code>update</code> method. The <code>check_collision</code> method also adjusts the angle of the ball’s bounce based on the position of the paddle it hits. The <code>spin</code> value is set based on the velocity of the paddle at the time of the collision.</p>
<h2 id="adding-power-ups-and-bonus-features">Adding power-ups and bonus features</h2>
<p>Adding power-ups and bonus features to the Pong game can make it more exciting and challenging for the players. Here are some ideas for power-ups and bonus features that can be added:</p>
<p>Multi-ball power-up: This power-up would add an additional ball to the game, making it more challenging to keep track of and increasing the chances of scoring.</p>
<p>Slow-motion power-up: This power-up would slow down the game, making it easier for players to react to the ball’s movements and allowing them to strategize their shots.</p>
<p>Paddle size power-up: This power-up would increase the size of the player’s paddle, making it easier to hit the ball and increasing their chances of scoring.</p>
<p>Invisible ball power-up: This power-up would make the ball invisible for a short period of time, making it harder for players to track and increasing the element of surprise in the game.</p>
<p>Sticky paddle power-up: This power-up would make the player’s paddle sticky, allowing them to catch the ball and change its direction.</p>
<p>Laser power-up: This power-up would give the player the ability to shoot a laser from their paddle, which can destroy obstacles and potentially knock out the opponent’s paddle.</p>
<p>Obstacle bonus feature: This feature would add obstacles to the game, such as walls or moving blocks, making it more challenging to keep the ball in play.</p>
<p>Random trajectory bonus feature: This feature would randomly change the trajectory of the ball, making it harder for players to predict where it will go.</p>
<p>Speed boost bonus feature: This feature would increase the speed of the ball, making it more challenging to react to and increasing the intensity of the game.</p>
<p>Implementing these power-ups and bonus features would require additional game logic and programming. It would also require creating new graphics and sound effects to represent each power-up or bonus feature. However, these additions can make the game more engaging and enjoyable for players.</p>
<h2 id="customizing-game-settings-and-options">Customizing game settings and options</h2>
<p>To customize game settings and options, we can add a settings menu that allows the player to adjust various aspects of the game. Here are some possible options that can be included:</p>
<p>Difficulty level - This option can allow the player to adjust the speed and agility of the computer-controlled paddle.</p>
<p>Sound volume - This option can allow the player to adjust the volume of sound effects and music in the game.</p>
<p>Screen size - This option can allow the player to adjust the size of the game window.</p>
<p>Control scheme - This option can allow the player to choose between different control schemes, such as keyboard or gamepad controls.</p>
<p>Game mode - This option can allow the player to choose between different game modes, such as a timed mode where the player has to score as many points as possible within a certain time limit, or a survival mode where the player has to avoid obstacles and enemies while trying to score points.</p>
<p>Graphics quality - This option can allow the player to choose between different graphics quality settings, such as low, medium, or high.</p>
<p>Language - This option can allow the player to choose between different languages for the game interface and text.</p>
<p>By including a settings menu, we can give players more control over their game experience and make the game more accessible to a wider audience.</p>
<h1 id="chapter-4-building-a-space-invaders-game">Chapter 4: Building a Space Invaders Game</h1>
<h2 id="overview-of-space-invaders-game">Overview of Space Invaders game</h2>
<p>Space Invaders is a classic arcade game from the 1970s where the player controls a spaceship that must shoot down waves of invading alien spaceships. The game is played on a two-dimensional grid, with the player’s spaceship starting at the bottom and the alien spaceships moving down from the top of the screen. The player must move the spaceship left and right to avoid the alien ships’ attacks while firing lasers to destroy them. The game becomes progressively more difficult as the alien ships move faster and shoot more frequently.</p>
<h2 id="setting-up-the-game-environment-1">Setting up the game environment</h2>
<p>To set up the game environment for Space Invaders, we will be using the Pygame library for Python. Pygame is a popular library for creating games in Python and provides functionality for handling input, drawing graphics, playing sounds, and more.</p>
<p>To install Pygame, you can use the following command:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">pip install pygame</span></span></code></pre>
<p>Once Pygame is installed, we can begin by importing the library and initializing it with the following code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This will initialize Pygame and allow us to use its functions and classes to create our game.</p>
<h2 id="drawing-game-elements-1">Drawing game elements</h2>
<p>To draw the game elements for Space Invaders, we will be using Pygame’s graphics module. Specifically, we will be using the <code>Surface</code> class to create a window for the game and the <code>draw</code> functions to create the game elements.</p>
<p>First, we will create a window for the game using the <code>pygame.display.set_mode()</code> function. We will pass in a tuple with the width and height of the window as arguments. We will also set the title of the window using the <code>pygame.display.set_caption()</code> function. Here is the code to create the game window:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span></span>
<span class="line"><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">window </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Space Invaders"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Next, we will create the game elements using the <code>pygame.draw</code> functions. We will create a rectangle for the player’s spaceship, rectangles for the alien ships, and circles for the lasers. Here is the code to draw the game elements:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Player's spaceship</span></span>
<span class="line"><span style="color: #ABB2BF">player_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">player_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">player_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> player_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">player_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> player_height </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(player_x, player_y, player_width, player_height)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), player)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Alien ships</span></span>
<span class="line"><span style="color: #ABB2BF">alien_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">40</span></span>
<span class="line"><span style="color: #ABB2BF">alien_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">40</span></span>
<span class="line"><span style="color: #ABB2BF">alien_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">alien_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">alien1 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(alien_x, alien_y, alien_width, alien_height)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), alien1)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">alien2 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(alien_x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> alien_width </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, alien_y, alien_width, alien_height)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), alien2)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Lasers</span></span>
<span class="line"><span style="color: #ABB2BF">laser_radius </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">laser_color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Note that we have created a <code>player</code> rectangle using the <code>pygame.Rect</code> class and drawn it using the <code>pygame.draw.rect()</code> function. We have also created two <code>alien</code> rectangles and drawn them using the same function. Finally, we have defined the radius and color of the lasers, but we will draw them later in the game loop.</p>
<h2 id="adding-game-logic-1">Adding game logic</h2>
<p>To add game logic to Space Invaders, we will use a game loop that will run continuously while the game is being played. In the game loop, we will handle user input, update the positions of game elements, and check for collisions between game elements.</p>
<p>Here is the code for the game loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Clear the window</span></span>
<span class="line"><span style="color: #ABB2BF">    window.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), player)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), alien1)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), alien2)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw lasers</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        laser_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> player.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> player_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        laser_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> player.y </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> laser_radius</span></span>
<span class="line"><span style="color: #ABB2BF">        laser </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(window, laser_color, (laser_x, laser_y), laser_radius)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> laser.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(alien1):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Hit!"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this code, we have added a loop that will run continuously until the user closes the game window. We have also added code to handle user input using the <code>pygame.key.get_pressed()</code> function. If the left or right arrow keys are pressed, the player’s position is updated accordingly. If the space bar is pressed, a laser is drawn above the player’s spaceship.</p>
<p>We have also added code to check for collisions between the laser and the alien ships using the <code>colliderect()</code> function. If the laser collides with an alien ship, a message is printed to the console.</p>
<p>Finally, we have updated the display using the <code>pygame.display.update()</code> function to show the changes made in the game loop.</p>
<h2 id="adding-sounds-and-music-1">Adding sounds and music</h2>
<p>To add sounds and music to Space Invaders, we will use Pygame’s <code>mixer</code> module. This module allows us to load and play sound effects and music in our game.</p>
<p>Here is the code to initialize the mixer and load the sound effects and music:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame.mixer </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> mixer</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">mixer.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">laser_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"laser.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">explosion_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"explosion.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">music </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> mixer.music.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"background_music.mp3"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">mixer.music.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In this code, we have initialized the mixer using the <code>mixer.init()</code> function. We have also loaded two sound effects, <code>laser.wav</code> and <code>explosion.wav</code>, using the <code>mixer.Sound()</code> function. Finally, we have loaded a background music file, <code>background_music.mp3</code>, using the <code>mixer.music.load()</code> function and started playing it using the <code>mixer.music.play()</code> function.</p>
<p>Next, we will add the sound effects and music to our game loop. Here is the modified game loop with the sound effects and music:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Clear the window</span></span>
<span class="line"><span style="color: #ABB2BF">    window.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), player)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), alien1)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), alien2)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw lasers</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        laser_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> player.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> player_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        laser_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> player.y </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> laser_radius</span></span>
<span class="line"><span style="color: #ABB2BF">        laser </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(window, laser_color, (laser_x, laser_y), laser_radius)</span></span>
<span class="line"><span style="color: #ABB2BF">        laser_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> laser.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(alien1):</span></span>
<span class="line"><span style="color: #ABB2BF">        explosion_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Hit!"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this modified code, we have added the <code>play()</code> method to the <code>laser_sound</code> and <code>explosion_sound</code> objects to play the sound effects when a laser is fired or an alien ship is hit. We have also modified the collision detection code to play the <code>explosion_sound</code> when an alien ship is hit.</p>
<p>With these modifications, our game now has sound effects and background music.</p>
<h2 id="adding-a-game-over-screen-1">Adding a game over screen</h2>
<p>To add a game over screen to Space Invaders, we will modify our game loop to end the game when the player loses all their lives. We will also add a game over screen that will display the player’s score and give them the option to play again or quit the game.</p>
<p>Here is the modified game loop with the game over screen:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">lives </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span></span>
<span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Clear the window</span></span>
<span class="line"><span style="color: #ABB2BF">    window.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), player)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), alien1)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), alien2)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw lasers</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        laser_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> player.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> player_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        laser_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> player.y </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> laser_radius</span></span>
<span class="line"><span style="color: #ABB2BF">        laser </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(window, laser_color, (laser_x, laser_y), laser_radius)</span></span>
<span class="line"><span style="color: #ABB2BF">        laser_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> laser.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(alien1):</span></span>
<span class="line"><span style="color: #ABB2BF">        explosion_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Hit!"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update lives and check for game over</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> alien1.y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> window_height:</span></span>
<span class="line"><span style="color: #ABB2BF">        lives </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> lives </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Game over</span></span>
<span class="line"><span style="color: #ABB2BF">            font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">48</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            play_again_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Press 'P' to play again or 'Q' to quit"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(window_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, window_height </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            score_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> score_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(window_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, window_height </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            play_again_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> play_again_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(window_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, window_height </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            window.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(game_over_text, game_over_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">            window.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, score_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">            window.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(play_again_text, play_again_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                        sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_p:</span></span>
<span class="line"><span style="color: #ABB2BF">                            </span><span style="color: #7F848E; font-style: italic"># Play again</span></span>
<span class="line"><span style="color: #ABB2BF">                            lives </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span></span>
<span class="line"><span style="color: #ABB2BF">                            score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">                            </span><span style="color: #C678DD; font-style: italic">break</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_q:</span></span>
<span class="line"><span style="color: #ABB2BF">                            </span><span style="color: #7F848E; font-style: italic"># Quit game</span></span>
<span class="line"><span style="color: #ABB2BF">                            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Reset game elements</span></span>
<span class="line"><span style="color: #ABB2BF">            alien1.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, window_width </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> alien_width)</span></span>
<span class="line"><span style="color: #ABB2BF">            alien1.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF">alien_height</span></span>
<span class="line"><span style="color: #ABB2BF">            alien2.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, window_width </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> alien_width)</span></span>
<span class="line"><span style="color: #ABB2BF">            alien2.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF">alien_height</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this modified code, we have added a <code>lives</code> and <code>score</code> variable to keep track of the player’s lives and score. We have also added code to</p>
<p>detect when the alien reaches the bottom of the screen, decrement the <code>lives</code> variable, and check if the game is over. If the game is over, we display a game over screen with the player’s score and give them the option to play again or quit the game.</p>
<p>The game over screen is created using the <code>pygame.font</code> module to render text on the screen. We create <code>pygame.Surface</code> objects for each line of text and blit them onto the game window at the appropriate positions.</p>
<p>After displaying the game over screen, we enter a new loop that waits for the player to press the ‘P’ or ‘Q’ key. If the player presses ‘P’, we reset the game elements and continue the game loop. If the player presses ‘Q’, we quit the game.</p>
<p>Overall, this code adds a nice finishing touch to the game by giving the player a sense of closure and the ability to try again if they want to improve their score.</p>
<p>Confirm.</p>
<h2 id="creating-game-objects-such-as-player-enemy-bullets">Creating game objects such as player, enemy, bullets</h2>
<p>In this section, we will create the game objects for the player, enemy, and bullets. These objects will be responsible for rendering themselves on the screen and updating their positions during gameplay.</p>
<p>Let’s start with the player object. We will create a new class called <code>Player</code> that inherits from <code>pygame.sprite.Sprite</code>. This will allow us to add the player object to a sprite group and easily update and render it along with other game objects.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">class Player(pygame.sprite.Sprite):</span></span>
<span class="line"><span style="color: #abb2bf">    def __init__(self, x, y):</span></span>
<span class="line"><span style="color: #abb2bf">        super().__init__()</span></span>
<span class="line"><span style="color: #abb2bf">        self.image = pygame.image.load("player.png").convert_alpha()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect = self.image.get_rect()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.x = x</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.y = y</span></span>
<span class="line"><span style="color: #abb2bf">        self.speed = 5</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def update(self, direction):</span></span>
<span class="line"><span style="color: #abb2bf">        if direction == "left":</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.x -= self.speed</span></span>
<span class="line"><span style="color: #abb2bf">        elif direction == "right":</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.x += self.speed</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">        if self.rect.left &#x3C; 0:</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.left = 0</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.rect.right > SCREEN_WIDTH:</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.right = SCREEN_WIDTH</span></span></code></pre>
<p>In the <code>__init__</code> method, we load the player image from a file and set its initial position. We also set the player’s speed to 5, which will be used to update its position later.</p>
<p>The <code>update</code> method takes a <code>direction</code> parameter, which will be either “left” or “right” depending on which arrow key the player has pressed. We then update the player’s position based on the direction and ensure that it does not move off the screen.</p>
<p>Next, let’s create the enemy object. We will create a new class called <code>Enemy</code> that also inherits from <code>pygame.sprite.Sprite</code>.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">class Enemy(pygame.sprite.Sprite):</span></span>
<span class="line"><span style="color: #abb2bf">    def __init__(self, x, y):</span></span>
<span class="line"><span style="color: #abb2bf">        super().__init__()</span></span>
<span class="line"><span style="color: #abb2bf">        self.image = pygame.image.load("enemy.png").convert_alpha()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect = self.image.get_rect()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.x = x</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.y = y</span></span>
<span class="line"><span style="color: #abb2bf">        self.speed = 2</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def update(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.y += self.speed</span></span></code></pre>
<p>In the <code>__init__</code> method, we load the enemy image from a file and set its initial position. We also set the enemy’s speed to 2, which will be used to update its position later.</p>
<p>The <code>update</code> method simply updates the enemy’s position by adding its speed to its y-coordinate. This will make the enemy move down the screen.</p>
<p>Finally, let’s create the bullet object. We will create a new class called <code>Bullet</code> that also inherits from <code>pygame.sprite.Sprite</code>.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">class Bullet(pygame.sprite.Sprite):</span></span>
<span class="line"><span style="color: #abb2bf">    def __init__(self, x, y):</span></span>
<span class="line"><span style="color: #abb2bf">        super().__init__()</span></span>
<span class="line"><span style="color: #abb2bf">        self.image = pygame.image.load("bullet.png").convert_alpha()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect = self.image.get_rect()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.x = x</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.y = y</span></span>
<span class="line"><span style="color: #abb2bf">        self.speed = 5</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def update(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.y -= self.speed</span></span></code></pre>
<p>In the <code>__init__</code> method, we load the bullet image from a file and set its initial position. We also set the bullet’s speed to 5, which will be used to update its position later.</p>
<p>The <code>update</code> method simply updates the bullet’s position by subtracting its speed from its y-coordinate. This will make the bullet move up the screen.</p>
<p>Now that we have created the game objects, we can add them to sprite groups and update and render them in the game loop.</p>
<p>Now that we have created the game objects, we can add them to sprite groups and update and render them in the game loop.</p>
<p>Let’s create sprite groups for the player, enemy, and bullet objects at the beginning of the game.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">player_group = pygame.sprite.Group()</span></span>
<span class="line"><span style="color: #abb2bf">player = Player(SCREEN_WIDTH // 2, SCREEN_HEIGHT - 50)</span></span>
<span class="line"><span style="color: #abb2bf">player_group.add(player)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">enemy_group = pygame.sprite.Group()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">bullet_group = pygame.sprite.Group()</span></span></code></pre>
<p>We create a new instance of the <code>Player</code> class and add it to the <code>player_group</code>. We also create empty sprite groups for the <code>enemy</code> and <code>bullet</code> objects.</p>
<p>In the game loop, we can update and render the game objects by iterating through each sprite group and calling the <code>update</code> and <code>draw</code> methods.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">while True:</span></span>
<span class="line"><span style="color: #abb2bf">    # Handle events</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">            sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf">        elif event.type == pygame.KEYDOWN:</span></span>
<span class="line"><span style="color: #abb2bf">            if event.key == pygame.K_LEFT:</span></span>
<span class="line"><span style="color: #abb2bf">                direction = "left"</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_RIGHT:</span></span>
<span class="line"><span style="color: #abb2bf">                direction = "right"</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_SPACE:</span></span>
<span class="line"><span style="color: #abb2bf">                bullet = Bullet(player.rect.centerx, player.rect.top)</span></span>
<span class="line"><span style="color: #abb2bf">                bullet_group.add(bullet)</span></span>
<span class="line"><span style="color: #abb2bf">                shoot_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Update game objects</span></span>
<span class="line"><span style="color: #abb2bf">    player.update(direction)</span></span>
<span class="line"><span style="color: #abb2bf">    enemy_group.update()</span></span>
<span class="line"><span style="color: #abb2bf">    bullet_group.update()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Check for collisions</span></span>
<span class="line"><span style="color: #abb2bf">    for bullet in bullet_group:</span></span>
<span class="line"><span style="color: #abb2bf">        enemies_hit = pygame.sprite.spritecollide(bullet, enemy_group, True)</span></span>
<span class="line"><span style="color: #abb2bf">        for enemy in enemies_hit:</span></span>
<span class="line"><span style="color: #abb2bf">            explosion_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf">            score += 10</span></span>
<span class="line"><span style="color: #abb2bf">            bullet_group.remove(bullet)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    enemies_hit = pygame.sprite.spritecollide(player, enemy_group, True)</span></span>
<span class="line"><span style="color: #abb2bf">    for enemy in enemies_hit:</span></span>
<span class="line"><span style="color: #abb2bf">        explosion_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf">        lives -= 1</span></span>
<span class="line"><span style="color: #abb2bf">        if lives == 0:</span></span>
<span class="line"><span style="color: #abb2bf">            game_over = True</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Draw game objects</span></span>
<span class="line"><span style="color: #abb2bf">    screen.blit(background, (0, 0))</span></span>
<span class="line"><span style="color: #abb2bf">    player_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    enemy_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    bullet_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    draw_text(screen, "Lives: " + str(lives), 20, 20)</span></span>
<span class="line"><span style="color: #abb2bf">    draw_text(screen, "Score: " + str(score), SCREEN_WIDTH - 120, 20)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    if game_over:</span></span>
<span class="line"><span style="color: #abb2bf">        draw_text(screen, "Game Over", SCREEN_WIDTH // 2, SCREEN_HEIGHT // 2)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    pygame.display.update()</span></span>
<span class="line"><span style="color: #abb2bf">    clock.tick(FPS)</span></span></code></pre>
<p>We first handle events and create bullets when the player presses the spacebar. We then update the player, enemy, and bullet objects.</p>
<p>We check for collisions between bullets and enemies, as well as collisions between the player and enemies. If a bullet hits an enemy, we remove the enemy from the <code>enemy_group</code>, play an explosion sound, and add 10 points to the player’s score. If an enemy hits the player, we remove the enemy from the <code>enemy_group</code>, play an explosion sound, and subtract one life from the player’s remaining lives. If the player runs out of lives, we set <code>game_over</code> to <code>True</code>.</p>
<p>We then draw the game objects on the screen, including the player, enemies, bullets, and the player’s remaining lives and score. If <code>game_over</code> is <code>True</code>, we display a “Game Over” message in the center of the screen.</p>
<p>Finally, we update the display and wait for the next frame.</p>
<h2 id="implementing-player-movement-and-shooting-controls">Implementing player movement and shooting controls</h2>
<p>To implement player movement and shooting controls, we will modify the event handling loop in the game loop. Specifically, we will listen for the arrow keys and spacebar and update the player object accordingly.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">while True:</span></span>
<span class="line"><span style="color: #abb2bf">    # Handle events</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">            sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf">        elif event.type == pygame.KEYDOWN:</span></span>
<span class="line"><span style="color: #abb2bf">            if event.key == pygame.K_LEFT:</span></span>
<span class="line"><span style="color: #abb2bf">                player.move_left()</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_RIGHT:</span></span>
<span class="line"><span style="color: #abb2bf">                player.move_right()</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_SPACE:</span></span>
<span class="line"><span style="color: #abb2bf">                bullet = Bullet(player.rect.centerx, player.rect.top)</span></span>
<span class="line"><span style="color: #abb2bf">                bullet_group.add(bullet)</span></span>
<span class="line"><span style="color: #abb2bf">                shoot_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Update game objects</span></span>
<span class="line"><span style="color: #abb2bf">    player_group.update()</span></span>
<span class="line"><span style="color: #abb2bf">    enemy_group.update()</span></span>
<span class="line"><span style="color: #abb2bf">    bullet_group.update()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Check for collisions</span></span>
<span class="line"><span style="color: #abb2bf">    for bullet in bullet_group:</span></span>
<span class="line"><span style="color: #abb2bf">        enemies_hit = pygame.sprite.spritecollide(bullet, enemy_group, True)</span></span>
<span class="line"><span style="color: #abb2bf">        for enemy in enemies_hit:</span></span>
<span class="line"><span style="color: #abb2bf">            explosion_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf">            score += 10</span></span>
<span class="line"><span style="color: #abb2bf">            bullet_group.remove(bullet)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    enemies_hit = pygame.sprite.spritecollide(player, enemy_group, True)</span></span>
<span class="line"><span style="color: #abb2bf">    for enemy in enemies_hit:</span></span>
<span class="line"><span style="color: #abb2bf">        explosion_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf">        lives -= 1</span></span>
<span class="line"><span style="color: #abb2bf">        if lives == 0:</span></span>
<span class="line"><span style="color: #abb2bf">            game_over = True</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Draw game objects</span></span>
<span class="line"><span style="color: #abb2bf">    screen.blit(background, (0, 0))</span></span>
<span class="line"><span style="color: #abb2bf">    player_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    enemy_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    bullet_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    draw_text(screen, "Lives: " + str(lives), 20, 20)</span></span>
<span class="line"><span style="color: #abb2bf">    draw_text(screen, "Score: " + str(score), SCREEN_WIDTH - 120, 20)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    if game_over:</span></span>
<span class="line"><span style="color: #abb2bf">        draw_text(screen, "Game Over", SCREEN_WIDTH // 2, SCREEN_HEIGHT // 2)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    pygame.display.update()</span></span>
<span class="line"><span style="color: #abb2bf">    clock.tick(FPS)</span></span></code></pre>
<p>We have modified the <code>KEYDOWN</code> event handling to call the <code>move_left()</code> and <code>move_right()</code> methods of the player object when the left and right arrow keys are pressed, respectively. We have also added code to create a new bullet object and add it to the bullet group when the spacebar is pressed.</p>
<p>In the player class, we can define the <code>move_left()</code> and <code>move_right()</code> methods to update the player’s position based on the arrow key pressed.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">class Player(pygame.sprite.Sprite):</span></span>
<span class="line"><span style="color: #abb2bf">    def __init__(self, x, y):</span></span>
<span class="line"><span style="color: #abb2bf">        super().__init__()</span></span>
<span class="line"><span style="color: #abb2bf">        self.image = pygame.image.load("player.png").convert_alpha()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect = self.image.get_rect(center=(x, y))</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def move_left(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.move_ip(-PLAYER_SPEED, 0)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def move_right(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.move_ip(PLAYER_SPEED, 0)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def update(self, direction):</span></span>
<span class="line"><span style="color: #abb2bf">        if direction == "left":</span></span>
<span class="line"><span style="color: #abb2bf">            self.move_left()</span></span>
<span class="line"><span style="color: #abb2bf">        elif direction == "right":</span></span>
<span class="line"><span style="color: #abb2bf">            self.move_right()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">        # Keep player within screen boundaries</span></span>
<span class="line"><span style="color: #abb2bf">        if self.rect.left &#x3C; 0:</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.left = 0</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.rect.right > SCREEN_WIDTH:</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.right = SCREEN_WIDTH</span></span></code></pre>
<p>The <code>move_left()</code> and <code>move_right()</code> methods update the player’s position by moving its rect object left or right by <code>PLAYER_SPEED</code> pixels. The <code>update()</code> method is called in the game loop to update the player’s position based on the arrow key pressed.</p>
<p>We also add code to keep the player within the boundaries of the screen. If the player’s rect object goes past the left or right edge of the screen, we move it back to the edge.</p>
<p>With these modifications, the player can now move left and right and shoot bullets with the spacebar.</p>
<p>Great! With these modifications, the player can now move left and right and shoot bullets with the spacebar. However, there are a few more things we can do to improve the game experience.</p>
<p>First, we can add a delay between bullet shots so the player can’t spam the spacebar. We can achieve this by adding a <code>last_shot_time</code> attribute to the player object and only allowing bullets to be shot if a certain amount of time has passed since the last shot.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">class Player(pygame.sprite.Sprite):</span></span>
<span class="line"><span style="color: #abb2bf">    def __init__(self, x, y):</span></span>
<span class="line"><span style="color: #abb2bf">        super().__init__()</span></span>
<span class="line"><span style="color: #abb2bf">        self.image = pygame.image.load("player.png").convert_alpha()</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect = self.image.get_rect(center=(x, y))</span></span>
<span class="line"><span style="color: #abb2bf">        self.last_shot_time = pygame.time.get_ticks()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def can_shoot(self):</span></span>
<span class="line"><span style="color: #abb2bf">        now = pygame.time.get_ticks()</span></span>
<span class="line"><span style="color: #abb2bf">        return now - self.last_shot_time > SHOOT_DELAY</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def shoot(self):</span></span>
<span class="line"><span style="color: #abb2bf">        bullet = Bullet(self.rect.centerx, self.rect.top)</span></span>
<span class="line"><span style="color: #abb2bf">        bullet_group.add(bullet)</span></span>
<span class="line"><span style="color: #abb2bf">        shoot_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf">        self.last_shot_time = pygame.time.get_ticks()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def move_left(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.move_ip(-PLAYER_SPEED, 0)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def move_right(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.rect.move_ip(PLAYER_SPEED, 0)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    def update(self, direction):</span></span>
<span class="line"><span style="color: #abb2bf">        if direction == "left":</span></span>
<span class="line"><span style="color: #abb2bf">            self.move_left()</span></span>
<span class="line"><span style="color: #abb2bf">        elif direction == "right":</span></span>
<span class="line"><span style="color: #abb2bf">            self.move_right()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">        # Keep player within screen boundaries</span></span>
<span class="line"><span style="color: #abb2bf">        if self.rect.left &#x3C; 0:</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.left = 0</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.rect.right > SCREEN_WIDTH:</span></span>
<span class="line"><span style="color: #abb2bf">            self.rect.right = SCREEN_WIDTH</span></span></code></pre>
<p>We have added a <code>last_shot_time</code> attribute to the player object and initialized it to the current time using <code>pygame.time.get_ticks()</code>. We have also defined a <code>can_shoot()</code> method that returns <code>True</code> if enough time has passed since the last shot and a <code>shoot()</code> method that creates a new bullet object and adds it to the bullet group. We also play the shoot sound effect and update the <code>last_shot_time</code> attribute when a bullet is shot.</p>
<p>In the game loop, we can call the <code>can_shoot()</code> method to check if the player can shoot and call the <code>shoot()</code> method if the spacebar is pressed.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">while True:</span></span>
<span class="line"><span style="color: #abb2bf">    # Handle events</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">            sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf">        elif event.type == pygame.KEYDOWN:</span></span>
<span class="line"><span style="color: #abb2bf">            if event.key == pygame.K_LEFT:</span></span>
<span class="line"><span style="color: #abb2bf">                player.update("left")</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_RIGHT:</span></span>
<span class="line"><span style="color: #abb2bf">                player.update("right")</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_SPACE and player.can_shoot():</span></span>
<span class="line"><span style="color: #abb2bf">                player.shoot()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Update game objects</span></span>
<span class="line"><span style="color: #abb2bf">    player_group.update()</span></span>
<span class="line"><span style="color: #abb2bf">    enemy_group.update()</span></span>
<span class="line"><span style="color: #abb2bf">    bullet_group.update()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Check for collisions</span></span>
<span class="line"><span style="color: #abb2bf">    for bullet in bullet_group:</span></span>
<span class="line"><span style="color: #abb2bf">        enemies_hit = pygame.sprite.spritecollide(bullet, enemy_group, True)</span></span>
<span class="line"><span style="color: #abb2bf">        for enemy in enemies_hit:</span></span>
<span class="line"><span style="color: #abb2bf">            explosion_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf">            score += 10</span></span>
<span class="line"><span style="color: #abb2bf">            bullet_group.remove(bullet)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    enemies_hit = pygame.sprite.spritecollide(player, enemy_group, True)</span></span>
<span class="line"><span style="color: #abb2bf">    for enemy in enemies_hit:</span></span>
<span class="line"><span style="color: #abb2bf">        explosion_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf">        lives -= 1</span></span>
<span class="line"><span style="color: #abb2bf">        if lives == 0:</span></span>
<span class="line"><span style="color: #abb2bf">            game_over = True</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Draw game objects</span></span>
<span class="line"><span style="color: #abb2bf">    screen.blit(background, (0, 0))</span></span>
<span class="line"><span style="color: #abb2bf">    player_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    enemy_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    bullet_group.draw(screen)</span></span>
<span class="line"><span style="color: #abb2bf">    draw_text(screen, "Lives: " + str(lives), 20, 20)</span></span>
<span class="line"><span style="color: #abb2bf">    draw_text(screen, "Score: " + str(score), SCREEN_WIDTH - 120, 20)</span></span></code></pre>
<h2 id="implementing-enemy-movement-and-shooting-behavior">Implementing enemy movement and shooting behavior</h2>
<p>Now that we have implemented player movement and shooting controls, let’s add some behavior for the enemies. We’ll start by making them move back and forth across the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Enemy</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"enemy.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic"># 1 = right, -1 = left</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_SPEED</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Reverse direction if the enemy hits a screen edge</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span></code></pre>
<p>We have added a <code>direction</code> attribute to the enemy object that determines its movement direction, initialized it to 1 (moving right), and defined an <code>update()</code> method that moves the enemy horizontally by <code>ENEMY_SPEED</code> pixels each frame. If the enemy hits the left or right screen edge, we reverse its direction by multiplying <code>direction</code> by -1.</p>
<p>Next, let’s add some shooting behavior for the enemies. We’ll make them shoot bullets randomly at the player.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Enemy</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"enemy.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic"># 1 = right, -1 = left</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.last_shot_time </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">can_shoot</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        now </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> now </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.last_shot_time </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_SHOOT_DELAY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">shoot</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        bullet </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Bullet</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom)</span></span>
<span class="line"><span style="color: #ABB2BF">        enemy_bullet_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(bullet)</span></span>
<span class="line"><span style="color: #ABB2BF">        enemy_shoot_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.last_shot_time </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_SPEED</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Reverse direction if the enemy hits a screen edge</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Randomly shoot bullets</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_SHOOT_CHANCE</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">can_shoot</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">shoot</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We have added a <code>last_shot_time</code> attribute to the enemy object and initialized it to the current time. We have also defined a <code>can_shoot()</code> method that returns <code>True</code> if enough time has passed since the last shot and a <code>shoot()</code> method that creates a new bullet object and adds it to the enemy bullet group. We also play the enemy shoot sound effect and update the <code>last_shot_time</code> attribute when a bullet is shot.</p>
<p>In the <code>update()</code> method, we randomly call the <code>shoot()</code> method with a probability of <code>ENEMY_SHOOT_CHANCE</code> (set to 0.01) each frame, as long as enough time has passed since the last shot.</p>
<p>In the game loop, we update the enemy bullet group and check for collisions between enemy bullets and the player.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                player.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"left"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                player.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"right"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> player.</span><span style="color: #61AFEF">can_shoot</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                player.</span><span style="color: #61AFEF">shoot</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    player_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    player_group.update</span></span>
<span class="line"><span style="color: #ABB2BF">    enemy_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    player_bullet_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    enemy_bullet_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    player_hit_list </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(player, enemy_bullet_group, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> bullet </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> player_hit_list:</span></span>
<span class="line"><span style="color: #ABB2BF">        player.health </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        player_hit_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> player.health </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    enemy_hit_list </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">groupcollide</span><span style="color: #ABB2BF">(enemy_group, player_bullet_group, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> enemy </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> enemy_hit_list:</span></span>
<span class="line"><span style="color: #ABB2BF">        score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        enemy_hit_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Spawn new enemies</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(enemy_group) </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MAX_ENEMIES</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_SPAWN_CHANCE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        enemy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Enemy</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">ENEMY_Y</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        enemy_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(enemy)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw screen</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    player_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    enemy_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    player_bullet_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    enemy_bullet_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Lives: </span><span style="color: #D19A66">{}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">format</span><span style="color: #ABB2BF">(player.health), font, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">format</span><span style="color: #ABB2BF">(score), font, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">110</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In the game loop, we call the <code>update()</code> method for the enemy, player bullet, and enemy bullet sprite groups. We then check for collisions between the player and enemy bullets, subtract 1 from the player’s health, play the player hit sound effect, and call the <code>game_over()</code> function if the player’s health reaches 0.</p>
<p>We also check for collisions between enemies and player bullets, add 10 to the score, and play the enemy hit sound effect for each enemy hit.</p>
<p>We then spawn new enemies randomly with a probability of <code>ENEMY_SPAWN_CHANCE</code> (set to 0.01) each frame, as long as there are less than <code>MAX_ENEMIES</code> (set to 5) on the screen.</p>
<p>Finally, we draw all the game objects to the screen, along with the player’s lives and score, and update the display with <code>pygame.display.update()</code>. We use <code>clock.tick(FPS)</code> to limit the frame rate to <code>FPS</code> (set to 60) frames per second.</p>
<h2 id="adding-different-types-of-enemies-with-varying-abilities-and-behavior">Adding different types of enemies with varying abilities and behavior</h2>
<p>To add different types of enemies with varying abilities and behavior, we can create a new class for each type of enemy that inherits from the <code>Enemy</code> class.</p>
<p>For example, let’s create a new <code>FastEnemy</code> class that moves faster than the standard <code>Enemy</code>, and a <code>ShooterEnemy</code> class that can shoot bullets at the player.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">FastEnemy</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Enemy</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(x, y)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">ShooterEnemy</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Enemy</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(x, y)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shoot_chance </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.02</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shoot_chance:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">shoot</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">shoot</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        bullet </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">EnemyBullet</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom)</span></span>
<span class="line"><span style="color: #ABB2BF">        enemy_bullet_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(bullet)</span></span></code></pre>
<p>The <code>FastEnemy</code> class simply overrides the <code>speed</code> attribute to make it move faster, while the <code>ShooterEnemy</code> class overrides the <code>update()</code> method to give it a chance to shoot bullets at the player, and adds a <code>shoot()</code> method to create a new <code>EnemyBullet</code> object.</p>
<p>We can then modify the game loop to spawn both types of enemies with a probability of 0.5% each, and add them to the enemy sprite group.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Spawn new enemies</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(enemy_group) </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MAX_ENEMIES</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_SPAWN_CHANCE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            enemy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">FastEnemy</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">ENEMY_Y</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            enemy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Enemy</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">ENEMY_Y</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        enemy_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(enemy)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(enemy_group) </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MAX_ENEMIES</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_SPAWN_CHANCE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            enemy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ShooterEnemy</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">ENEMY_Y</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            enemy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Enemy</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ENEMY_PADDING</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">ENEMY_Y</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        enemy_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(enemy)</span></span></code></pre>
<p>Now, the game will randomly spawn <code>FastEnemy</code>, <code>ShooterEnemy</code>, and <code>Enemy</code> objects, each with their own behavior and abilities. We can further expand on this by creating more types of enemies with different attributes and behavior.</p>
<h2 id="adding-power-ups-and-bonus-features-such-as-shields-and-weapons">Adding power-ups and bonus features such as shields and weapons</h2>
<p>To add power-ups and bonus features such as shields and weapons, we can create a new class for each type of power-up that inherits from the <code>pygame.sprite.Sprite</code> class.</p>
<p>For example, let’s create a new <code>Shield</code> class that adds a temporary shield around the player, and a <code>Weapon</code> class that upgrades the player’s bullet to a more powerful weapon.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Shield</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">POWERUP_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">POWERUP_SIZE</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.duration </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5000</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.timer </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.timer </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.duration:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Weapon</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">POWERUP_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">POWERUP_SIZE</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">apply</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">player</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        player.</span><span style="color: #61AFEF">upgrade_bullet</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>The <code>Shield</code> class creates a green square to represent the shield power-up, and sets a timer for its duration. The <code>update()</code> method checks if the shield has expired, and removes it from the sprite group if necessary.</p>
<p>The <code>Weapon</code> class creates a red square to represent the weapon power-up, and adds an <code>apply()</code> method that upgrades the player’s bullet.</p>
<p>We can then modify the game loop to spawn both types of power-ups with a probability of 0.1% each, and add them to the power-up sprite group.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Spawn new power-ups</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(powerup_group) </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">MAX_POWERUPS</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">POWERUP_SPAWN_CHANCE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            powerup </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Shield</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">POWERUP_PADDING</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">POWERUP_PADDING</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">POWERUP_Y</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            powerup </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Weapon</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">POWERUP_PADDING</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">POWERUP_PADDING</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">POWERUP_Y</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        powerup_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(powerup)</span></span></code></pre>
<p>Now, the game will randomly spawn <code>Shield</code> and <code>Weapon</code> objects, each with their own unique effects. We can further expand on this by creating more types of power-ups with different attributes and behavior.</p>
<h2 id="adding-scoring-functionality-and-high-score-tracking">Adding scoring functionality and high score tracking</h2>
<p>To add scoring functionality and high score tracking, we need to keep track of the player’s score and highest score in variables and update them as the player progresses through the game.</p>
<p>Let’s create a <code>score</code> and <code>high_score</code> variable at the beginning of the game, and update them each time the player destroys an enemy:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> bullet_enemy_collision:</span></span>
<span class="line"><span style="color: #ABB2BF">    bullet.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    enemy.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> enemy.points</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> high_score:</span></span>
<span class="line"><span style="color: #ABB2BF">        high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> score</span></span></code></pre>
<p>This code checks if a bullet has collided with an enemy, and if so, removes both objects from their respective groups and increments the <code>score</code> variable by the number of points that the enemy is worth. If the current score is higher than the <code>high_score</code>, the <code>high_score</code> is updated accordingly.</p>
<p>We can then display the current score and high score on the screen using a <code>pygame.font.Font</code> object:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">high_score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"High Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(high_score), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(high_score_text, (</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> high_score_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span></code></pre>
<p>This code creates a font object with a size of 36, and renders the <code>score</code> and <code>high_score</code> variables as text surfaces with a white color. The text surfaces are then blitted onto the screen surface at the appropriate positions.</p>
<p>Finally, we can save the <code>high_score</code> to a file after the game has ended, and load it at the beginning of the next game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># At the end of the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> player.lives </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"high_score.txt"</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">"w"</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> f:</span></span>
<span class="line"><span style="color: #ABB2BF">        f.</span><span style="color: #61AFEF">write</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(high_score))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># At the beginning of the game</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">try</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"high_score.txt"</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">"r"</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> f:</span></span>
<span class="line"><span style="color: #ABB2BF">        high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">int</span><span style="color: #ABB2BF">(f.</span><span style="color: #61AFEF">read</span><span style="color: #ABB2BF">())</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">except</span><span style="color: #ABB2BF"> FileNotFoundError:</span></span>
<span class="line"><span style="color: #ABB2BF">    high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span></code></pre>
<p>This code saves the <code>high_score</code> to a file named “high_score.txt” when the player has run out of lives, and loads it at the beginning of the next game. If the file does not exist (i.e. the game is being played for the first time), the <code>high_score</code> is initialized to 0.</p>
<h2 id="implementing-game-over-logic-and-resetting-the-game-1">Implementing game over logic and resetting the game</h2>
<p>To implement the game over logic and reset the game, we need to check if the player has run out of lives and display a “Game Over” message on the screen. We can then wait for the player to press the “R” key to reset the game and start over.</p>
<p>Let’s add a <code>game_over</code> variable at the beginning of the game loop to keep track of whether the game is over:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>We can then modify the game loop to check if the player has run out of lives, and set <code>game_over</code> to True if so:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> player.lives </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span></code></pre>
<p>We can then display a “Game Over” message on the screen if <code>game_over</code> is True:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(game_over_text, ((</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">()) </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span></code></pre>
<p>This code creates a text surface with the message “Game Over” in red color, and blits it onto the screen at the center.</p>
<p>Finally, we can wait for the player to press the “R” key to reset the game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    reset_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Press 'R' to reset"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(reset_text, ((</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> reset_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">()) </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">()))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_r:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Reset game</span></span>
<span class="line"><span style="color: #ABB2BF">                game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                player.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> enemy </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> enemy_group:</span></span>
<span class="line"><span style="color: #ABB2BF">                    enemy.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> bullet </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> bullet_group:</span></span>
<span class="line"><span style="color: #ABB2BF">                    bullet.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span></code></pre>
<p>This code creates a text surface with the message “Press ‘R’ to reset” in white color, and blits it onto the screen below the “Game Over” message. It then waits for the player to press the “R” key, and resets the game by setting <code>game_over</code> to False, resetting the player object, and killing all enemy and bullet objects. The <code>score</code> variable is also reset to 0.</p>
<p>With these modifications, the game will now end when the player runs out of lives, display a “Game Over” message, and wait for the player to press the “R” key to start over.</p>
<h2 id="adding-difficulty-levels-and-game-variations-1">Adding difficulty levels and game variations</h2>
<p>To add difficulty levels and game variations, we can modify the game settings such as enemy speed, bullet speed, player speed, etc. based on the chosen difficulty level. We can also add different types of enemies, power-ups, and other game variations based on the chosen game mode.</p>
<p>Let’s start by creating a <code>GameSettings</code> class to store the game settings:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">GameSettings</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Player settings</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Bullet settings</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bullet_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">7</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Enemy settings</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.enemy_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.enemy_spawn_delay </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1000</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Power-up settings</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.powerup_spawn_delay </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5000</span></span></code></pre>
<p>This class stores the game settings such as player speed, bullet speed, enemy speed, enemy spawn delay, and power-up spawn delay. We can create different instances of this class for different difficulty levels and game modes.</p>
<p>Next, let’s modify the game loop to use these game settings:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># At the beginning of the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">settings </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">GameSettings</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Player</span><span style="color: #ABB2BF">(settings.player_speed)</span></span></code></pre>
<p>We can then use these game settings to modify the game behavior. For example, we can modify the enemy spawn delay based on the chosen difficulty level:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> difficulty </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"easy"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    settings.enemy_spawn_delay </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2000</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> difficulty </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"medium"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    settings.enemy_spawn_delay </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1000</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> difficulty </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"hard"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    settings.enemy_spawn_delay </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">500</span></span></code></pre>
<p>We can also modify the enemy speed based on the chosen difficulty level:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> difficulty </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"easy"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    settings.enemy_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> difficulty </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"medium"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    settings.enemy_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> difficulty </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"hard"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    settings.enemy_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span></span></code></pre>
<p>We can create different types of enemies and power-ups based on the chosen game mode. For example, we can create a “boss mode” that spawns a single boss enemy with a large health pool:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_mode </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"boss"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    enemy_group.</span><span style="color: #61AFEF">empty</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    boss </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Boss</span><span style="color: #ABB2BF">(settings.enemy_speed)</span></span>
<span class="line"><span style="color: #ABB2BF">    enemy_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(boss)</span></span></code></pre>
<p>We can also add power-ups such as shields and weapons that modify the player’s abilities:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># In the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_mode </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"powerup"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, settings.powerup_spawn_delay) </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        powerup </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Powerup</span><span style="color: #ABB2BF">(settings.bullet_speed)</span></span>
<span class="line"><span style="color: #ABB2BF">        powerup_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(powerup)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># In the player update method</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">screen_width</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for power-up collision</span></span>
<span class="line"><span style="color: #ABB2BF">    powerup_collisions </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">, powerup_group, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> powerup </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> powerup_collisions:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> powerup.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"shield"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shield </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> powerup.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"weapon"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.weapon_level </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span></code></pre>
<p>This code creates a <code>Powerup</code> class that spawns power-ups with different types (shield or weapon), and checks for collisions between the player and the power-ups. If the player collides with a shield power-up, their shield count is increased by 1. If the player collides with a weapon power-up, their weapon level is increased by 1.</p>
<p>With these modifications, we can create different game variations and difficulty levels based on the chosen settings.</p>
<p>For example, we can create a game variation where the enemies move faster and shoot more frequently, but also offer more points when defeated. We can also create a variation where the player has fewer lives but can collect power-ups more frequently.</p>
<p>To implement these variations, we can add more options to the settings menu and adjust the game logic accordingly. For example, we can modify the <code>Enemy</code> class to have different movement and shooting patterns based on the difficulty level. We can also adjust the point values of each enemy type and power-up based on the chosen game variation.</p>
<p>In addition, we can implement a high score tracking system that saves the player’s highest score across all game variations and difficulty levels. We can use a text file to store the high scores and update it whenever a new high score is achieved.</p>
<p>With these features in place, players can enjoy a more customized and challenging gaming experience.</p>
<h2 id="improving-graphics-with-sprites-and-animations-1">Improving graphics with sprites and animations</h2>
<p>To improve the graphics of the game, we can use sprites and animations. A sprite is a 2D image or animation that can be manipulated and moved independently of the background. In Pygame, we can use the <code>pygame.sprite.Sprite</code> class to create custom sprites.</p>
<p>For example, we can create a sprite for the player’s ship and animate it to move smoothly across the screen. We can also create sprites for the enemies and their projectiles, and animate them to move and shoot in more interesting patterns.</p>
<p>To create animations in Pygame, we can use sprite sheets, which are large images that contain multiple frames of an animation. We can use the <code>pygame.image.load()</code> function to load a sprite sheet and the <code>pygame.Surface.subsurface()</code> method to extract individual frames.</p>
<p>Once we have extracted the frames, we can use the <code>pygame.sprite.Sprite.add()</code> method to add them to a sprite group and animate them using the <code>pygame.sprite.Group.draw()</code> method. We can also use the <code>pygame.sprite.Sprite.kill()</code> method to remove sprites from the group when they are no longer needed.</p>
<p>By using sprites and animations, we can create a more dynamic and visually appealing game.</p>
<h2 id="using-pygames-collision-detection-to-handle-bullet-enemy-and-enemy-player-collisions">Using Pygame’s collision detection to handle bullet-enemy and enemy-player collisions</h2>
<p>Pygame provides a built-in collision detection system that allows us to detect when two sprites overlap. To use the collision detection system, we first need to add the sprites we want to check for collisions to a sprite group. We can then use the <code>pygame.sprite.spritecollide()</code> method to detect collisions between two sprite groups.</p>
<p>To handle bullet-enemy collisions, we can create a new sprite group for the bullets and use <code>spritecollide()</code> to check for collisions between the bullets and the enemies. When a collision is detected, we can remove the bullet and the enemy from their respective sprite groups and update the player’s score.</p>
<p>To handle enemy-player collisions, we can use <code>spritecollide()</code> to check for collisions between the player’s ship and the enemies. When a collision is detected, we can remove the player’s ship and decrease their number of lives. If the player has no lives left, we can end the game and display the game over screen.</p>
<p>To make the collisions more realistic and visually appealing, we can use sprite animations to show explosions or other effects when a collision occurs. This will add another layer of depth to the game and make it more engaging for the player.</p>
<p>Overall, Pygame’s collision detection system provides a powerful tool for handling collisions in our game and allows us to create more complex and challenging gameplay mechanics.</p>
<h2 id="adding-a-background-and-parallax-scrolling-effect">Adding a background and parallax scrolling effect</h2>
<p>To add a background to our game, we can create a new sprite that covers the entire screen and add it to the sprite group. We can then update and render the background sprite along with the other game objects in the game loop.</p>
<p>To create a parallax scrolling effect, we can create multiple background layers that move at different speeds. The background layer closest to the player should move the slowest, while the layer furthest away should move the fastest. This creates an illusion of depth and adds a sense of motion to the game.</p>
<p>To implement parallax scrolling, we can add multiple background sprites to the sprite group and update their positions based on the player’s movement. We can also use the <code>pygame.display.set_caption()</code> method to update the game window’s title to show the player’s current score and level.</p>
<p>By adding a background and parallax scrolling effect, we can create a more immersive game environment and make the game more visually appealing.</p>
<h2 id="adding-visual-and-audio-effects-for-explosions-and-other-events">Adding visual and audio effects for explosions and other events</h2>
<p>Adding visual and audio effects to our game can make it more engaging and exciting for the player. One way to do this is by adding explosion animations and sound effects when an enemy is destroyed or a collision occurs.</p>
<p>To add explosion animations, we can create a new sprite sheet that contains different frames of the explosion animation. We can then load the sprite sheet into our game and use it to create a new sprite for each explosion. We can update the position of the explosion sprite to match the position of the enemy that was destroyed or the player’s ship when a collision occurs. We can also use Pygame’s built-in timer functionality to control the speed of the explosion animation.</p>
<p>To add sound effects, we can use Pygame’s mixer module to load and play different sound files. We can create new sound effects for different events in the game, such as the player shooting a bullet or an enemy being destroyed. We can also adjust the volume and pitch of the sound effects to create a more dynamic and immersive experience.</p>
<p>By adding visual and audio effects to our game, we can create a more engaging and immersive experience for the player, and make the game more exciting and memorable.</p>
<h2 id="optimizing-and-improving-game-performance-1">Optimizing and improving game performance</h2>
<p>Optimizing and improving game performance is important for providing a smooth and seamless experience for the player. Here are some strategies for improving game performance:</p>
<ol>
<li>
<p>Use sprites and sprite groups - By using sprites and sprite groups, we can reduce the number of objects that need to be updated and rendered in each game loop iteration.</p>
</li>
<li>
<p>Use Pygame’s built-in functions and modules - Pygame has many built-in functions and modules that can simplify complex operations and improve game performance.</p>
</li>
<li>
<p>Reduce the number of images and sounds loaded into memory - Loading large numbers of images and sounds into memory can slow down the game and cause performance issues. We can reduce the number of images and sounds by using smaller file sizes and reusing existing assets wherever possible.</p>
</li>
<li>
<p>Optimize collision detection - Collision detection can be a computationally expensive process, especially when there are many objects on the screen. We can optimize collision detection by using more efficient algorithms, such as spatial partitioning, to reduce the number of collision checks required.</p>
</li>
<li>
<p>Use hardware acceleration - Pygame supports hardware acceleration through the use of graphics libraries like OpenGL. By utilizing hardware acceleration, we can offload some of the processing work to the GPU, which can improve game performance.</p>
</li>
</ol>
<p>By implementing these strategies, we can optimize and improve game performance, providing a smooth and enjoyable experience for the player.</p>
<h1 id="chapter-5-building-a-snake-game">Chapter 5: Building a Snake Game</h1>
<h2 id="overview-of-snake-game">Overview of Snake game</h2>
<p>The Snake game is a classic video game where the player controls a snake that moves around a game board. The objective of the game is to eat food that appears randomly on the game board while avoiding collision with the snake’s own body and the edges of the game board.</p>
<p>The game board is typically a rectangular grid, and the snake starts with a length of one. As the snake eats food, it grows in length, and the game becomes more challenging as the snake becomes longer and harder to maneuver.</p>
<p>The game usually ends when the snake collides with itself or the edges of the game board. The player’s score is determined by the number of food items eaten by the snake. The game may also include power-ups or other bonuses that can help the player or add to the challenge.</p>
<p>Snake has been adapted to many different platforms and has become a popular game for mobile devices. The game’s simple mechanics and addictive gameplay have made it a timeless classic in the world of video games.</p>
<h2 id="setting-up-the-game-environment-2">Setting up the game environment</h2>
<p>To set up the game environment for Snake, we will be using the Pygame library. Pygame is a cross-platform set of Python modules designed for writing video games.</p>
<p>First, we need to install Pygame. We can do this by opening a terminal window and running the following command:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">pip install pygame</span></span></code></pre>
<p>Once Pygame is installed, we can create a new Python file for our Snake game.</p>
<p>We will start by importing the necessary modules:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span></code></pre>
<p>Next, we will define some constants for our game. These constants will be used to set the dimensions of the game board and the size of the snake and food.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Window dimensions</span></span>
<span class="line"><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">640</span></span>
<span class="line"><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">480</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Snake dimensions</span></span>
<span class="line"><span style="color: #D19A66">SNAKE_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Food dimensions</span></span>
<span class="line"><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span></code></pre>
<p>We will also define some colors that we will use in our game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Colors</span></span>
<span class="line"><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">RED</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">BLUE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Finally, we will initialize Pygame and create a new window for our game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Snake Game"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>With these initial setup steps complete, we have created a window for our Snake game and defined some constants and colors that we will use throughout the game.</p>
<h2 id="drawing-game-elements-2">Drawing game elements</h2>
<p>Now that we have set up the game environment for our Snake game, we can start drawing the game elements.</p>
<p>First, we will create a Snake class to represent the snake. The Snake class will have a list of body segments, where each segment is a tuple of (x, y) coordinates. We will also keep track of the direction that the snake is moving in, using a constant for each direction.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Snake</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [(</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span></span></code></pre>
<p>Next, we will define a function to draw the snake on the game board. We will loop through each body segment of the snake and draw a rectangle for each segment.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_snake</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">snake</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> segment </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> snake.body:</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(screen, </span><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF">, (segment[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">], segment[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">], </span><span style="color: #D19A66">SNAKE_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SNAKE_SIZE</span><span style="color: #ABB2BF">))</span></span></code></pre>
<p>We will also define a Food class to represent the food that the snake will eat. The Food class will have a position on the game board, represented by a tuple of (x, y) coordinates.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Food</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.position </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF">), random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF">))</span></span></code></pre>
<p>Next, we will define a function to draw the food on the game board. We will draw a rectangle at the position of the food.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_food</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">food</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(screen, </span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">, (food.position[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">], food.position[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">], </span><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF">))</span></span></code></pre>
<p>Finally, we will define a function to update the game board. This function will call the draw_snake() and draw_food() functions to draw the snake and food on the game board.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update_game</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">snake</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">food</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_snake</span><span style="color: #ABB2BF">(snake)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_food</span><span style="color: #ABB2BF">(food)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>With these functions in place, we can now draw the game elements on the screen. We will create instances of the Snake and Food classes, and call the update_game() function to draw the game board.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">snake </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Snake</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">food </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #61AFEF">update_game</span><span style="color: #ABB2BF">(snake, food)</span></span></code></pre>
<p>When we run the game, we should see a green rectangle for the snake and a red rectangle for the food on the game board.</p>
<h2 id="adding-game-logic-2">Adding game logic</h2>
<p>In the previous section, we have drawn the snake and the food on the screen. Now, we need to add the game logic to make the snake move and grow when it eats the food. We also need to detect when the snake collides with the wall or its own body and end the game.</p>
<p>First, let’s define some variables to keep track of the snake’s position and direction, the food’s position, the score, and whether the game is over or not:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Snake position and direction</span></span>
<span class="line"><span style="color: #ABB2BF">snake_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">snake_dir </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Food position</span></span>
<span class="line"><span style="color: #ABB2BF">food_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Score and game over</span></span>
<span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>We start the snake at the center of the screen with a direction of up. The food position and score are initialized to zero, and the game is not over yet.</p>
<p>Next, we need to update the snake’s position based on its direction. We can do this by adding the direction vector to the snake’s head position and removing the tail to make it move forward. If the snake eats the food, we add a new head in the direction of the previous head to make it grow.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Update snake position</span></span>
<span class="line"><span style="color: #ABB2BF">new_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (snake_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">][</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> snake_dir[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">], snake_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">][</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> snake_dir[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">snake_pos.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, new_pos)</span></span>
<span class="line"><span style="color: #ABB2BF">snake_pos.</span><span style="color: #61AFEF">pop</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Check if snake eats food</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> food_pos:</span></span>
<span class="line"><span style="color: #ABB2BF">    food_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CELL_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CELL_SIZE</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CELL_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CELL_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">    snake_pos.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(snake_pos[</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Check if snake hits wall or itself</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">][</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> snake_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">][</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> \</span></span>
<span class="line"><span style="color: #ABB2BF">   snake_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">][</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> snake_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">][</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> \</span></span>
<span class="line"><span style="color: #ABB2BF">   </span><span style="color: #56B6C2">any</span><span style="color: #ABB2BF">(p </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> snake_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> p </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> snake_pos[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:]):</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span></code></pre>
<p>We use the <code>insert</code> and <code>pop</code> methods of the <code>snake_pos</code> list to update the snake’s position. The <code>insert</code> method adds a new head at the beginning of the list, and the <code>pop</code> method removes the last element, which is the tail. If the snake’s head collides with the food, we generate a new food at a random position and increase the score by one. We also add a new tail to the snake by appending the last position to the end of the list.</p>
<p>Finally, we check if the snake hits the wall or itself by comparing the head position with the screen boundaries and the rest of the body positions.</p>
<p>Now that we have the game logic, we can update the game loop to use it:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update snake position and check collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">update_snake</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BG_COLOR</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_snake</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>We call the <code>update_snake</code> function to update the snake’s position and check collisions. Then, we draw the snake, food, and score on the screen and update the display. Finally, we limit the frame rate to avoid running the loop too fast.</p>
<p>In the game loop, we also handle user input by checking for events such as pressing the arrow keys to change the direction of the snake.</p>
<p>Now that we have the basic game loop set up, we can start implementing the game logic. First, we need to create the snake object and initialize it with an initial length and position. We can do this by creating a list of snake segments, where each segment is a tuple representing its position on the game grid.</p>
<p>We also need to create the food object, which will be randomly placed on the game grid and will increase the length of the snake when eaten. To handle collisions between the snake and the food, we can check if the head of the snake has the same position as the food.</p>
<p>Next, we need to implement the movement of the snake. We can do this by updating the position of each snake segment based on the direction of the snake. We also need to handle collisions between the snake and the walls of the game grid. If the snake hits a wall, the game is over.</p>
<p>Finally, we need to implement the scoring system and game over logic. We can keep track of the score by counting the number of food items eaten. When the game is over, we can display the final score and prompt the user to restart the game.</p>
<p>With these basic game mechanics in place, we can start adding more features such as adding obstacles, power-ups, and different game modes.</p>
<h2 id="adding-sounds-and-music-2">Adding sounds and music</h2>
<p>Adding sounds and music to the Snake game can enhance the player’s experience and make the game more engaging. Pygame provides a module for handling audio, and we can use it to add sound effects for eating food, game over, and other events.</p>
<p>To add sound effects, we first need to load the audio files using the <code>pygame.mixer.Sound()</code> function. We can load multiple sound files and store them in a dictionary for easy access. For example, we can load the sound file for eating food and store it as follows:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">sounds = {}</span></span>
<span class="line"><span style="color: #abb2bf">sounds['eat'] = pygame.mixer.Sound('eat.wav')</span></span></code></pre>
<p>Once we have loaded the sound files, we can play them at the appropriate events. For example, when the snake eats a food item, we can play the “eat” sound as follows:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">if snake.head == food:</span></span>
<span class="line"><span style="color: #abb2bf">    snake.grow()</span></span>
<span class="line"><span style="color: #abb2bf">    food = create_food(snake)</span></span>
<span class="line"><span style="color: #abb2bf">    sounds['eat'].play()</span></span></code></pre>
<p>Similarly, we can play a game over sound when the game is over:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">if game_over:</span></span>
<span class="line"><span style="color: #abb2bf">    sounds['game_over'].play()</span></span></code></pre>
<p>To add background music, we can use the <code>pygame.mixer.music</code> module. We can load a music file using the <code>pygame.mixer.music.load()</code> function and start playing it using the <code>pygame.mixer.music.play()</code> function. For example:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">pygame.mixer.music.load('background_music.mp3')</span></span>
<span class="line"><span style="color: #abb2bf">pygame.mixer.music.play(-1)  # play the music on loop</span></span></code></pre>
<p>We can also add different tracks for different game modes or levels and switch between them as needed.</p>
<p>Adding sounds and music can greatly improve the overall experience of the game, and with Pygame, it is easy to do so.</p>
<h2 id="adding-a-game-over-screen-2">Adding a game over screen</h2>
<p>To add a game over screen, we first need to detect when the game is over. In the Snake game, the game is over when the snake collides with the walls or with its own body. We can detect this by checking if the snake’s head position is outside the game window or if it collides with any of its body segments.</p>
<p>We can add a game over screen by creating a new function that displays the game over message and the player’s score. We can also provide an option to restart the game by pressing a key.</p>
<p>Here’s an example of how we can implement the game over screen in our main game loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">def game_loop():</span></span>
<span class="line"><span style="color: #abb2bf">    # Set up game objects and variables</span></span>
<span class="line"><span style="color: #abb2bf">    </span></span>
<span class="line"><span style="color: #abb2bf">    while True:</span></span>
<span class="line"><span style="color: #abb2bf">        # Handle events</span></span>
<span class="line"><span style="color: #abb2bf">        </span></span>
<span class="line"><span style="color: #abb2bf">        # Move snake and update game state</span></span>
<span class="line"><span style="color: #abb2bf">        if game_state == "playing":</span></span>
<span class="line"><span style="color: #abb2bf">            # Move snake and check for collisions</span></span>
<span class="line"><span style="color: #abb2bf">            # ...</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">            # Check for game over</span></span>
<span class="line"><span style="color: #abb2bf">            if game_over:</span></span>
<span class="line"><span style="color: #abb2bf">                game_state = "game_over"</span></span>
<span class="line"><span style="color: #abb2bf">                game_over_screen(score)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">        # Update screen and limit frame rate</span></span>
<span class="line"><span style="color: #abb2bf">        # ...</span></span></code></pre>
<p>And here’s an example implementation of the <code>game_over_screen</code> function:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">def game_over_screen(score):</span></span>
<span class="line"><span style="color: #abb2bf">    # Draw game over message and player's score</span></span>
<span class="line"><span style="color: #abb2bf">    font = pygame.font.Font(None, 64)</span></span>
<span class="line"><span style="color: #abb2bf">    game_over_text = font.render("Game Over", True, (255, 0, 0))</span></span>
<span class="line"><span style="color: #abb2bf">    score_text = font.render("Score: {}".format(score), True, (255, 255, 255))</span></span>
<span class="line"><span style="color: #abb2bf">    game_over_rect = game_over_text.get_rect(center=(WINDOW_WIDTH/2, WINDOW_HEIGHT/2 - 50))</span></span>
<span class="line"><span style="color: #abb2bf">    score_rect = score_text.get_rect(center=(WINDOW_WIDTH/2, WINDOW_HEIGHT/2 + 50))</span></span>
<span class="line"><span style="color: #abb2bf">    screen.blit(game_over_text, game_over_rect)</span></span>
<span class="line"><span style="color: #abb2bf">    screen.blit(score_text, score_rect)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Draw restart message</span></span>
<span class="line"><span style="color: #abb2bf">    font = pygame.font.Font(None, 32)</span></span>
<span class="line"><span style="color: #abb2bf">    restart_text = font.render("Press any key to restart", True, (255, 255, 255))</span></span>
<span class="line"><span style="color: #abb2bf">    restart_rect = restart_text.get_rect(center=(WINDOW_WIDTH/2, WINDOW_HEIGHT/2 + 100))</span></span>
<span class="line"><span style="color: #abb2bf">    screen.blit(restart_text, restart_rect)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    pygame.display.update()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Wait for key press to restart game</span></span>
<span class="line"><span style="color: #abb2bf">    while True:</span></span>
<span class="line"><span style="color: #abb2bf">        for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">            if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">                pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">                sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.type == pygame.KEYDOWN:</span></span>
<span class="line"><span style="color: #abb2bf">                game_loop()</span></span></code></pre>
<p>This function displays the game over message and the player’s score, as well as a message to press any key to restart the game. The function then waits for a key press event and restarts the game loop when a key is pressed.</p>
<h2 id="creating-game-objects-such-as-snake-and-food">Creating game objects such as snake and food</h2>
<p>To create the Snake game, we need to create two main game objects: the snake and the food. We will use Pygame sprites to represent these game objects.</p>
<p>First, let’s create a Snake class that inherits from the Pygame Sprite class. In the constructor, we will set the initial position of the snake and its velocity. We will also create a list to store the body of the snake, which will initially consist of a single segment.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Snake</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">SNAKE_BLOCK_SIZE</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect]</span></span></code></pre>
<p>Next, let’s create a Food class that also inherits from the Pygame Sprite class. In the constructor, we will set the initial position of the food to a random location on the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Food</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SNAKE_BLOCK_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SNAKE_BLOCK_SIZE</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>We can now create instances of these classes in the game loop and add them to sprite groups to be updated and rendered in the game. We will also need to handle collision detection between the snake and the food.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">snake </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Snake</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">food </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(snake)</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(food)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">food_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">food_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(food)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collision between snake and food</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(snake, food_group, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Increase the length of the snake and spawn a new food</span></span>
<span class="line"><span style="color: #ABB2BF">        new_segment </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> snake.body[</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">copy</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        snake.body.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(new_segment)</span></span>
<span class="line"><span style="color: #ABB2BF">        all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(new_segment)</span></span>
<span class="line"><span style="color: #ABB2BF">        food </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        food_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(food)</span></span>
<span class="line"><span style="color: #ABB2BF">        all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(food)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit the frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>With these game objects and collision detection, we have the basic mechanics of the Snake game.</p>
<h2 id="implementing-snake-movement-and-collision-detection">Implementing snake movement and collision detection</h2>
<p>To implement snake movement and collision detection, we need to define the Snake class and the Food class.</p>
<p>The Snake class represents the snake object, which consists of a list of body parts. Each body part is a rectangle object that is drawn on the screen. The Snake class has methods to move the snake and check for collisions with the food and the walls.</p>
<p>The Food class represents the food object, which is a rectangle object that is randomly placed on the screen. When the snake collides with the food, the food is removed, and a new one is created at a random location.</p>
<p>Here is the code to define the Snake and Food classes:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define colors</span></span>
<span class="line"><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">RED</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define screen dimensions</span></span>
<span class="line"><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span></span>
<span class="line"><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define block size</span></span>
<span class="line"><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Snake</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Initialize the snake with three body parts</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">                     pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">140</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">                     pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">130</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the body parts of the snake</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body) </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[i].x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[i </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].x</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[i].y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[i </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the head of the snake in the direction of the arrow keys</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"UP"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"DOWN"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"LEFT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">food</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check if the snake collides with the food</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(food):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_wall_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check if the snake collides with the walls</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Food</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create a rectangle for the food</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">respawn</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the food to a random location</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span></code></pre>
<p>We initialize the Snake class with three body parts and a direction of “RIGHT”. The move() method moves the body parts of the snake and</p>
<p>changes its direction based on user input.</p>
<p>Next, we need to check for collisions between the snake and the food. We do this in the update() method of the Snake class. If the head of the snake collides with the food, we add a new body part to the snake and move the food to a new random location. We also play a sound effect to indicate that the snake has eaten the food.</p>
<p>Here is the updated code for the Snake class:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">class Snake:</span></span>
<span class="line"><span style="color: #abb2bf">    def __init__(self, x, y):</span></span>
<span class="line"><span style="color: #abb2bf">        self.body = [(x, y), (x-10, y), (x-20, y)]</span></span>
<span class="line"><span style="color: #abb2bf">        self.direction = "RIGHT"</span></span>
<span class="line"><span style="color: #abb2bf">        </span></span>
<span class="line"><span style="color: #abb2bf">    def move(self):</span></span>
<span class="line"><span style="color: #abb2bf">        head = self.body[0]</span></span>
<span class="line"><span style="color: #abb2bf">        x, y = head</span></span>
<span class="line"><span style="color: #abb2bf">        if self.direction == "RIGHT":</span></span>
<span class="line"><span style="color: #abb2bf">            x += 10</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.direction == "LEFT":</span></span>
<span class="line"><span style="color: #abb2bf">            x -= 10</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.direction == "UP":</span></span>
<span class="line"><span style="color: #abb2bf">            y -= 10</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.direction == "DOWN":</span></span>
<span class="line"><span style="color: #abb2bf">            y += 10</span></span>
<span class="line"><span style="color: #abb2bf">            </span></span>
<span class="line"><span style="color: #abb2bf">        self.body.pop()</span></span>
<span class="line"><span style="color: #abb2bf">        self.body.insert(0, (x, y))</span></span>
<span class="line"><span style="color: #abb2bf">        </span></span>
<span class="line"><span style="color: #abb2bf">    def grow(self):</span></span>
<span class="line"><span style="color: #abb2bf">        tail = self.body[-1]</span></span>
<span class="line"><span style="color: #abb2bf">        x, y = tail</span></span>
<span class="line"><span style="color: #abb2bf">        if self.direction == "RIGHT":</span></span>
<span class="line"><span style="color: #abb2bf">            x -= 10</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.direction == "LEFT":</span></span>
<span class="line"><span style="color: #abb2bf">            x += 10</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.direction == "UP":</span></span>
<span class="line"><span style="color: #abb2bf">            y += 10</span></span>
<span class="line"><span style="color: #abb2bf">        elif self.direction == "DOWN":</span></span>
<span class="line"><span style="color: #abb2bf">            y -= 10</span></span>
<span class="line"><span style="color: #abb2bf">            </span></span>
<span class="line"><span style="color: #abb2bf">        self.body.append((x, y))</span></span>
<span class="line"><span style="color: #abb2bf">        </span></span>
<span class="line"><span style="color: #abb2bf">    def update(self, food):</span></span>
<span class="line"><span style="color: #abb2bf">        head = self.body[0]</span></span>
<span class="line"><span style="color: #abb2bf">        if head == food:</span></span>
<span class="line"><span style="color: #abb2bf">            self.grow()</span></span>
<span class="line"><span style="color: #abb2bf">            food.move()</span></span>
<span class="line"><span style="color: #abb2bf">            eat_sound.play()</span></span>
<span class="line"><span style="color: #abb2bf">            </span></span>
<span class="line"><span style="color: #abb2bf">        self.move()</span></span></code></pre>
<p>We also need to update the Food class to have a move() method that moves the food to a new random location when called. Here is the updated code for the Food class:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">class Food:</span></span>
<span class="line"><span style="color: #abb2bf">    def __init__(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.x = random.randint(0, 39) * 10</span></span>
<span class="line"><span style="color: #abb2bf">        self.y = random.randint(0, 29) * 10</span></span>
<span class="line"><span style="color: #abb2bf">        </span></span>
<span class="line"><span style="color: #abb2bf">    def draw(self):</span></span>
<span class="line"><span style="color: #abb2bf">        pygame.draw.rect(screen, RED, (self.x, self.y, 10, 10))</span></span>
<span class="line"><span style="color: #abb2bf">        </span></span>
<span class="line"><span style="color: #abb2bf">    def move(self):</span></span>
<span class="line"><span style="color: #abb2bf">        self.x = random.randint(0, 39) * 10</span></span>
<span class="line"><span style="color: #abb2bf">        self.y = random.randint(0, 29) * 10</span></span></code></pre>
<p>Now, we need to update the game loop to call the update() method on the snake and pass in the food object. Here is the updated game loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">snake = Snake(200, 200)</span></span>
<span class="line"><span style="color: #abb2bf">food = Food()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">while running:</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            running = False</span></span>
<span class="line"><span style="color: #abb2bf">        elif event.type == pygame.KEYDOWN:</span></span>
<span class="line"><span style="color: #abb2bf">            if event.key == pygame.K_UP:</span></span>
<span class="line"><span style="color: #abb2bf">                snake.direction = "UP"</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_DOWN:</span></span>
<span class="line"><span style="color: #abb2bf">                snake.direction = "DOWN"</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_LEFT:</span></span>
<span class="line"><span style="color: #abb2bf">                snake.direction = "LEFT"</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_RIGHT:</span></span>
<span class="line"><span style="color: #abb2bf">                snake.direction = "RIGHT"</span></span>
<span class="line"><span style="color: #abb2bf">    </span></span>
<span class="line"><span style="color: #abb2bf">    screen.fill(BLACK)</span></span>
<span class="line"><span style="color: #abb2bf">    snake.update(food)</span></span>
<span class="line"><span style="color: #abb2bf">    snake.draw()</span></span>
<span class="line"><span style="color: #abb2bf">    food.draw()</span></span>
<span class="line"><span style="color: #abb2bf">    pygame.display.update()</span></span>
<span class="line"><span style="color: #abb2bf">    clock.tick(10)</span></span>
<span class="line"><span style="color: #abb2bf">    </span></span>
<span class="line"><span style="color: #abb2bf">pygame.quit()</span></span></code></pre>
<p>With these changes, the snake should now move and grow when it eats food.</p>
<h2 id="adding-score-tracking-and-game-over-logic">Adding score tracking and game over logic</h2>
<p>To add score tracking and game over logic to our Snake game, we need to update the move() method of our Snake class to check for collisions with the food and handle the snake’s growth and score increase. We also need to add a check for collisions with the walls and with the snake’s own body, which will result in a game over.</p>
<p>Here’s the updated move() method:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create a new body part in the direction of movement</span></span>
<span class="line"><span style="color: #ABB2BF">    new_head </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SNAKE_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SNAKE_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    new_head.topleft </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].left </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SNAKE_SIZE</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].top </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SNAKE_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, new_head)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions with the food</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.food):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.food </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">spawn_food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body.</span><span style="color: #61AFEF">pop</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions with the walls or with the snake's own body</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].bottom </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #56B6C2">any</span><span style="color: #ABB2BF">(part.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(new_head) </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> part </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:])):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span></code></pre>
<p>In the move() method, we first create a new body part in the direction of movement and insert it at the front of the body list. We then check if the new head collides with the food. If it does, we spawn a new piece of food at a random location, increase the score by 10, and leave the new head in place to simulate the snake growing. If there’s no collision with the food, we remove the last body part to simulate the snake moving forward.</p>
<p>Finally, we check for collisions with the walls or with the snake’s own body. If there’s a collision, we set the game_over flag to True to trigger the game over logic.</p>
<p>We can also update the game loop to display the score and handle the game over screen. Here’s the updated code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">snake </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Snake</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Move snake</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">(screen, snake.score)</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_game_over</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In the game loop, we first move the snake using the updated move() method. We then draw the score on the screen using the draw_score() function, and draw the snake using the draw() method of the Snake class. If the game is over, we draw the game over screen using the draw_game_over() function.</p>
<p>We also update the display at the end of the loop and limit the frame rate to 10 frames per second.</p>
<p>With these changes, our Snake game now tracks the player’s score and displays a game over screen when the snake collides with the walls or with its own body.</p>
<p>To track the score, we can simply increment it every time the snake eats a food. We can also keep track of the high score using a separate variable.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Initialize score and high score</span></span>
<span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Inside the main game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.head.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(food.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Snake has eaten the food</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">grow</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    food.</span><span style="color: #61AFEF">spawn</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> high_score:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update high score if necessary</span></span>
<span class="line"><span style="color: #ABB2BF">        high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> score</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Check for collision with walls or body</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.head.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> snake.head.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> \</span></span>
<span class="line"><span style="color: #ABB2BF">   snake.head.top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> snake.head.bottom </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> \</span></span>
<span class="line"><span style="color: #ABB2BF">   snake.</span><span style="color: #61AFEF">collides_with_body</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Game over</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span></code></pre>
<p>When the game is over, we can display a game over screen with the final score and the high score. We can also add a restart button to allow the player to start a new game.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Restart game</span></span>
<span class="line"><span style="color: #ABB2BF">                game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">                snake </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Snake</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                food </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game objects and check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">        snake.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    food.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw game over screen</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"GAME OVER"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(game_over_text, (</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        final_score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"FINAL SCORE: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(final_score_text, (</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> final_score_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        high_score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"HIGH SCORE: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">high_score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(high_score_text, (</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> high_score_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">350</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        restart_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"PRESS ENTER TO RESTART"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(restart_text, (</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> restart_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">500</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span></code></pre>
<h2 id="adding-difficulty-levels-and-game-variations-2">Adding difficulty levels and game variations</h2>
<p>To add difficulty levels and game variations to our Snake game, we can modify several parameters that affect the gameplay. Here are some examples:</p>
<ol>
<li>
<p>Snake speed: We can adjust the speed of the snake based on the chosen difficulty level. For example, in the easy mode, the snake moves slower than in the hard mode.</p>
</li>
<li>
<p>Food spawn rate: We can change the rate at which the food spawns on the screen based on the difficulty level. In the easy mode, the food spawns more frequently than in the hard mode.</p>
</li>
<li>
<p>Snake growth rate: We can modify how many body parts the snake gains when it eats food. In the easy mode, the snake can gain more body parts than in the hard mode.</p>
</li>
<li>
<p>Obstacles: We can add obstacles to the game that the snake must avoid. These obstacles can be static or moving, and their difficulty can vary based on the chosen game mode.</p>
</li>
<li>
<p>Power-ups: We can add power-ups to the game that give the snake various abilities, such as increased speed or invincibility. The frequency and duration of these power-ups can depend on the difficulty level.</p>
</li>
</ol>
<p>By adding these features, we can create different variations of the Snake game that offer unique challenges and experiences for the player. We can also add a menu screen that allows the player to select their preferred difficulty level or game mode before starting the game.</p>
<h2 id="adding-power-ups-and-obstacles">Adding power-ups and obstacles</h2>
<p>To add power-ups and obstacles to the Snake game, we can introduce new types of food that have different effects on the snake when eaten. For example, we can add a “growth” food that increases the length of the snake by two body parts instead of one. We can also add a “poison” food that decreases the length of the snake by one body part.</p>
<p>To implement this functionality, we need to modify the <code>Food</code> class to include a new attribute <code>type</code> that determines the effect of the food on the snake. We also need to modify the <code>Snake</code> class to handle the different types of food.</p>
<p>Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Food</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.type </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">type</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">type</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'normal'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">type</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'growth'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">15</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">15</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">type</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'poison'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">15</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">15</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Snake</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># initialize snake with 3 body parts</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(x, y, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">), pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(x</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, y, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">), pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(x</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, y, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'RIGHT'</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.growth </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># move snake body</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'RIGHT'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            new_head </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'LEFT'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            new_head </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'UP'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            new_head </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'DOWN'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            new_head </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for collision with food</span></span>
<span class="line"><span style="color: #ABB2BF">        food_hit_list </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">], food_group, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> food </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> food_hit_list:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> food.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'growth'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.growth </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> food.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'poison'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.growth </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.growth </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">spawn_food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># move body parts</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body)</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[i].x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[i</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].x</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[i].y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[i</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># move head</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> new_head</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for collision with walls</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].x </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for collision with body</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(the_segment_count):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake_segments[i].</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(snake_segments[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for collision with food</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake_segments[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(food_rect):</span></span>
<span class="line"><span style="color: #ABB2BF">            eat_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">spawn_food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">add_segment</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for collision with obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> obstacle_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> obstacle_rects:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake_segments[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(obstacle_rect):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># update screen</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> segment </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> snake_segments:</span></span>
<span class="line"><span style="color: #ABB2BF">            screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(snake_sprite, segment)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(food_sprite, food_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> obstacle_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> obstacle_rects:</span></span>
<span class="line"><span style="color: #ABB2BF">            screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(obstacle_sprite, obstacle_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># limit frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">        clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">__name__</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'__main__'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">main</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># End of code</span></span></code></pre>
<p>In this version of the Snake game, we have added obstacles that the snake must avoid in addition to the walls and its own body. We have also added a score system that keeps track of the player’s score and a game over screen that is displayed when the snake collides with an obstacle, the walls, or its own body. Additionally, we have implemented difficulty levels that change the speed of the snake and the number of obstacles on the screen.</p>
<h2 id="improving-graphics-with-sprites-and-animations-2">Improving graphics with sprites and animations</h2>
<p>To improve the graphics of our Snake game, we can use sprites and animations. A sprite is a 2D image that is integrated into a larger scene or game. By using sprites, we can make our game objects look more polished and professional.</p>
<p>First, let’s create a new directory in our project called “sprites”. Inside this directory, we can place all of the images that we will be using for our game objects. We will need images for the snake head, body, and tail, as well as images for the food and obstacles.</p>
<p>Once we have our images, we can load them into our game using Pygame’s <code>image.load()</code> function. For example, to load the image for the snake head, we can use the following code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">snake_head_image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"sprites/snake_head.png"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>We can then create a new class called <code>SnakeSprite</code> that extends Pygame’s <code>Sprite</code> class. This class will represent the snake’s body parts, and will contain the image for the body part as well as its position on the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">SnakeSprite</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">image</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">position</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> position[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> position[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span></code></pre>
<p>We can create a new instance of this class for each body part of the snake, and add them to a Pygame sprite group. We can then use Pygame’s <code>sprite.Group.draw()</code> function to draw all of the sprites in the group onto the screen.</p>
<p>Similarly, we can create a <code>FoodSprite</code> class and an <code>ObstacleSprite</code> class to represent the food and obstacles in our game. These classes will also extend Pygame’s <code>Sprite</code> class and contain the images for the food and obstacles as well as their positions on the screen.</p>
<p>By using sprites, we can easily animate our game objects by changing their images over time. For example, we can create a new image for the snake head when it changes direction, and update the image for the snake body parts as the snake moves.</p>
<p>We can also add visual effects such as particle effects when the snake eats food or when obstacles are destroyed. These effects can be created using Pygame’s <code>Surface</code> class and Pygame’s <code>draw</code> module.</p>
<p>Using sprites and animations can greatly improve the visual appeal of our Snake game and make it more engaging for the player.</p>
<h2 id="adding-background-and-other-visual-effects">Adding background and other visual effects</h2>
<p>To improve the visual appeal of the game, we can add a background image and other visual effects. We can use Pygame’s sprite and animation classes to create more dynamic and engaging graphics.</p>
<p>First, let’s add a background image. We can load the image using Pygame’s <code>image.load()</code> function and blit it onto the screen surface in the game loop.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">background </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'background.png'</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Next, let’s add some visual effects to the snake and food objects. We can create custom sprites for these objects using Pygame’s <code>Sprite</code> class. We can define the sprite’s properties and behavior in a separate class, and then add it to a sprite group in the game loop.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">SnakeSegment</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">SEGMENT_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SEGMENT_SIZE</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SNAKE_COLOR</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Food</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FOOD_COLOR</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">FOOD_SIZE</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>We can also add animation to the snake’s movement using Pygame’s <code>time</code> module to control the frame rate. We can create a list of images representing the snake’s body segments and cycle through them in the game loop.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">snake_animation_frames </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">SEGMENT_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SEGMENT_SIZE</span><span style="color: #ABB2BF">)) </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">snake_animation_frames[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SNAKE_COLOR</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">snake_animation_frames[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SNAKE_COLOR_2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">snake_animation_frames[</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SNAKE_COLOR_3</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">snake_animation_index </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">snake_animation_time </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># inside game loop</span></span>
<span class="line"><span style="color: #ABB2BF">snake_animation_time </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> dt</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake_animation_time </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SNAKE_ANIMATION_SPEED</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    snake_animation_index </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (snake_animation_index </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span></span>
<span class="line"><span style="color: #ABB2BF">    snake_animation_time </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i, segment </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">enumerate</span><span style="color: #ABB2BF">(snake.body):</span></span>
<span class="line"><span style="color: #ABB2BF">    segment.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> snake_animation_frames[snake_animation_index]</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> i </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        segment.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SNAKE_HEAD_COLOR</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Finally, we can add some particle effects when the snake eats the food or collides with an obstacle. We can use Pygame’s <code>Particle</code> and <code>Emitter</code> classes to create and manage the particle effects.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Particle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">size</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((size, size))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randrange</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lifetime </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">30</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.time </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dt</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed_y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.time </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> dt</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.time </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lifetime:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Emitter</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">size</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particle_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(x, y, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># update particles</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particle_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw background</span></span>
<span class="line"><span style="color: #ABB2BF">        surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background_image, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw particles</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particle_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(surface)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Particle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">speed</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (x, y)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Explosion</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particles </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">), random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particles.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(</span><span style="color: #61AFEF">Particle</span><span style="color: #ABB2BF">(x, y, speed))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particles.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particles.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(surface)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># create game objects</span></span>
<span class="line"><span style="color: #ABB2BF">snake </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Snake</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">food </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Food</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># create background</span></span>
<span class="line"><span style="color: #ABB2BF">background </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Background</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># create explosion effect</span></span>
<span class="line"><span style="color: #ABB2BF">explosion </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># update game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    food.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    background.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># check for collision with food</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.head.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(food.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">        food.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        snake.</span><span style="color: #61AFEF">grow</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        explosion </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Explosion</span><span style="color: #ABB2BF">(food.rect.centerx, food.rect.centery)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># check for collision with walls</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.head.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> snake.head.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> \</span></span>
<span class="line"><span style="color: #ABB2BF">            snake.head.top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> snake.head.bottom </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># check for collision with body</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(snake.body)):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.head.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(snake.body[i]):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># update explosion effect</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> explosion:</span></span>
<span class="line"><span style="color: #ABB2BF">        explosion.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># draw objects</span></span>
<span class="line"><span style="color: #ABB2BF">    background.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    food.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> explosion:</span></span>
<span class="line"><span style="color: #ABB2BF">        explosion.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># update display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># limit frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FPS</span><span style="color: #ABB2BF">)</span></span></code></pre>
<h2 id="using-pygames-collision-detection-to-handle-snake-food-collisions">Using Pygame’s collision detection to handle snake-food collisions</h2>
<p>To handle snake-food collisions, we need to use Pygame’s collision detection. We can use the <code>colliderect()</code> method to detect if the snake’s head collides with the food. If there is a collision, we need to increase the score, spawn a new food, and add a new body part to the snake.</p>
<p>Here’s the updated code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># check for collision with food</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.body[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(food.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># increase score</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># spawn new food</span></span>
<span class="line"><span style="color: #ABB2BF">    food.</span><span style="color: #61AFEF">spawn</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># add new body part</span></span>
<span class="line"><span style="color: #ABB2BF">    tail </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> snake.body[</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">    dx, dy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> tail.direction</span></span>
<span class="line"><span style="color: #ABB2BF">    new_part </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">SnakeBodyPart</span><span style="color: #ABB2BF">(tail.rect.x </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> dx </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> SnakeBodyPart.</span><span style="color: #D19A66">SIZE</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                             tail.rect.y </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> dy </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> SnakeBodyPart.</span><span style="color: #D19A66">SIZE</span><span style="color: #ABB2BF">, dx, dy)</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.body.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(new_part)</span></span></code></pre>
<p>This code first checks if the snake’s head collides with the food using the <code>colliderect()</code> method. If there is a collision, we increase the score and spawn a new food using the <code>spawn()</code> method of the <code>Food</code> class.</p>
<p>We also need to add a new body part to the snake. We can use the last body part of the snake to determine the direction of the new body part. We create a new <code>SnakeBodyPart</code> object with the position of the last body part minus the direction of the last body part times the size of a body part. This creates a new body part that is positioned behind the last body part in the direction of the snake’s movement.</p>
<p>Finally, we append the new body part to the <code>body</code> list of the snake.</p>
<h2 id="adding-a-leaderboard-to-track-high-scores">Adding a leaderboard to track high scores</h2>
<p>To add a leaderboard to track high scores, we need to store the scores in a persistent data structure like a file or a database.</p>
<p>We can create a text file to store the high scores. The file can contain the top 10 scores, with each score on a separate line. We can then read the scores from the file and display them on the leaderboard screen.</p>
<p>Here’s an example of how to implement this:</p>
<ol>
<li>
<p>Create a new text file called “highscores.txt” in the same directory as the game script.</p>
</li>
<li>
<p>When the game is over and a new high score is achieved, open the “highscores.txt” file and read the current high scores into a list.</p>
</li>
<li>
<p>Append the new high score to the list and sort it in descending order.</p>
</li>
<li>
<p>Write the top 10 scores back to the file, overwriting the previous contents.</p>
</li>
<li>
<p>Display the top 10 scores on the leaderboard screen.</p>
</li>
</ol>
<p>Here’s an example code snippet that demonstrates how to implement this:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Reading high scores from file</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'highscores.txt'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'r'</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">file</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    highscores </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #56B6C2">int</span><span style="color: #ABB2BF">(line.</span><span style="color: #61AFEF">strip</span><span style="color: #ABB2BF">()) </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> line </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">file</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">readlines</span><span style="color: #ABB2BF">()]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Adding new score and sorting</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> highscores[</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">    highscores.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(score)</span></span>
<span class="line"><span style="color: #ABB2BF">    highscores.</span><span style="color: #61AFEF">sort</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">reverse</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    highscores </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> highscores[:</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">]  </span><span style="color: #7F848E; font-style: italic"># keep only top 10 scores</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Writing high scores to file</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'highscores.txt'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'w'</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">file</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> score </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> highscores:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">file</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">write</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"</span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">score</span><span style="color: #D19A66">}</span><span style="color: #56B6C2">\n</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Displaying high scores on leaderboard screen</span></span>
<span class="line"><span style="color: #ABB2BF">font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i, score </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">enumerate</span><span style="color: #ABB2BF">(highscores):</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"</span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">i</span><span style="color: #56B6C2">+</span><span style="color: #D19A66">1}</span><span style="color: #98C379">. </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> i</span><span style="color: #56B6C2">*</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span></code></pre>
<p>Note that this is just an example implementation, and there are many ways to store and display high scores. You can customize this code to fit your specific needs and game design.</p>
<h2 id="adding-keyboard-and-mouse-controls-for-player-movement">Adding keyboard and mouse controls for player movement</h2>
<p>In the current implementation, the snake is controlled by the arrow keys. However, it would be useful to provide alternative controls for players who prefer using the mouse or other keys.</p>
<p>One approach to adding keyboard controls is to create a dictionary that maps keys to directions. For example, we could define the following dictionary to map the WASD keys to directions:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #D19A66">KEY_MAP</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.K_w: </span><span style="color: #98C379">"UP"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.K_a: </span><span style="color: #98C379">"LEFT"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.K_s: </span><span style="color: #98C379">"DOWN"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.K_d: </span><span style="color: #98C379">"RIGHT"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span></code></pre>
<p>Then, we could modify the <code>handle_events</code> method to handle keyboard events based on the key map:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handle_events</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">KEY_MAP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.snake.</span><span style="color: #61AFEF">change_direction</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">KEY_MAP</span><span style="color: #ABB2BF">[event.key])</span></span></code></pre>
<p>For mouse controls, we could add a new method to the <code>SnakeGame</code> class that checks the mouse position and changes the direction of the snake accordingly. For example, we could define the following method to check the x and y position of the mouse relative to the head of the snake:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handle_mouse</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    mx, my </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    sx, sy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.snake.</span><span style="color: #61AFEF">get_head_position</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> mx </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> sx:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.snake.</span><span style="color: #61AFEF">change_direction</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"LEFT"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> mx </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> sx:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.snake.</span><span style="color: #61AFEF">change_direction</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"RIGHT"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> my </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> sy:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.snake.</span><span style="color: #61AFEF">change_direction</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"UP"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> my </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> sy:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.snake.</span><span style="color: #61AFEF">change_direction</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"DOWN"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>We could then call this method in the game loop to handle mouse events:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.fps)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">handle_events</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">handle_mouse</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>These are just examples of how we could add keyboard and mouse controls to the Snake game. Depending on the specific requirements of the game, we could implement different control schemes that better suit the gameplay and user experience.</p>
<h2 id="adding-touch-controls-for-mobile-devices">Adding touch controls for mobile devices</h2>
<p>Sure, to add touch controls for mobile devices, we can use Pygame’s touch event handling functionality. We can detect touch events on the screen and map them to specific actions in the game, such as moving the snake in a certain direction or starting a new game.</p>
<p>Here’s an example implementation of touch controls for a Snake game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># set up the game window</span></span>
<span class="line"><span style="color: #ABB2BF">window_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">640</span></span>
<span class="line"><span style="color: #ABB2BF">window_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">480</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((window_width, window_height))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Snake Game"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># set up the snake</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Snake</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">280</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">260</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">240</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        ]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head.</span><span style="color: #61AFEF">copy</span><span style="color: #ABB2BF">())</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"LEFT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head.</span><span style="color: #61AFEF">copy</span><span style="color: #ABB2BF">())</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"UP"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head.</span><span style="color: #61AFEF">copy</span><span style="color: #ABB2BF">())</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"DOWN"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head.</span><span style="color: #61AFEF">copy</span><span style="color: #ABB2BF">())</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body.</span><span style="color: #61AFEF">pop</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(surface, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.head)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> body_part </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.body:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(surface, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), body_part)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># create the snake and set up the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">snake </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Snake</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># set up the touch event handling</span></span>
<span class="line"><span style="color: #ABB2BF">touch_start_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">touch_end_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># event handling</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            touch_start_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONUP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            touch_end_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># map touch events to snake movement</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> touch_start_pos </span><span style="color: #C678DD; font-style: italic">is</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> touch_end_pos </span><span style="color: #C678DD; font-style: italic">is</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        touch_vector </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span></span>
<span class="line"><span style="color: #ABB2BF">            touch_end_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> touch_start_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">            touch_end_pos[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> touch_start_pos[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">        )</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">abs</span><span style="color: #ABB2BF">(touch_vector[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]) </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">abs</span><span style="color: #ABB2BF">(touch_vector[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> touch_vector[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"LEFT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> touch_vector[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"LEFT"</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> touch_vector[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"UP"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"DOWN"</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> touch_vector[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"DOWN"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"UP"</span></span>
<span class="line"><span style="color: #ABB2BF">        touch_start_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">        touch_end_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># move the snake</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># draw the game</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># limit the frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In this example, we detect touch events using the `pygame.MOUSEBUTTONDOWN
method and update the snake direction based on the position of the touch on the screen. We also limit the frame rate to avoid running the game loop too fast.</p>
<p>To add touch controls to the game, we need to modify the game loop to handle touch events. Here’s an example of how we can do this:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Event handling</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle touch events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">FINGERDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Get touch position</span></span>
<span class="line"><span style="color: #ABB2BF">            pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.freetype.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">inflate</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">clamp</span><span style="color: #ABB2BF">(event.x, event.y)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update snake direction based on touch position</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pos.x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pos.y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"DOWN"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"UP"</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"UP"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"DOWN"</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pos.y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"LEFT"</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"LEFT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle keyboard events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"DOWN"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"UP"</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"UP"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"DOWN"</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"LEFT"</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> snake.direction </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"LEFT"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                snake.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"RIGHT"</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    food.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collision with food</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.head.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(food.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">        snake.</span><span style="color: #61AFEF">grow</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        food.</span><span style="color: #61AFEF">spawn</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collision with walls</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.head.rect.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> snake.head.rect.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> \</span></span>
<span class="line"><span style="color: #ABB2BF">            snake.head.rect.top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> snake.head.rect.bottom </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collision with body</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(snake.body)):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> snake.head.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(snake.body[i].rect):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    snake.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    food.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In this example, we detect touch events using the <code>pygame.FINGERDOWN</code> event type and update the snake direction based on the position of the touch on the screen. We also handle keyboard events in the same way as before. We update the game objects, check for collisions, draw the game objects, and limit the frame rate as before.</p>
<h2 id="optimizing-and-improving-game-performance-2">Optimizing and improving game performance</h2>
<p>Game performance is an important aspect to consider when developing a game. Here are some ways to optimize and improve the performance of the Snake game:</p>
<ol>
<li>
<p>Use sprite groups: Instead of updating each sprite individually, use sprite groups to update and draw all the sprites at once. This can significantly improve the performance of the game.</p>
</li>
<li>
<p>Use Pygame’s built-in functions: Pygame provides several built-in functions that can be used to improve the performance of the game. For example, use <code>pygame.Surface.convert()</code> to convert the surface to the same format as the screen surface for faster blitting.</p>
</li>
<li>
<p>Limit the number of particles: If the game has particle effects, limit the number of particles to avoid slowing down the game.</p>
</li>
<li>
<p>Optimize collision detection: Use Pygame’s built-in collision detection functions, such as <code>pygame.sprite.spritecollide()</code> to improve the performance of the game.</p>
</li>
<li>
<p>Optimize game logic: Avoid using complex calculations and loops in the game logic to improve performance. Instead, use simple and efficient algorithms.</p>
</li>
<li>
<p>Use efficient data structures: Use efficient data structures, such as lists and dictionaries, to store game data. Avoid using inefficient data structures, such as nested loops or large arrays, which can slow down the game.</p>
</li>
<li>
<p>Use hardware acceleration: Use hardware acceleration to improve the performance of the game. This can be done by using Pygame’s hardware acceleration functions or by using OpenGL.</p>
</li>
<li>
<p>Test and optimize: Continuously test and optimize the game to improve its performance. Use profiling tools to identify bottlenecks in the game and optimize the code accordingly.</p>
</li>
</ol>
<h2 id="adding-multiplayer-functionality-1">Adding multiplayer functionality</h2>
<p>Sure! Adding multiplayer functionality to a game can be a great way to enhance the gameplay experience and make it more engaging for players. Here’s an overview of how you could add multiplayer functionality to a game:</p>
<ol>
<li>
<p>Decide on the multiplayer mode: Before you begin adding multiplayer functionality to your game, you need to decide on the type of multiplayer mode you want to implement. There are two main types of multiplayer modes: local and online. Local multiplayer involves multiple players sharing the same device and playing the game together, while online multiplayer involves players from different locations connecting to a server to play the game together.</p>
</li>
<li>
<p>Choose a networking library: Once you’ve decided on the type of multiplayer mode you want to implement, you need to choose a networking library to help you build the multiplayer functionality. There are several networking libraries available for Python, including Pygame’s built-in network module, Twisted, and Pyro.</p>
</li>
<li>
<p>Set up the network connection: After choosing a networking library, you need to set up the network connection between the players. For local multiplayer, this could involve setting up a Wi-Fi or Bluetooth connection, while for online multiplayer, you would need to create a server to connect the players.</p>
</li>
<li>
<p>Synchronize game state: To ensure that all players are playing the same game, you need to synchronize the game state between the players. This involves sending updates about the game state, such as player positions, scores, and game events, to all players at regular intervals.</p>
</li>
<li>
<p>Implement game logic for multiplayer: Once the network connection is set up and the game state is synchronized, you need to modify the game logic to accommodate multiple players. This could involve adding new game modes, modifying game mechanics, or introducing new obstacles and challenges.</p>
</li>
<li>
<p>Implement player input handling: In order to allow multiple players to control their characters, you need to implement player input handling. This could involve creating a separate input handler for each player, or implementing a system where players take turns controlling the game.</p>
</li>
<li>
<p>Test and refine the multiplayer functionality: Once you’ve implemented the multiplayer functionality, you need to test it extensively to ensure that it works as expected. You may need to make tweaks and refinements to the code to optimize performance and address any bugs or issues that arise during testing.</p>
</li>
</ol>
<p>Overall, adding multiplayer functionality to a game can be a complex process, but it can also be highly rewarding. By allowing players to play together, you can create a more engaging and immersive gameplay experience that keeps them coming back for more.</p>
<h2 id="customizing-game-settings-and-options-1">Customizing game settings and options</h2>
<p>To allow for customization of game settings and options, we can create a separate module or class to manage the game settings. This module or class can include variables for the game’s difficulty level, sound and music settings, control options, and any other customizable aspects of the game.</p>
<p>We can then provide the player with a menu or options screen where they can adjust these settings to their preference. The player’s settings can be saved to a file, allowing them to persist between game sessions.</p>
<p>For example, we could create a <code>Settings</code> class with properties such as <code>difficulty</code>, <code>sound_volume</code>, <code>music_volume</code>, and <code>control_options</code>. We could then create an <code>OptionsScreen</code> class that allows the player to adjust these settings and save them to a file using Python’s <code>pickle</code> module.</p>
<p>To use the settings in the game, we could create an instance of the <code>Settings</code> class and pass it to the appropriate functions or methods as needed. For example, we could use the <code>difficulty</code> property to adjust the speed or behavior of game objects, or use the <code>sound_volume</code> and <code>music_volume</code> properties to adjust the volume of audio effects.</p>
<p>By allowing players to customize the game settings, we can create a more engaging and enjoyable gaming experience for a wider range of players with different preferences and skill levels.</p>
<h1 id="chapter-6-building-a-tetris-game">Chapter 6: Building a Tetris Game</h1>
<h2 id="overview-of-tetris-game">Overview of Tetris game</h2>
<p>Tetris is a classic tile-matching puzzle video game that was first released in 1984. In the game, the player must rotate and move different-shaped falling blocks, or tetrominoes, that move from the top of the game screen to the bottom. The goal is to create horizontal lines of blocks without gaps, which disappear when completed, to clear space for more blocks to fall. As the game progresses, the blocks fall faster and the game becomes more challenging. The game ends when the blocks reach the top of the screen and there is no more room for new blocks to fall.</p>
<h2 id="setting-up-the-game-environment-3">Setting up the game environment</h2>
<p>To set up the game environment for Tetris, we will need to import the necessary modules and initialize Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the screen size and title</span></span>
<span class="line"><span style="color: #ABB2BF">screen_width, screen_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">640</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">480</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((screen_width, screen_height))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Tetris"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Next, we will need to define some constants for the game such as the grid size and the size of the game blocks:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define constants</span></span>
<span class="line"><span style="color: #ABB2BF">grid_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">block_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> grid_size </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">grid_width, grid_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> screen_width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> grid_size, screen_height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> grid_size</span></span></code></pre>
<p>We will also need to define the colors that we will use for the game blocks:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define colors</span></span>
<span class="line"><span style="color: #ABB2BF">black </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">white </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">red </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">green </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">blue </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">yellow </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">purple </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">cyan </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Finally, we can define the game loop and handle events:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit the frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>With the environment set up, we can now start implementing the game logic.</p>
<h2 id="drawing-game-elements-3">Drawing game elements</h2>
<p>To draw the game elements for Tetris, we need to create the blocks that make up the Tetris board and the Tetriminos.</p>
<p>First, we create a <code>Block</code> class that represents each individual block on the Tetris board. We can define the size and color of each block, as well as a method to draw the block on the screen using Pygame’s <code>draw.rect()</code> function.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define constants for block size and colors</span></span>
<span class="line"><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">30</span></span>
<span class="line"><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Block</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect)</span></span></code></pre>
<p>Next, we create a <code>Tetrimino</code> class that represents each of the seven Tetrimino shapes in the game. We define the shape, color, and initial position of each Tetrimino, as well as methods to rotate and move the Tetrimino on the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Tetrimino</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">shape</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shape </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> shape</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> color</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create blocks for the Tetrimino</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(shape)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> col </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(shape[row])):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> shape[row][col] </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'X'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    block </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Block</span><span style="color: #ABB2BF">(col </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, row </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, color)</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(block)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set initial position of the Tetrimino</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].rect.</span><span style="color: #61AFEF">copy</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">update_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the rect of the Tetrimino to cover all of its blocks</span></span>
<span class="line"><span style="color: #ABB2BF">        x_coords </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [block.rect.x </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks]</span></span>
<span class="line"><span style="color: #ABB2BF">        y_coords </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [block.rect.y </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">min</span><span style="color: #ABB2BF">(x_coords)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">min</span><span style="color: #ABB2BF">(y_coords)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">max</span><span style="color: #ABB2BF">(x_coords) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">max</span><span style="color: #ABB2BF">(y_coords) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dx</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dy</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the Tetrimino by dx and dy</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">            block.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> dx</span></span>
<span class="line"><span style="color: #ABB2BF">            block.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> dy</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">update_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Rotate the Tetrimino 90 degrees clockwise</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span></span>
<span class="line"><span style="color: #ABB2BF">        shape </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shape</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation):</span></span>
<span class="line"><span style="color: #ABB2BF">            shape </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">list</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">zip</span><span style="color: #ABB2BF">(*shape[::</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks.</span><span style="color: #61AFEF">clear</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(shape)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> col </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(shape[row])):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> shape[row][col] </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'X'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> col </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"><span style="color: #ABB2BF">                    y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> row </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BLOCK_SIZE</span></span>
<span class="line"><span style="color: #ABB2BF">                    block </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Block</span><span style="color: #ABB2BF">(x, y, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color)</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(block)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">update_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">            block.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(surface)</span></span></code></pre>
<p>Finally, we create a <code>Board</code> class that represents the Tetris board itself. We define the size and position of the board, as well as a 2D array to keep track of the blocks on the board. We also define methods to add and</p>
<p>remove blocks from the board as they are placed or cleared.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># define constants</span></span>
<span class="line"><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">400</span></span>
<span class="line"><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">500</span></span>
<span class="line"><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #D19A66">BOARD_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #D19A66">BOARD_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #D19A66">BOARD_X</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #D19A66">BOARD_Y</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">RED</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">BLUE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># initialize pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># create game window</span></span>
<span class="line"><span style="color: #ABB2BF">window </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Tetris"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># define game objects</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Block</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Board</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BOARD_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BOARD_HEIGHT</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.top_row </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">add_block</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">block</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">row</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">col</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks[row][col] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">remove_block</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">row</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">col</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks[row][col] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_block</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">row</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">col</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks[row][col]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_row</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">row</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> col </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BOARD_WIDTH</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks[row][col]:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">clear_row</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">row</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> col </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BOARD_WIDTH</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            block </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks[row][col]</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> block:</span></span>
<span class="line"><span style="color: #ABB2BF">                block.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">remove_block</span><span style="color: #ABB2BF">(row, col)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> r </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(row</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.top_row</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> c </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BOARD_WIDTH</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">                block </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.blocks[r][c]</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> block:</span></span>
<span class="line"><span style="color: #ABB2BF">                    block.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">remove_block</span><span style="color: #ABB2BF">(r, c)</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add_block</span><span style="color: #ABB2BF">(block, r</span><span style="color: #56B6C2">+</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, c)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.top_row </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_rows</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.top_row, </span><span style="color: #D19A66">BOARD_HEIGHT</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_row</span><span style="color: #ABB2BF">(row):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">clear_row</span><span style="color: #ABB2BF">(row)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># create game objects</span></span>
<span class="line"><span style="color: #ABB2BF">board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Board</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">block_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># game loop</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># update game objects</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># draw game objects</span></span>
<span class="line"><span style="color: #ABB2BF">    window.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">BOARD_X</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BOARD_Y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BOARD_WIDTH</span><span style="color: #56B6C2">*</span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">BOARD_HEIGHT</span><span style="color: #56B6C2">*</span><span style="color: #D19A66">BLOCK_SIZE</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    block_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(window)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># update display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># exit game</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we create a <code>Block</code> class to represent individual blocks that make up the pieces in Tetris, as well as a <code>Board</code> class to represent the game board. We also define methods to add and remove blocks from the board as they are placed or cleared, and a method to check for full rows and clear them. The <code>Block</code> class inherits from <code>pygame.sprite.Sprite</code> to take advantage of Pygame’s sprite functionality, and the <code>Board</code> class contains a 2D array to keep track of the blocks on the board. In the game loop, we draw the game objects to the screen and update the display.</p>
<h2 id="adding-game-logic-3">Adding game logic</h2>
<p>In order to implement the game logic, we need to update the game state based on user input and make sure that the blocks move down at regular intervals.</p>
<p>We can start by defining a <code>Game</code> class which will be responsible for keeping track of the game state and updating it. Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.level </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lines_cleared </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">add_piece</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">piece</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> piece</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.</span><span style="color: #61AFEF">can_move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">lock_piece</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">clear_lines</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add_piece</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(pieces))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.</span><span style="color: #61AFEF">can_move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board, (</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">((</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.</span><span style="color: #61AFEF">can_move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board, (</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">rotate_piece</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.</span><span style="color: #61AFEF">can_rotate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.</span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">lock_piece</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">            x, y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[y][x] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_piece.color</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">clear_lines</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        lines_cleared </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> y </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">all</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[y]):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board.</span><span style="color: #61AFEF">pop</span><span style="color: #ABB2BF">(y)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width)</span></span>
<span class="line"><span style="color: #ABB2BF">                lines_cleared </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> lines_cleared) </span><span style="color: #56B6C2">**</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lines_cleared </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> lines_cleared</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.level </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lines_cleared </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span></code></pre>
<p>Here, we define methods to add a new piece to the board, move the current piece down, left, or right, rotate the current piece, lock the current piece in place when it can no longer move down, and clear completed lines. We also keep track of the player’s score, level, and lines cleared.</p>
<p>Next, we need to update the game loop to call these methods based on user input and at regular intervals. Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">game </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Game</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game.</span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game.</span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game.</span><span style="color: #61AFEF">rotate_piece</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game.current_piece </span><span style="color: #C678DD; font-style: italic">is</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        game.</span><span style="color: #61AFEF">add_piece</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(pieces))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    game.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_board</span><span style="color: #ABB2BF">(screen, game.board)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_piece</span><span style="color: #ABB2BF">(screen, game.current_piece)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Here, we check for user input using <code>pygame.event.get()</code> and call the appropriate method on the <code>Game</code> object. We also add a new piece to the board if there is no current piece, and move the current piece down at regular intervals. Finally, we draw the</p>
<p>current state of the game board to the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">play_game</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># initialize variables</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">SysFont</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"monospace"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># initialize game board and current piece</span></span>
<span class="line"><span style="color: #ABB2BF">    board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_board</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    current_piece </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">    next_piece </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_random_piece</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    drop_time </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">LEVEL_DROP_TIME</span><span style="color: #ABB2BF">[current_level]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># game loop</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> current_piece:</span></span>
<span class="line"><span style="color: #ABB2BF">                        current_piece.</span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">(board)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> current_piece:</span></span>
<span class="line"><span style="color: #ABB2BF">                        current_piece.</span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">(board)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> current_piece:</span></span>
<span class="line"><span style="color: #ABB2BF">                        current_piece.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(board)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> current_piece:</span></span>
<span class="line"><span style="color: #ABB2BF">                        current_piece.</span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">(board)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># move current piece down</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> current_piece </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> drop_time:</span></span>
<span class="line"><span style="color: #ABB2BF">            current_piece.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(board)</span></span>
<span class="line"><span style="color: #ABB2BF">            drop_time </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">LEVEL_DROP_TIME</span><span style="color: #ABB2BF">[current_level]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for completed rows and clear them</span></span>
<span class="line"><span style="color: #ABB2BF">        completed_rows </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_completed_rows</span><span style="color: #ABB2BF">(board)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> completed_rows:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">clear_rows</span><span style="color: #ABB2BF">(board, completed_rows)</span></span>
<span class="line"><span style="color: #ABB2BF">            score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(completed_rows) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">LEVEL_SCORES</span><span style="color: #ABB2BF">[current_level]:</span></span>
<span class="line"><span style="color: #ABB2BF">                current_level </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># add new piece if necessary</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> current_piece:</span></span>
<span class="line"><span style="color: #ABB2BF">            current_piece </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> next_piece</span></span>
<span class="line"><span style="color: #ABB2BF">            next_piece </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_random_piece</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> current_piece.</span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(board):</span></span>
<span class="line"><span style="color: #ABB2BF">                game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw game elements to screen</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BG_COLOR</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_board</span><span style="color: #ABB2BF">(screen, board)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_piece</span><span style="color: #ABB2BF">(screen, current_piece)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_next_piece</span><span style="color: #ABB2BF">(screen, next_piece)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">(screen, font, score)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_level</span><span style="color: #ABB2BF">(screen, font, current_level)</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># limit frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">        clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">FRAME_RATE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># game over screen</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">game_over_screen</span><span style="color: #ABB2BF">(screen, font, score)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we define a <code>play_game()</code> function that initializes the game environment, sets up the game board and current piece, and runs the game loop. Within the loop, we handle events such as keyboard input, move the current piece down at regular intervals, check for completed rows and clear them, and add a new piece if necessary. We also draw the game elements to the screen and limit the frame rate to avoid running the loop too quickly. Finally, we display a game over screen and quit Pygame when the game is over.</p>
<h2 id="adding-sounds-and-music-3">Adding sounds and music</h2>
<p>To make our Tetris game more engaging, we can add sounds and music. We can use Pygame’s <code>mixer</code> module to load and play sounds and music.</p>
<p>First, we need to initialize the mixer module:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">pygame.mixer.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Then, we can load the sounds and music files using the <code>Sound</code> and <code>music.load</code> functions, respectively:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Load sounds</span></span>
<span class="line"><span style="color: #ABB2BF">line_clear_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'line_clear.wav'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">game_over_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'game_over.wav'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Load music</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'tetris_theme.mp3'</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Here, we loaded two sounds - one for when a line is cleared and one for when the game is over. We also loaded the Tetris theme music.</p>
<p>We can play these sounds and music at appropriate times in our game. For example, we can play the line clear sound when a line is cleared by the player:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> lines_cleared </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    line_clear_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We can also play the game over sound and stop the music when the game is over:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.mixer.music.</span><span style="color: #61AFEF">stop</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We can experiment with different sound effects and music to create the desired atmosphere for our game.</p>
<h2 id="adding-a-game-over-screen-3">Adding a game over screen</h2>
<p>To add a game over screen, we need to detect when the game is over and then create a new surface with the game over text and display it to the player.</p>
<p>We can detect when the game is over by checking if any of the blocks in the top row of the game board are filled. If any of the blocks in the top row are filled, then the game is over and we need to display the game over screen.</p>
<p>Here’s an example implementation of a game over screen:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Game Over Screen</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">game_over_screen</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"GAME OVER"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().center)</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Inside the main game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">any</span><span style="color: #ABB2BF">(board[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">game_over_screen</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    time.</span><span style="color: #61AFEF">sleep</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>In this implementation, we first define a <code>game_over_screen()</code> function that creates a new surface with the text “GAME OVER” in the center. We then blit the text surface to the main game screen and flip the display to update the screen.</p>
<p>Inside the main game loop, we check if any of the blocks in the top row of the game board are filled using the <code>any()</code> function. If any of the blocks are filled, we call the <code>game_over_screen()</code> function to display the game over screen. We then use the <code>time.sleep()</code> function to pause the game for two seconds before setting the <code>running</code> variable to <code>False</code> to exit the game loop and quit the game.</p>
<h2 id="creating-game-objects-such-as-tetrominoes-and-game-board">Creating game objects such as tetrominoes and game board</h2>
<p>To create the game objects for Tetris, we need to define the tetrominoes and the game board.</p>
<p>We can represent each tetromino as a 4x4 grid, where the value 1 represents a block and the value 0 represents an empty space. We can also assign a color to each tetromino.</p>
<p>Here is an example of how we can define the tetrominoes:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Tetrominoes</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    I </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]]</span></span>
<span class="line"><span style="color: #ABB2BF">    J </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]]</span></span>
<span class="line"><span style="color: #ABB2BF">    L </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]]</span></span>
<span class="line"><span style="color: #ABB2BF">    O </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]]</span></span>
<span class="line"><span style="color: #ABB2BF">    S </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]]</span></span>
<span class="line"><span style="color: #ABB2BF">    T </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]]</span></span>
<span class="line"><span style="color: #ABB2BF">    Z </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">         [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #D19A66">COLORS</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"I"</span><span style="color: #ABB2BF">: (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"J"</span><span style="color: #ABB2BF">: (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"L"</span><span style="color: #ABB2BF">: (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"O"</span><span style="color: #ABB2BF">: (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"S"</span><span style="color: #ABB2BF">: (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"T"</span><span style="color: #ABB2BF">: (</span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"Z"</span><span style="color: #ABB2BF">: (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span></code></pre>
<p>To represent the game board, we can use a 2D array of integers, where each element represents a block on the board. We can use the value 0 to represent an empty space and a positive integer to represent a block. We can also define the dimensions of the game board.</p>
<p>Here is an example of how we can define the game board:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">GameBoard</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #D19A66">WIDTH</span><span style="color: #ABB2BF">)] </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #D19A66">HEIGHT</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_block</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">row</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">col</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row][col]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">set_block</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">row</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">col</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row][col] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> value</span></span></code></pre>
<p>We can use the <code>get_block()</code> and <code>set_block()</code> methods to access and modify the blocks on the board. We can also use the <code>WIDTH</code> and <code>HEIGHT</code> attributes to get the dimensions of the board.</p>
<h2 id="implementing-tetromino-movement-and-rotation-controls">Implementing tetromino movement and rotation controls</h2>
<p>To implement tetromino movement and rotation controls, we need to handle user input and update the tetromino accordingly. We can use Pygame’s <code>pygame.key</code> module to detect keyboard events and handle them accordingly.</p>
<p>First, we define a <code>move_left()</code> and <code>move_right()</code> method to move the tetromino left or right. We can do this by updating the <code>x</code> attribute of the tetromino’s <code>Rect</code> object:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span></code></pre>
<p>Similarly, we can define a <code>rotate()</code> method to rotate the tetromino clockwise. We can do this by swapping the rows and columns of the tetromino’s shape matrix:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shape </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shape[j][i] </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shape))] </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shape[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">])</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)]</span></span></code></pre>
<p>To handle user input, we can add a event loop inside the main game loop to detect <code>pygame.KEYDOWN</code> events and call the appropriate methods:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            tetromino.</span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            tetromino.</span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            tetromino.</span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We can also add a <code>move_down()</code> method to move the tetromino down one block at a time. We can do this by updating the <code>y</code> attribute of the tetromino’s <code>Rect</code> object:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span></code></pre>
<p>We can then call this method at regular intervals using a timer inside the game loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> time.</span><span style="color: #61AFEF">time</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> last_move </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> move_delay:</span></span>
<span class="line"><span style="color: #ABB2BF">    tetromino.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    last_move </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> time.</span><span style="color: #61AFEF">time</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Finally, we need to handle collision detection to prevent the tetromino from moving through the walls or other blocks on the board. We can do this by checking the positions of the tetromino’s blocks against the positions of the blocks on the board:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dx</span><span style="color: #ABB2BF">=</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dy</span><span style="color: #ABB2BF">=</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.num_blocks):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.num_blocks):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.shape[i][j] </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> j</span><span style="color: #56B6C2">*</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> dx</span><span style="color: #56B6C2">*</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">                y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> i</span><span style="color: #56B6C2">*</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> dy</span><span style="color: #56B6C2">*</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> x </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> y </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> board[</span><span style="color: #56B6C2">int</span><span style="color: #ABB2BF">(y</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size)][</span><span style="color: #56B6C2">int</span><span style="color: #ABB2BF">(x</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size)] </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>We can then use this method to check if the tetromino can be moved left, right, or down before actually moving it:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">dx</span><span style="color: #56B6C2">=-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">dx</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">dy</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add_to_board</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">new_tetromino</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In the <code>move_down</code> method, we first check if the current tetromino can move down. If it can, we simply increment its <code>rect.y</code> attribute by the block size. If it cannot move down, we add the tetromino to the game board and create a new one.</p>
<p>Next, we need to implement methods to move the tetromino left, right, and to rotate it. Here are the methods for each:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_move</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_move</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_rotation</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.transform.</span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">90</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino[j][i] </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino))] </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]) </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)]</span></span></code></pre>
<p>The <code>move_left</code> and <code>move_right</code> methods work similarly to the <code>move_down</code> method, but they check if the tetromino can move left or right before actually moving it. The <code>rotate</code> method first checks if the tetromino can be rotated without going out of bounds or colliding with other blocks. If it can be rotated, we use the <code>pygame.transform.rotate</code> method to rotate the image and update the tetromino matrix accordingly.</p>
<p>Now, we need to bind these methods to keys so the player can control the tetromino. Here’s an example of how to do that:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                tetromino.</span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                tetromino.</span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                tetromino.</span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                tetromino.</span><span style="color: #61AFEF">move_down</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we check for key events using <code>pygame.event.get()</code> and bind the arrow keys to the appropriate tetromino methods. We also bind the down arrow key to the <code>move_down</code> method so the player can drop the tetromino faster.</p>
<p>With these methods and key bindings, we now have a playable Tetris game!</p>
<h2 id="adding-score-tracking-and-game-over-logic-1">Adding score tracking and game over logic</h2>
<p>To keep track of the player’s score, we can add a <code>score</code> variable to our <code>Game</code> class and increment it each time the player clears a row. We can also keep track of the player’s level by incrementing it based on the number of rows cleared.</p>
<p>To implement game over logic, we can check if the newly spawned tetromino overlaps with any existing blocks on the board. If there is overlap, we can set the game state to “game over” and display the game over screen.</p>
<p>Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">block_size</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over_font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> (width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> block_size) </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> block_size)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.next_tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.level </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">new_tetromino</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.next_tetromino </span><span style="color: #C678DD; font-style: italic">is</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Tetromino</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">TETROMINOES</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.next_tetromino</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.next_tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Tetromino</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">TETROMINOES</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">tetromino</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> tetromino.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">            x, y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> x </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> y </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[y][x] </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">add_to_board</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">            x, y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[y][x] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.color</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        rows_cleared </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">all</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[i]):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">del</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[i]</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"><span style="color: #ABB2BF">                rows_cleared </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> rows_cleared </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> rows_cleared</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.level </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1000</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_board</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[i])):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[i][j] </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen, </span><span style="color: #D19A66">COLORS</span><span style="color: #ABB2BF">[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[i][j]], pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(j </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        level_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Level: </span><span style="color: #D19A66">{</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.level</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(level_text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">40</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_game_over_screen</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over_font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"GAME OVER"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(game_over_text, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw game over text</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(game_over_text, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Wait for a key press to restart the game</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">start_game</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">return</span></span></code></pre>
<p>In this code, we display the game over text in the center of the screen and wait for a key press to restart the game. If the player presses the space bar, we call the <code>start_game()</code> method to reset the game.</p>
<h2 id="adding-difficulty-levels-and-game-variations-3">Adding difficulty levels and game variations</h2>
<p>Adding difficulty levels and game variations can be a great way to keep players engaged and challenged. Here are some ideas for how to implement them in Tetris:</p>
<ol>
<li>
<p>Speed increase: Increase the speed at which the tetrominoes fall as the player progresses through the game. This can be done gradually or in stages, with a clear indication of the player’s current level.</p>
</li>
<li>
<p>Block variety: Introduce new types of blocks with unique shapes and properties, such as blocks that clear a whole row or column when placed.</p>
</li>
<li>
<p>Obstacles: Add obstacles to the game board that the player must work around or clear, such as immovable blocks or locked tiles.</p>
</li>
<li>
<p>Power-ups: Include power-ups that give the player temporary advantages, such as a slow-down effect or a bonus score multiplier.</p>
</li>
<li>
<p>Multiplayer: Add a multiplayer mode where players compete against each other in real-time. This can be done locally or online, with a variety of gameplay options such as cooperative or competitive play.</p>
</li>
<li>
<p>Customization options: Allow players to customize the game in various ways, such as choosing the music or background, changing the color scheme, or adjusting the game mechanics to their liking.</p>
</li>
<li>
<p>Time-based challenges: Add time-based challenges where the player must clear a certain number of lines or score a certain number of points within a limited time frame.</p>
</li>
<li>
<p>Endless mode: Include an endless mode where the game continues indefinitely, with the speed and difficulty increasing gradually over time. Players can compete for high scores and see how long they can survive.</p>
</li>
</ol>
<h2 id="adding-power-ups-and-bonus-features-such-as-line-clearing-abilities">Adding power-ups and bonus features such as line clearing abilities</h2>
<p>Adding power-ups and bonus features is a great way to add more excitement and variety to a Tetris game. One popular feature is the ability to clear multiple lines at once, called “Tetris” in the original game.</p>
<p>To implement this feature, we need to keep track of how many lines the player has cleared in one move. When the player clears four lines at once, we award them a bonus score and play a special sound effect.</p>
<p>Here is an example of how to add this feature:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">TetrisGame</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ... initialization code ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lines_cleared </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.total_lines_cleared </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">clear_lines</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"""</span></span>
<span class="line"><span style="color: #98C379">        Clears completed lines and awards points to the player.</span></span>
<span class="line"><span style="color: #98C379">        """</span></span>
<span class="line"><span style="color: #ABB2BF">        completed_lines </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for completed lines</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board_height):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">all</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row]):</span></span>
<span class="line"><span style="color: #ABB2BF">                completed_lines.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(row)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># remove completed lines and add empty ones at the top</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> completed_lines:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board.</span><span style="color: #61AFEF">pop</span><span style="color: #ABB2BF">(row)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board_width)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># award points and play sound effects</span></span>
<span class="line"><span style="color: #ABB2BF">        num_lines_cleared </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(completed_lines)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lines_cleared </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> num_lines_cleared</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.total_lines_cleared </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> num_lines_cleared</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> num_lines_cleared </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic"># award bonus score for Tetris</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">play_sound_effect</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"tetris_sound.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.points_per_line </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> num_lines_cleared</span></span></code></pre>
<p>In this example, we keep track of two variables: <code>lines_cleared</code> for the number of lines cleared in the current move, and <code>total_lines_cleared</code> for the total number of lines cleared in the game.</p>
<p>The <code>clear_lines()</code> method checks for completed lines in the game board, removes them, adds empty rows at the top, and awards points to the player based on the number of lines cleared. If the player clears four lines at once, we award them a bonus score and play a special sound effect.</p>
<p>To make the game more challenging, we can add difficulty levels that increase the speed of the falling tetrominoes or reduce the time allowed for player moves. We can also add power-ups that temporarily slow down or speed up the falling speed of the tetrominoes, or give the player the ability to rotate or move tetrominoes in new ways.</p>
<h2 id="improving-graphics-with-sprites-and-animations-3">Improving graphics with sprites and animations</h2>
<p>To improve the graphics of Tetris, we can use sprites to represent the different tetromino shapes and add animations for when lines are cleared.</p>
<p>First, we can create a <code>TetrominoSprite</code> class that inherits from Pygame’s <code>Sprite</code> class. This class will be responsible for drawing and animating a tetromino on the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">TetrominoSprite</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">block_size</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> color</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span></code></pre>
<p>Next, we can update the <code>Tetromino</code> class to use instances of the <code>TetrominoSprite</code> class to represent the tetromino shapes. We can create a dictionary that maps each tetromino shape to a list of <code>TetrominoSprite</code> instances.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Tetromino</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #D19A66">SHAPES</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"I"</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">CYAN</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">CYAN</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">CYAN</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">CYAN</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">6</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        ],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"J"</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">BLUE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">BLUE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">BLUE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">BLUE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">        ],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"L"</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">ORANGE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">ORANGE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">ORANGE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">ORANGE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">        ],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"O"</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">YELLOW</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">YELLOW</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">YELLOW</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">YELLOW</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">        ],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"S"</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">        ],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"T"</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">PURPLE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">PURPLE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">PURPLE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">PURPLE</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">        ],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"Z"</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">,  </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size),</span></span></code></pre>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">TetrominoSprite</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">block_size</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">block_positions</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((block_size </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, block_size </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">set_colorkey</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block_pos </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> block_positions:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, color, (block_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_pos[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size, block_size, block_size))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this implementation, the <code>TetrominoSprite</code> class is a subclass of <code>pygame.sprite.Sprite</code> and is used to represent each tetromino on the game screen. The class takes in the block size, color, and block positions of the tetromino as parameters.</p>
<p>In the <code>__init__</code> method, we create a surface for the sprite and set its color key to black. We then draw each block of the tetromino onto the surface using the color and block positions provided. Finally, we set the sprite’s rect to the bounds of the surface.</p>
<p>With this implementation, we can now create tetromino sprites in our <code>TetrisGame</code> class and add them to a sprite group to be drawn on the game screen. For example, in the <code>new_tetromino</code> method, we could create a <code>TetrominoSprite</code> for the current tetromino and add it to the sprite group like so:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">new_tetromino</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Choose a new tetromino shape</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_shape </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">TETROMINOES</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create a TetrominoSprite for the current tetromino</span></span>
<span class="line"><span style="color: #ABB2BF">    sprite </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #D19A66">TETROMINO_COLORS</span><span style="color: #ABB2BF">[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_shape], </span><span style="color: #D19A66">TETROMINO_BLOCKS</span><span style="color: #ABB2BF">[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_shape])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Add the sprite to the sprite group</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(sprite)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set the position of the sprite to the top center of the game board</span></span>
<span class="line"><span style="color: #ABB2BF">    sprite.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board_rect.centerx</span></span>
<span class="line"><span style="color: #ABB2BF">    sprite.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span></code></pre>
<p>In this example, we create a <code>TetrominoSprite</code> for the current tetromino using the color and block positions of the tetromino from the <code>TETROMINO_COLORS</code> and <code>TETROMINO_BLOCKS</code> dictionaries. We then add the sprite to the <code>sprites</code> group and set its position to the top center of the game board.</p>
<p>By using sprite groups and sprite classes, we can easily manage and update the graphical elements of the game, making it easier to add new features and animations in the future.</p>
<h2 id="adding-background-and-other-visual-effects-1">Adding background and other visual effects</h2>
<p>To add a background and visual effects to the Tetris game, we can modify the <code>draw_board</code> method in the <code>GameBoard</code> class.</p>
<p>First, we can set a background color for the game screen using the <code>fill</code> method of the <code>pygame.Surface</code> object. We can also load a background image or pattern and draw it onto the game screen using the <code>blit</code> method.</p>
<p>Next, we can add visual effects to the game by using animations or particle effects. For example, when a line is cleared, we can create a particle effect using <code>pygame.sprite.Sprite</code> objects and the <code>pygame.sprite.Group</code> class. We can define a new class for the particles and give them an initial position and velocity, as well as a lifespan and image.</p>
<p>Here is an example of how we can modify the <code>draw_board</code> method to add a background color and a particle effect for line clears:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">GameBoard</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">block_size</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> block_size)] </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> block_size)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.next_tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Tetromino</span><span style="color: #ABB2BF">(random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">list</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">TETROMINOES</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">keys</span><span style="color: #ABB2BF">())), block_size)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">SysFont</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Arial"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particle_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_board</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw background color</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw particles</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particle_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particle_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw tetrominoes on board</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> col </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">])):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row][col] </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">TETROMINOES</span><span style="color: #ABB2BF">[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row][col]]</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(screen, color, (col</span><span style="color: #56B6C2">*</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, row</span><span style="color: #56B6C2">*</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw current tetromino</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(screen, block.color, (block.x, block.y, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw next tetromino</span></span>
<span class="line"><span style="color: #ABB2BF">        next_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Next:"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(next_text, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> next_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        next_tetromino_sprite </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.next_tetromino, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #56B6C2">*</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"><span style="color: #ABB2BF">        next_tetromino_sprite.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">clear_lines</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        lines_cleared </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        new_board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]))] </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board))]</span></span>
<span class="line"><span style="color: #ABB2BF">        row_index </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board) </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">reversed</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">sum</span><span style="color: #ABB2BF">(row) </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                new_board[row_index] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> row</span></span>
<span class="line"><span style="color: #ABB2BF">                row_index </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particle_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(</span><span style="color: #61AFEF">LineClearParticles</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, row_index</span><span style="color: #56B6C2">*</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"><span style="color: #ABB2BF">                lines_cleared </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> new_board</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> lines_cleared</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">add_to_board</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">            row </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block.y </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">            col </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block.x</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row][col] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.color</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for completed rows and clear them</span></span>
<span class="line"><span style="color: #ABB2BF">        rows_cleared </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rows):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">all</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[i]):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board.</span><span style="color: #61AFEF">pop</span><span style="color: #ABB2BF">(i)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board.</span><span style="color: #61AFEF">insert</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.cols)</span></span>
<span class="line"><span style="color: #ABB2BF">                rows_cleared </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># update score and level based on rows cleared</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> rows_cleared </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> rows_cleared </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">300</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> rows_cleared </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">500</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> rows_cleared </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lines_cleared </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> rows_cleared</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.level </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lines_cleared </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># update the speed of the tetromino based on the current level</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.fall_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">max</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.level)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check if the game is over</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">any</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background_image, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw the board</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rows):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> col </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.cols):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row][col]:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(surface, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row][col],</span></span>
<span class="line"><span style="color: #ABB2BF">                                     (col </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, row </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw the current tetromino</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(surface, block.color,</span></span>
<span class="line"><span style="color: #ABB2BF">                                 (block.x, block.y, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw the score and level</span></span>
<span class="line"><span style="color: #ABB2BF">        score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        level_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Level: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.level), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> score_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(level_text, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> level_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">40</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># draw the game over screen if the game is over</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(game_over_text,</span></span>
<span class="line"><span style="color: #ABB2BF">                         (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handle_events</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">move_current_tetromino</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">move_current_tetromino</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">move_current_tetromino</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">rotate_current_tetromino</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">drop_current_tetromino</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">handle_events</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen)</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">__name__</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"__main__"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    game </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Tetris</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    game.</span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">()</span></span></code></pre>
<h2 id="using-pygames-collision-detection-to-handle-tetromino-board-collisions">Using Pygame’s collision detection to handle tetromino-board collisions</h2>
<p>To handle tetromino-board collisions, we can make use of Pygame’s built-in collision detection functions. We will need to create a group of sprites for the blocks on the board and a separate group of sprites for the blocks of the current tetromino.</p>
<p>First, let’s create a group of sprites for the blocks on the board in the <code>Board</code> class. We can use a nested loop to iterate over the 2D array representing the board and create a <code>BlockSprite</code> for each block that is occupied:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Board</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">block_size</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> (width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> block_size) </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> _ </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> block_size)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()  </span><span style="color: #7F848E; font-style: italic"># group for blocks on board</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board)):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> col </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row])):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.board[row][col] </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> col </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">                    y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> row </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">                    block_sprite </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">BlockSprite</span><span style="color: #ABB2BF">(block_size, (x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(block_sprite)</span></span></code></pre>
<p>Next, let’s modify the <code>Tetromino</code> class to add a <code>collides()</code> method that checks for collisions between the blocks of the current tetromino and the blocks on the board. We can use Pygame’s <code>sprite.spritecollide()</code> function to check for collisions between the <code>TetrominoSprite</code> objects and <code>BlockSprite</code> objects in their respective groups:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Tetromino</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">block_size</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">TETROMINOES</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_rotation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">GroupSingle</span><span style="color: #ABB2BF">()  </span><span style="color: #7F848E; font-style: italic"># group for blocks in current tetromino</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">            x_offset </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block.x </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">            y_offset </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> block.y </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> block_size</span></span>
<span class="line"><span style="color: #ABB2BF">            x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> x_offset</span></span>
<span class="line"><span style="color: #ABB2BF">            y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> y_offset</span></span>
<span class="line"><span style="color: #ABB2BF">            tetromino_sprite </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">TetrominoSprite</span><span style="color: #ABB2BF">(block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.color, (x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(tetromino_sprite)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dx</span><span style="color: #ABB2BF">=</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dy</span><span style="color: #ABB2BF">=</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> dx </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> dy </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino_group.sprite.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino_group.sprite.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for collisions with board blocks</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino_group.sprite, board.block_group, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> dx </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> dy </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino_group.sprite.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.tetromino_group.sprite.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">clockwise</span><span style="color: #ABB2BF">=</span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        new_rotation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_rotation </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> clockwise </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        new_rotation </span><span style="color: #56B6C2">%=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.rotations)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        new_blocks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.rotations[new_rotation]</span></span>
<span class="line"><span style="color: #ABB2BF">        old_blocks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.blocks</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(new_blocks)):</span></span>
<span class="line"><span style="color: #ABB2BF">            new_block </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> new_blocks[i]</span></span>
<span class="line"><span style="color: #ABB2BF">            old_block </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> old_blocks[i]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            new_x_offset </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> new_block.x </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">            new_y_offset </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> new_block.y </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block</span></span>
<span class="line"></span></code></pre>
<p>We can now use the <code>colliderect</code> method to detect if any of the new tetromino blocks are colliding with the existing blocks on the board. If a collision is detected, we can undo the move by setting the tetromino’s position back to the previous position.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check for collision with board</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.blocks:</span></span>
<span class="line"><span style="color: #ABB2BF">            new_x_offset </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> new_block.x </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">            new_y_offset </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> new_block.y </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size</span></span>
<span class="line"><span style="color: #ABB2BF">            new_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> new_x_offset, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> new_y_offset,</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">any</span><span style="color: #ABB2BF">(new_rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(existing_rect) </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> existing_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_rects):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.</span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF">x_direction, </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF">y_direction)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>We also need to check if the tetromino has collided with the bottom of the board. If it has, we add it to the board and create a new tetromino.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># check if tetromino has reached the bottom</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">any</span><span style="color: #ABB2BF">(block.y </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.block_size </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> block </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.current_tetromino.blocks):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add_to_board</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">new_tetromino</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span></code></pre>
<p>With collision detection in place, the game should now behave correctly when tetrominoes collide with the board or other blocks.</p>
<h1 id="chapter-7-building-a-flappy-bird-game">Chapter 7: Building a Flappy Bird Game</h1>
<h2 id="overview-of-flappy-bird-game">Overview of Flappy Bird game</h2>
<p>Flappy Bird is a popular mobile game where the player controls a bird and navigates it through a series of pipes without touching them. The game is played in a 2D environment and the bird’s movement is controlled by tapping the screen or pressing a key. Each pipe that the bird passes through scores a point, and the game ends if the bird collides with a pipe or the ground. In this book, we will be building a simplified version of Flappy Bird using the Pygame library in Python.</p>
<h2 id="setting-up-the-game-environment-4">Setting up the game environment</h2>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Import the required modules</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game window size</span></span>
<span class="line"><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">400</span></span>
<span class="line"><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game colors</span></span>
<span class="line"><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the game window</span></span>
<span class="line"><span style="color: #ABB2BF">window </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the game window caption</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Flappy Bird"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the clock</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the game font</span></span>
<span class="line"><span style="color: #ABB2BF">font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game variables</span></span>
<span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game functions</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">text</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">font</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    text_surface </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(text, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, color)</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text_surface.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (x, y)</span></span>
<span class="line"><span style="color: #ABB2BF">    window.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text_surface, text_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_background</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    window.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">line</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_bird</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">bird_rect</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF">, bird_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_pipes</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">pipes</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> pipe_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pipes:</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, pipe_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_pipe</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    gap_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">150</span></span>
<span class="line"><span style="color: #ABB2BF">    gap_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    top_pipe </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, gap_pos)</span></span>
<span class="line"><span style="color: #ABB2BF">    bottom_pipe </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, gap_pos </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> gap_size, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> gap_pos </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> gap_size </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> [top_pipe, bottom_pipe]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_pipes</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">pipes</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> pipe_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pipes:</span></span>
<span class="line"><span style="color: #ABB2BF">        pipe_rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">bird_rect</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">pipes</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> pipe_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pipes:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> bird_rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(pipe_rect):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> bird_rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> bird_rect.top </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                bird_rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_background</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the bird</span></span>
<span class="line"><span style="color: #ABB2BF">    bird_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_bird</span><span style="color: #ABB2BF">(bird_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create and move the pipes</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        pipes </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_pipe</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">move_pipes</span><span style="color: #ABB2BF">(pipes)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_pipes</span><span style="color: #ABB2BF">(pipes)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(bird_rect, pipes):</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the score</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score), font, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set the game speed</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">## Drawing game elements</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game functions</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">text</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">font</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    text_surface </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(text, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, color)</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text_surface.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (x, y)</span></span>
<span class="line"><span style="color: #ABB2BF">    window.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text_surface, text_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_background</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    window.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">line</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_bird</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">bird_rect</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF">, bird_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_pipes</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">pipes</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> pipe_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pipes:</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, pipe_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">## Adding game logic</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game variables</span></span>
<span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game functions</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_pipe</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    gap_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">150</span></span>
<span class="line"><span style="color: #ABB2BF">    gap_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    top_pipe </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, gap_pos)</span></span>
<span class="line"><span style="color: #ABB2BF">    bottom_pipe </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, gap_pos </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> gap_size, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> gap_pos </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> gap_size </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> [top_pipe, bottom_pipe]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move_pipes</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">pipes</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> pipe_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pipes:</span></span>
<span class="line"><span style="color: #ABB2BF">        pipe_rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">bird_rect</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">pipes</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> pipe_rect </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pipes:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> bird_rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(pipe_rect):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> bird_rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> bird_rect.top </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                bird_rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_background</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the bird</span></span>
<span class="line"><span style="color: #ABB2BF">    bird_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_bird</span><span style="color: #ABB2BF">(bird_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create and move the pipes</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        pipes </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_pipe</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">move_pipes</span><span style="color: #ABB2BF">(pipes)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_pipes</span><span style="color: #ABB2BF">(pipes)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(bird_rect, pipes):</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the score</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score), font, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set the game speed</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">## Adding sounds and music</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame mixer</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Load the sound effects and music</span></span>
<span class="line"><span style="color: #ABB2BF">wing_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"wing.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">point_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"point.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">hit_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"hit.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">music </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.music.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"music.mp3"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                bird_rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">                wing_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_background</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the bird</span></span>
<span class="line"><span style="color: #ABB2BF">    bird_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_bird</span><span style="color: #ABB2BF">(bird_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create and move the pipes</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        pipes </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_pipe</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        point_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">move_pipes</span><span style="color: #ABB2BF">(pipes)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_pipes</span><span style="color: #ABB2BF">(pipes)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(bird_rect, pipes):</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        hit_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the score</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score), font, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set the game speed</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Stop the music</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">stop</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">## Adding a game over screen</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game over function</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">game_over_screen</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_background</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the game over text</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, font, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score), font, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Press Enter to Play Again"</span><span style="color: #ABB2BF">, font, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the game speed</span></span>
<span class="line"><span style="color: #ABB2BF">        clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Reset the game variables</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Play the music</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.mixer.music.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Define the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    bird_rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">                    wing_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_background</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the bird</span></span>
<span class="line"><span style="color: #ABB2BF">        bird_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_bird</span><span style="color: #ABB2BF">(bird_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create and move the pipes</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pipes </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_pipe</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            point_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">move_pipes</span><span style="color: #ABB2BF">(pipes)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_pipes</span><span style="color: #ABB2BF">(pipes)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_collision</span><span style="color: #ABB2BF">(bird_rect, pipes):</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">            hit_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the score</span></span>
<span class="line"><span style="color: #ABB2BF">        score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score), font, </span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the game speed</span></span>
<span class="line"><span style="color: #ABB2BF">        clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Stop the music</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.mixer.music.</span><span style="color: #61AFEF">stop</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Play the game over screen</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">game_over_screen</span><span style="color: #ABB2BF">()</span></span></code></pre>
<h2 id="creating-the-flappy-bird-character-and-obstacles">Creating the Flappy Bird character and obstacles</h2>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define the bird class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Bird</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the bird images</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.images </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"bird1.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"bird2.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"bird3.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"bird4.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">        ]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the current image index</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.index </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the current image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.images[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.index]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the bird's rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">250</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the bird's velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the bird's animation speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the bird's rotation</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the bird's rotation speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle the bird's animation</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.index </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.index </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.images):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.index </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.images[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.index]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle the bird's rotation</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">30</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">90</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation_speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Rotate the bird's image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.transform.</span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.images[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.index], </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rotation)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the bird</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the bird's velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GRAVITY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Constrain the bird's position to the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Make the bird jump</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        wing_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the pipe class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Pipe</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the pipe images</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"pipe.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the pipe's rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> height </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"top"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.transform.</span><span style="color: #61AFEF">rotate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, </span><span style="color: #D19A66">180</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">PIPE_GAP</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">PIPE_GAP</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the pipe</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">PIPE_SPEED</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Remove the pipe when it goes off the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the ground class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ground</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the ground image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"ground.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the ground's rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the ground</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_SPEED</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Reset the ground position when it goes off the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the score class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Score</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the font</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"freesansbold.ttf"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game over class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">GameOver</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the font</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"freesansbold.ttf"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centery </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">pass</span></span></code></pre>
<h2 id="implementing-character-movement-and-jumping-controls">Implementing character movement and jumping controls</h2>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define the player class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image and rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial y velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the y velocity based on gravity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GRAVITY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the y position based on the y velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collision with the ground</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the y velocity to a jump velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">JUMP_VELOCITY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game over class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">GameOver</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the font</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"freesansbold.ttf"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centery </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">pass</span></span></code></pre>
<h2 id="adding-gravity-and-physics-to-character-movement">Adding gravity and physics to character movement</h2>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define the player class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image and rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial x and y velocities</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the x position based on the x velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the y velocity based on gravity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GRAVITY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the y position based on the y velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collision with the ground</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the y velocity to a jump velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">JUMP_VELOCITY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game over class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">GameOver</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the font</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"freesansbold.ttf"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centery </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">pass</span></span></code></pre>
<h2 id="using-pygames-collision-detection-to-handle-character-obstacle-collisions">Using Pygame’s collision detection to handle character-obstacle collisions</h2>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define the player class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image and rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">RED</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial x and y velocities</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the x position based on the x velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the y velocity based on gravity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GRAVITY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the y position based on the y velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collision with the ground</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GROUND_HEIGHT</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the y velocity to a jump velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">JUMP_VELOCITY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the obstacle class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image and rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">GREEN</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial x velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the x position based on the x velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity_x</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Remove the obstacle if it goes off the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the game over class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">GameOver</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the font</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"freesansbold.ttf"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centery </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the sprite groups</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">obstacles </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">player_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the player</span></span>
<span class="line"><span style="color: #ABB2BF">player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Player</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(player)</span></span>
<span class="line"><span style="color: #ABB2BF">player_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(player)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the clock</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the initial score</span></span>
<span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Start the game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                player.</span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create a new obstacle if necessary</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(obstacles) </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        obstacle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Obstacle</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(obstacle)</span></span>
<span class="line"><span style="color: #ABB2BF">        obstacles.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(obstacle)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the sprites</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collision with obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(player, obstacles, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">GameOver</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(game_over)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BLUE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the sprites</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In the updated code, we have added collision detection between the player and the obstacles using Pygame’s built-in <code>spritecollide()</code> method. If a collision occurs, we create an instance of the <code>GameOver</code> class and add it to the sprite group.</p>
<p>We have also added gravity and physics to the player’s movement, so that the player falls down if no keys are pressed.</p>
<p>Finally, we have added a jump method to the player class, which sets the y velocity to a jump velocity when the space key is pressed.</p>
<p>The code runs the game loop at 60 frames per second and waits for the next frame using Pygame’s <code>clock.tick()</code> method.</p>
<h2 id="adding-score-tracking-and-game-over-logic-2">Adding score tracking and game over logic</h2>
<p>To add score tracking and game over logic, we will make a few changes to the <code>Game</code> class.</p>
<p>First, we will add a <code>score</code> variable to keep track of the player’s score. We will initialize it to zero in the constructor, and increment it every time the player passes an obstacle.</p>
<p>Next, we will add a <code>game_over</code> method to the <code>Game</code> class, which will be called when the player collides with an obstacle. This method will create an instance of the <code>GameOver</code> class, add it to the sprite group, and set the <code>game_over</code> flag to <code>True</code>.</p>
<p>Finally, we will update the game loop to check for collisions and game over. If the game is over, we will render the game over screen and wait for the player to press a key to restart the game. If the game is not over, we will update the sprites, check for collisions, and update the score.</p>
<p>Here’s the updated code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">288</span></span>
<span class="line"><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">512</span></span>
<span class="line"><span style="color: #D19A66">GRAVITY</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.25</span></span>
<span class="line"><span style="color: #D19A66">JUMP_VELOCITY</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">4.5</span></span>
<span class="line"><span style="color: #D19A66">OBSTACLE_GAP</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #D19A66">OBSTACLE_SPEED</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the image and set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"bird.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Apply gravity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">GRAVITY</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check if the player has gone out of the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">JUMP_VELOCITY</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the image and set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([width, height])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">OBSTACLE_SPEED</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">GameOver</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the image and set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"gameover.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.height </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the player sprite</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Player</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the sprite groups</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Add the player to the sprite groups</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the game over flag</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the clock</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Start the game</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #56B6C2">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player.</span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Add new obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles) </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles.</span><span style="color: #61AFEF">sprites</span><span style="color: #ABB2BF">()[</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">OBSTACLE_GAP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                gap_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                obstacle_top </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, gap_y)</span></span>
<span class="line"><span style="color: #ABB2BF">                obstacle_bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">, gap_y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">OBSTACLE_GAP</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> gap_y </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">OBSTACLE_GAP</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(obstacle_top, obstacle_bottom)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(obstacle_top, obstacle_bottom)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the sprites</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(</span><span style="color: #61AFEF">GameOver</span><span style="color: #ABB2BF">())</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> obstacle </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> obstacle.rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player.rect.left </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> obstacle.scored:</span></span>
<span class="line"><span style="color: #ABB2BF">                        obstacle.scored </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Render the screen</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">            font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">format</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player.score), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw the game over screen</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span></code></pre>
<h2 id="adding-difficulty-levels-and-game-variations-4">Adding difficulty levels and game variations</h2>
<p>To add some variety to the game, we can implement different difficulty levels that affect the speed and spacing of the obstacles. We can do this by adding a new <code>difficulty</code> parameter to the <code>FlappyBirdGame</code> constructor, which determines the speed and spacing of the obstacles.</p>
<p>We can define three difficulty levels: <code>easy</code>, <code>medium</code>, and <code>hard</code>. In the <code>easy</code> level, the obstacles are spaced further apart and move slower, making it easier to navigate. In the <code>medium</code> level, the obstacles are closer together and move faster, providing a moderate challenge. In the <code>hard</code> level, the obstacles are very close together and move very fast, making it very challenging to avoid them.</p>
<p>To implement these difficulty levels, we can define a dictionary that maps each difficulty level to a set of parameters for the obstacles, such as the gap size, the speed, and the spacing between obstacles. We can then use this dictionary to set the parameters for the obstacles in the game based on the selected difficulty level.</p>
<p>Here’s the updated code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define the difficulty levels</span></span>
<span class="line"><span style="color: #D19A66">DIFFICULTIES</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">'easy'</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'gap_size'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'speed'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'spacing'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">'medium'</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'gap_size'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'speed'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'spacing'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">'hard'</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'gap_size'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'speed'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">'spacing'</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">FlappyBirdGame</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">difficulty</span><span style="color: #ABB2BF">=</span><span style="color: #98C379">'easy'</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Initialize pygame</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the screen dimensions</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the caption</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Flappy Bird"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the background color</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background_color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the player</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Player</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the sprite groups</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the game over flag</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the clock</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the difficulty parameters</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.difficulty </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> difficulty</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gap_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">DIFFICULTIES</span><span style="color: #ABB2BF">[difficulty][</span><span style="color: #98C379">'gap_size'</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">DIFFICULTIES</span><span style="color: #ABB2BF">[difficulty][</span><span style="color: #98C379">'speed'</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_spacing </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">DIFFICULTIES</span><span style="color: #ABB2BF">[difficulty][</span><span style="color: #98C379">'spacing'</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Start the game</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #56B6C2">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player.</span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Add new obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles) </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles.</span><span style="color: #61AFEF">sprites</span><span style="color: #ABB2BF">()[</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_spacing:</span></span>
<span class="line"><span style="color: #ABB2BF">                gap_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gap_size </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                obstacle_top </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, gap_y)</span></span>
<span class="line"><span style="color: #ABB2BF">                obstacle_bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">, gap_y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gap_size, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> gap_y </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gap_size)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(obstacle_top, obstacle_bottom)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(obstacle_top, obstacle_bottom)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the sprites</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Check for collisions between the bird and obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bird, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Check for collisions between the bird and the ground</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bird, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ground, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Remove obstacles that have gone off-screen</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> obstacle </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> obstacle.rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    obstacle.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Add a new obstacle every 2 seconds</span></span>
<span class="line"><span style="color: #ABB2BF">            now </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">get_ticks</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> now </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.last_obstacle_time </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_interval:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add_obstacle</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.last_obstacle_time </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> now</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Increase the score for each obstacle the bird passes</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> obstacle </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> obstacle.rect.right </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bird.rect.left </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> obstacle.passed:</span></span>
<span class="line"><span style="color: #ABB2BF">                    obstacle.passed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Increase the speed and interval of obstacles based on the score</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.difficulty </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'easy'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.difficulty </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'medium'</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_speed </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_interval </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1500</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedup_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.difficulty </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'medium'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.difficulty </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'hard'</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_speed </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_interval </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1000</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speedup_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Show the game over screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">show_game_over_screen</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">add_obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"""Add a new pair of obstacles to the game."""</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Generate a random gap position for the obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">        gap_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the top and bottom obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">        obstacle_top </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_speed, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width, gap_pos, </span><span style="color: #98C379">'top'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        obstacle_bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Obstacle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacle_speed, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width, gap_pos, </span><span style="color: #98C379">'bottom'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Add the obstacles to the game</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.obstacles.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(obstacle_top, obstacle_bottom)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(obstacle_top, obstacle_bottom)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">show_game_over_screen</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"""Show the game over screen."""</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Play the game over sound</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the game over flag to False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Clear all sprites from the game</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">empty</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the game over text</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> game_over_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the score text</span></span>
<span class="line"><span style="color: #ABB2BF">        score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        score_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> score_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Add the game over and score text to the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(game_over_text, game_over_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, score_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Wait for the player to press a key to start a new game</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">wait_for_key</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">wait_for_key</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"""Wait for the player to press a key to start a new game."""</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Loop until the player presses a key or quits the game</span></span>
<span class="line"><span style="color: #ABB2BF">        waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> waiting:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Check if the player has quit the game</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Check if the player has pressed a key</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">restart</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">restart</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"""Restart the game."""</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Reset the score and create new sprites</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">create_sprites</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Play the start game sound</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.start_game_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the game over flag to False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"""Run the game."""</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Play the start game sound</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.start_game_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Loop until the player quits the game</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">handle_events</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the sprites</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">update_sprites</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw the sprites</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">draw_sprites</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">check_collisions</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the score</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">update_score</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Show the game over screen</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">show_game_over_screen</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Quit the game</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<h2 id="improving-graphics-with-sprites-and-animations-4">Improving graphics with sprites and animations</h2>
<p>To improve the graphics of our game, we can use sprites and animations. Sprites are 2D images that are integrated into the game to represent objects, characters, and other game elements. Animations are a series of images that are displayed in sequence to create the illusion of movement.</p>
<p>In Pygame, we can create sprites using the <code>pygame.sprite.Sprite</code> class. We can then create a sprite group using the <code>pygame.sprite.Group</code> class to manage all of the sprites in our game.</p>
<p>Let’s start by creating a new sprite for our Flappy Bird character. We’ll create a new file called <code>player.py</code> to define the <code>Player</code> sprite.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the player image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"images/player.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the player's rect attribute</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the player's initial position</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">250</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the player's velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span></code></pre>
<p>In the <code>__init__</code> method, we load the player image using <code>pygame.image.load</code>, and then set the sprite’s <code>rect</code> attribute to the dimensions of the image. We also set the player’s initial position and velocity.</p>
<p>Now let’s update our <code>Game</code> class to use the <code>Player</code> sprite instead of the <code>pygame.Rect</code> object we were using before.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">from</span><span style="color: #ABB2BF"> player </span><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> Player</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the window size</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.window_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">288</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">512</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the window</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.window_size)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the window title</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Flappy Bird"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the background image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"images/background.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the player sprite</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Player</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create a sprite group for all sprites</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Add the player sprite to the group</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the clock</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Start the game</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.player.</span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the player sprite</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw all sprites</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We update the <code>Game</code> class to import the <code>Player</code> class from <code>player.py</code>. We then create a <code>Player</code> object and add it to the <code>all_sprites</code> group. In the game loop, we update the <code>all_sprites</code> group and then draw all sprites to the screen using <code>all_sprites.draw(self.screen)</code>.</p>
<p>Now we can create an animation for our Flappy Bird character. We’ll create a new file called <code>player_animation.py</code> to define the <code>PlayerAnimation</code> sprite.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">PlayerAnimation</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the animation images</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_frames </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"assets/player</span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">i</span><span style="color: #D19A66">}</span><span style="color: #98C379">.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert_alpha</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_frames.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(pygame.transform.</span><span style="color: #61AFEF">scale</span><span style="color: #ABB2BF">(image, (</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial image</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_index </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_frames[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_index]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the animation timer</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_timer </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_delay </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the animation</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_timer </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">get_time</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_timer </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_delay:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_timer </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_index </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_index </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_frames):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_index </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation_frames[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_index]</span></span></code></pre>
<h2 id="adding-background-and-other-visual-effects-2">Adding background and other visual effects</h2>
<p>To add background and other visual effects, we can create a <code>Background</code> class that will display a scrolling background image. We can also create a <code>Particle</code> class that will display particles on the screen when the player collides with an obstacle.</p>
<p>Here is an example implementation of the <code>Background</code> and <code>Particle</code> classes:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Background</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">screen_width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">screen_height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"assets/background.png"</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">convert</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_size</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> screen_width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> screen_height</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">player</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Scroll the background</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_width:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_width </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_height </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">                x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_width </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x</span></span>
<span class="line"><span style="color: #ABB2BF">                y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> j </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_height </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y</span></span>
<span class="line"><span style="color: #ABB2BF">                screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, (x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">                </span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Particle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (x, y)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.timer </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lifetime </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the particle position</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel_x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel_y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the particle timer</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.timer </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.timer </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lifetime:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In the <code>Background</code> class, we load a background image and scroll it horizontally. We then draw the background image multiple times to fill the entire screen.</p>
<p>In the <code>Particle</code> class, we create a white square image to represent the particle. We set the initial position and velocity of the particle randomly, and give it a lifetime of 100 frames. In the <code>update</code> method, we update the particle position and timer, and kill the particle if its lifetime is up. We can then create particles when the player collides with an obstacle, and add them to a <code>ParticleGroup</code> to be drawn on the screen.</p>
<h2 id="using-pygames-audio-features-to-create-immersive-sound-effects">Using Pygame’s audio features to create immersive sound effects</h2>
<p>To create immersive sound effects, we can use Pygame’s audio features to play different sounds at various points during the game. For example, we can play a sound effect when the player jumps, collides with an obstacle, or when the game ends.</p>
<p>Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Sound</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the sound effects</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.jump_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"assets/jump.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.collision_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"assets/collision.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gameover_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"assets/gameover.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">play_jump_sound</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Play the jump sound effect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.jump_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">play_collision_sound</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Play the collision sound effect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.collision_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">play_gameover_sound</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Play the gameover sound effect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gameover_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In the <code>Sound</code> class, we load three sound effects: a jump sound effect, a collision sound effect, and a game over sound effect. We then define three methods to play each of these sound effects when called.</p>
<p>To use these sound effects in the game, we can create an instance of the <code>Sound</code> class and call the appropriate method at the relevant points in the game code. For example, we can call <code>play_jump_sound</code> when the player jumps, <code>play_collision_sound</code> when the player collides with an obstacle, and <code>play_gameover_sound</code> when the game ends.</p>
<p>By using sound effects in this way, we can create a more immersive gaming experience for the player.</p>
<h2 id="adding-keyboard-and-mouse-controls-for-player-movement-1">Adding keyboard and mouse controls for player movement</h2>
<p>To add keyboard and mouse controls for player movement, we can modify the <code>Player</code> class to respond to keyboard and mouse events. Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the player animation</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">PlayerAnimation</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial position</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation.frames[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.math.</span><span style="color: #61AFEF">Vector2</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dt</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">events</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the velocity based on keyboard/mouse events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> events:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">play_jump_sound</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">play_jump_sound</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Apply gravity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the position based on velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.x </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> dt, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> dt)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the animation</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(dt)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">int</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collisions with obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">, obstacle_group, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">play_collision_sound</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>In this implementation, we’ve added an event loop to the <code>update</code> method of the <code>Player</code> class that listens for keyboard and mouse events. When the space bar is pressed or the mouse is clicked, we set the player’s y-velocity to a negative value, which causes the player to jump.</p>
<p>We’ve also added a call to the <code>Sound</code> class’s <code>play_jump_sound</code> method to play a sound effect when the player jumps.</p>
<p>In the <code>update</code> method, we’ve also updated the player’s y-velocity to simulate gravity, and updated the player’s position based on its velocity.</p>
<p>We’ve also added code to set the player’s score based on its position, and to check for collisions with obstacles using Pygame’s collision detection features. If a collision is detected, we kill the player sprite, play a collision sound effect, and return <code>True</code> to signal that the game is over.</p>
<p>By adding keyboard and mouse controls, we can give the player more options for controlling the game and provide a more immersive experience.</p>
<h2 id="adding-touch-controls-for-mobile-devices-1">Adding touch controls for mobile devices</h2>
<p>To add touch controls for mobile devices, we can modify the <code>Player</code> class to respond to touch events. Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Player</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Load the player animation</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">PlayerAnimation</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial position</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation.frames[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.math.</span><span style="color: #61AFEF">Vector2</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the initial score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dt</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">events</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the velocity based on keyboard/mouse/touch events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> events:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">play_jump_sound</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">play_jump_sound</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">FINGERDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centery:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">play_jump_sound</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Apply gravity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the position based on velocity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.x </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> dt, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.velocity.y </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> dt)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the animation</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.animation.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(dt)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">int</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collisions with obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">, obstacle_group, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">play_collision_sound</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>In this implementation, we’ve added an event loop to the <code>update</code> method of the <code>Player</code> class that listens for touch events. When a touch event occurs, we check the y-coordinate of the touch event and set the player’s y-velocity to a negative value if the touch is above the player’s center. This causes the player to jump.</p>
<p>We’ve also added a call to the <code>Sound</code> class’s <code>play_jump_sound</code> method to play a sound effect when the player jumps.</p>
<p>In the <code>update</code> method, we’ve also updated the player’s y-velocity to simulate gravity, and updated the player’s position based on its velocity.</p>
<p>We’ve also added code to set the player’s score based on its position, and to check for collisions with obstacles using Pygame’s collision detection features. If a collision is detected, we kill the player sprite, play a collision sound effect, and return <code>True</code> to signal that the game is over.</p>
<p>By adding touch controls, we can make the game playable on mobile devices and provide a more flexible and accessible user experience.</p>
<p>To make the game playable on mobile devices, we need to add touch controls. Pygame provides support for touch events, which we can use to detect user input on mobile devices.</p>
<p>We can use the <code>pygame.event.get()</code> method to get a list of all events that have occurred since the last time we checked for events. We can then iterate through this list and check if any of the events are touch events.</p>
<p>Here’s an example of how we can add touch controls to our game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the screen dimensions</span></span>
<span class="line"><span style="color: #ABB2BF">screen_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span></span>
<span class="line"><span style="color: #ABB2BF">screen_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((screen_width, screen_height))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the background color</span></span>
<span class="line"><span style="color: #ABB2BF">background_color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the font</span></span>
<span class="line"><span style="color: #ABB2BF">font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the clock</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the player</span></span>
<span class="line"><span style="color: #ABB2BF">player </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Player</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">obstacles </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ObstacleGroup</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the game state</span></span>
<span class="line"><span style="color: #ABB2BF">game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Get the position of the touch</span></span>
<span class="line"><span style="color: #ABB2BF">            touch_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Check if the touch was on the player</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> player.rect.</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(touch_pos):</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Make the player jump</span></span>
<span class="line"><span style="color: #ABB2BF">                player.</span><span style="color: #61AFEF">jump</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the player</span></span>
<span class="line"><span style="color: #ABB2BF">    player.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">    obstacles.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(player, obstacles, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Clear the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(background_color)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the player and obstacles</span></span>
<span class="line"><span style="color: #ABB2BF">    player.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    obstacles.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">    score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(player.score), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we use the <code>pygame.MOUSEBUTTONDOWN</code> event to detect when the user touches the screen. We use the <code>pygame.mouse.get_pos()</code> method to get the position of the touch, and then check if the touch was on the player using the <code>collidepoint()</code> method.</p>
<p>If the touch was on the player, we call the <code>jump()</code> method to make the player jump.</p>
<p>With these touch controls, the game can now be played on both desktop and mobile devices.</p>
<h2 id="optimizing-and-improving-game-performance-3">Optimizing and improving game performance</h2>
<p>Optimizing and improving game performance is an important aspect of game development. Here are some techniques you can use to make your game run smoother:</p>
<ol>
<li>
<p>Reduce the number of game objects on the screen at any given time. You can do this by removing off-screen objects, combining multiple objects into a single sprite, or removing objects that are no longer needed.</p>
</li>
<li>
<p>Use efficient data structures to store and manipulate game data. For example, use lists instead of dictionaries when the order of items is not important, or use dictionaries instead of lists when you need to look up items quickly.</p>
</li>
<li>
<p>Use Pygame’s built-in functions to optimize your code. For example, use <code>pygame.transform.scale()</code> to resize images instead of doing it manually, or use <code>pygame.Surface.convert()</code> to convert surfaces to the same pixel format as the screen.</p>
</li>
<li>
<p>Limit the number of updates per second to improve performance. You can do this by using Pygame’s <code>pygame.time.Clock.tick()</code> function to limit the frame rate of your game.</p>
</li>
<li>
<p>Use Pygame’s profiling tools to identify and optimize slow code. You can use <code>pygame.time.get_ticks()</code> to measure the time it takes to execute different parts of your code and <code>pygame.display.get_surface().get_rect()</code> to measure the time it takes to update the screen.</p>
</li>
</ol>
<p>By following these techniques, you can create games that run smoothly on a wide range of devices and platforms.</p>
<h2 id="adding-multiplayer-functionality-2">Adding multiplayer functionality</h2>
<p>Adding multiplayer functionality to a game can greatly enhance its replay value and social appeal. Here are some ways you can add multiplayer functionality to your game:</p>
<ol>
<li>
<p>Local multiplayer: This involves playing the game on the same device with multiple players. You can use Pygame’s built-in keyboard and joystick event handlers to allow multiple players to control the game at the same time.</p>
</li>
<li>
<p>Online multiplayer: This involves playing the game with other players over the internet. You can use Python’s socket module to create a server-client architecture that allows players to connect to a server and play together.</p>
</li>
<li>
<p>Bluetooth multiplayer: This involves playing the game with other players over a Bluetooth connection. You can use Python’s PyBluez module to create a Bluetooth server and client that allows players to connect and play together.</p>
</li>
<li>
<p>Multiplayer over LAN: This involves playing the game with other players over a local network. You can use Python’s socket module to create a server-client architecture that allows players to connect to a local network and play together.</p>
</li>
</ol>
<p>When adding multiplayer functionality to your game, it’s important to consider factors such as network latency, synchronization, and cheating prevention. You may also need to implement a lobby system that allows players to find and join games, and a scoring system that tracks each player’s performance. With careful planning and implementation, adding multiplayer functionality can greatly enhance the appeal of your game.</p>
<h2 id="customizing-game-settings-and-options-2">Customizing game settings and options</h2>
<p>Customizing game settings and options can greatly enhance the user experience and provide players with more control over how they play the game. Here are some ways you can add customizable settings and options to your game:</p>
<ol>
<li>
<p>Difficulty level: Allow players to choose between different difficulty levels, such as easy, medium, and hard. This can affect factors such as the speed of the game and the number of obstacles.</p>
</li>
<li>
<p>Sound settings: Allow players to adjust the volume of the game’s sound effects and music, or to turn them off completely.</p>
</li>
<li>
<p>Control settings: Allow players to customize the game’s controls to their liking, such as by remapping keyboard or joystick buttons.</p>
</li>
<li>
<p>Graphics settings: Allow players to adjust the game’s graphics settings to optimize performance on their system, such as by toggling anti-aliasing or adjusting the resolution.</p>
</li>
<li>
<p>Language settings: Allow players to choose the language in which the game is displayed.</p>
</li>
<li>
<p>Save game settings: Allow players to save their game settings and options so that they don’t need to reset them each time they play the game.</p>
</li>
</ol>
<p>By adding customizable settings and options, you can create a more personalized and enjoyable game experience for your players.</p>
<h2 id="adding-a-pause-screen-and-game-settings-menu">Adding a pause screen and game settings menu</h2>
<p>Adding a pause screen and game settings menu can further enhance the user experience and provide players with more control over the game. Here are some steps you can take to add these features to your game:</p>
<ol>
<li>
<p>Add a pause screen: When the player presses the pause button (such as the “P” key), pause the game and display a menu that allows the player to resume the game, restart the game, or return to the main menu.</p>
</li>
<li>
<p>Add a game settings menu: From the main menu or pause screen, provide the player with the option to access a game settings menu. This menu should allow the player to adjust the settings and options discussed in the previous answer.</p>
</li>
<li>
<p>Add settings and options screens: Within the game settings menu, provide the player with access to screens that allow them to adjust individual settings and options. These screens should be easy to navigate and allow the player to save their settings and options.</p>
</li>
<li>
<p>Add visual indicators: When the game is paused, display a visual indicator on the screen to indicate that the game is paused. Similarly, when the game settings menu is open, display a visual indicator on the screen to indicate that the menu is open.</p>
</li>
<li>
<p>Add sound and music controls: Within the game settings menu, provide the player with controls to adjust the volume of the game’s sound effects and music.</p>
</li>
</ol>
<p>By adding a pause screen and game settings menu, you can create a more immersive and user-friendly game experience for your players.</p>
<h2 id="adding-different-themes-and-music-tracks">Adding different themes and music tracks</h2>
<p>Adding different themes and music tracks can provide players with a unique and customizable gaming experience. Here are some steps you can take to add these features to your game:</p>
<ol>
<li>
<p>Create different themes: Create different themes for your game by changing the graphics and audio to create different visual and auditory experiences. For example, you could create a Halloween theme with spooky graphics and music, or a Christmas theme with festive graphics and music.</p>
</li>
<li>
<p>Add a theme selection menu: From the main menu or pause screen, provide the player with the option to select a theme. This menu should allow the player to preview each theme and select their preferred one.</p>
</li>
<li>
<p>Add music tracks: Create different music tracks for each theme to provide players with a unique and immersive audio experience. Make sure to create music tracks that match the theme of the game.</p>
</li>
<li>
<p>Add a music selection menu: Within the game settings menu, provide the player with the option to select a music track. This menu should allow the player to preview each track and select their preferred one.</p>
</li>
<li>
<p>Add sound effects: Create sound effects that match the theme of the game. For example, you could create spooky sound effects for the Halloween theme or jingle bells for the Christmas theme.</p>
</li>
</ol>
<p>By adding different themes and music tracks, you can create a more personalized and immersive gaming experience for your players. Make sure to test each theme and music track to ensure they work well with the game.</p>
<h2 id="implementing-a-save-game-feature-and-resume-functionality">Implementing a save game feature and resume functionality</h2>
<p>Implementing a save game feature and resume functionality can add an important layer of convenience for players who may not be able to finish a game session in one sitting. Here are the steps you can take to add this feature to your game:</p>
<ol>
<li>
<p>Create a save game file: Create a file format that can store the necessary information to resume the game at a later time. This information should include the player’s score, the game level, the position of obstacles, and any other game state information that is required.</p>
</li>
<li>
<p>Add a save game button: Add a “Save Game” button to the pause menu or main menu that allows the player to save their progress at any time during gameplay.</p>
</li>
<li>
<p>Write a save game function: Write a function that can save the current game state to a file when the “Save Game” button is clicked. This function should write the necessary information to the save game file.</p>
</li>
<li>
<p>Add a resume game button: Add a “Resume Game” button to the main menu that allows the player to resume their saved game.</p>
</li>
<li>
<p>Write a resume game function: Write a function that can read the saved game file and load the saved game state. This function should be called when the “Resume Game” button is clicked.</p>
</li>
<li>
<p>Load the saved game state: Load the saved game state into the game variables and objects so that the game can resume from the point where it was saved.</p>
</li>
</ol>
<p>By implementing a save game feature and resume functionality, you can provide players with the ability to save their progress and return to the game at a later time. Make sure to thoroughly test the feature to ensure that it works as expected.</p>
<h1 id="chapter-8-building-a-breakout-game">Chapter 8: Building a Breakout Game</h1>
<h2 id="overview-of-breakout-game">Overview of Breakout game</h2>
<p>Breakout is a classic arcade game in which the player controls a paddle at the bottom of the screen and tries to keep a ball bouncing to break a wall of bricks at the top of the screen. The game is won when all the bricks are destroyed, and lost when the player misses the ball and it goes past the paddle. The game features power-ups that can increase the size of the paddle, add extra balls, and grant special abilities. The game is known for its fast-paced action, challenging gameplay, and simple yet addictive mechanics. It was originally released by Atari in 1976 and has since been adapted to many different platforms and devices.</p>
<h2 id="setting-up-the-game-environment-5">Setting up the game environment</h2>
<p>To set up the game environment for Breakout, we will first need to import the necessary libraries, initialize Pygame, and set up the game window.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game window</span></span>
<span class="line"><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span></span>
<span class="line"><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span></span>
<span class="line"><span style="color: #ABB2BF">window </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Breakout"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the clock</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the colors</span></span>
<span class="line"><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>This code imports Pygame and sys, initializes Pygame, sets up the game window with a width of 800 pixels and a height of 600 pixels, and sets the caption of the window to “Breakout”. It also sets up a clock to control the frame rate of the game and defines two colors, black and white, that we will use for drawing the game elements.</p>
<h2 id="drawing-game-elements-4">Drawing game elements</h2>
<p>To draw the game elements for Breakout, we will need to create classes for the paddle, ball, and bricks, and then create instances of those classes and draw them on the game window.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the dimensions and color of the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the position of the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the dimensions and color of the ball</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the position and velocity of the ball</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the ball</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collisions with the walls</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">WINDOW_WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Brick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the dimensions and color of the brick</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">60</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the position of the brick</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the paddle, ball, and bricks</span></span>
<span class="line"><span style="color: #ABB2BF">paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">bricks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        brick </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Brick</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">25</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">25</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">65</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> j </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">25</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        bricks.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(brick)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Draw the game elements on the window</span></span>
<span class="line"><span style="color: #ABB2BF">window.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">BLACK</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">, paddle)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">, ball)</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> brick </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> bricks:</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(window, brick.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color), brick)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This code creates classes for the paddle, ball, and bricks, each with their own dimensions, position, and color. We then create instances of those classes and draw them on the game window using <code>pygame.draw.rect()</code>. We also create a <code>bricks</code> group to hold all of the bricks and add each brick to that group. Finally, we call <code>pygame.display.flip()</code> to update the game window with the drawn elements.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">from</span><span style="color: #ABB2BF"> pygame.locals </span><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">BreakoutGame</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set up the game window</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height))</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Breakout"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create a sprite group for all game elements</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the clock</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Start the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw elements</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen)</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">__name__</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'__main__'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    game </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">BreakoutGame</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This sets up the basic game environment with a black game window, a sprite group for all game elements, and a game loop that waits for events, draws the elements on the screen, and updates the window.</p>
<h2 id="adding-game-logic-4">Adding game logic</h2>
<p>Now that we have drawn our game elements, we need to add some game logic to make the game playable. The game logic for Breakout includes the following:</p>
<ol>
<li>The ball should move continuously and bounce off the walls, bricks, and paddle.</li>
<li>The paddle should move horizontally to prevent the ball from falling off the screen.</li>
<li>The bricks should disappear when hit by the ball.</li>
<li>The game should end when the player clears all the bricks or loses all their lives.</li>
</ol>
<p>Let’s start by implementing the ball movement. We’ll define a <code>Ball</code> class that will handle the ball’s movement and collision detection.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(surface, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Bounce off the walls</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collision with the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">PADDLE_Y</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.radius:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">PADDLE_X</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">PADDLE_X</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">PADDLE_WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collision with the bricks</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> brick </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> bricks:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> brick.</span><span style="color: #61AFEF">is_colliding</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y):</span></span>
<span class="line"><span style="color: #ABB2BF">                brick.</span><span style="color: #61AFEF">hit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span></code></pre>
<p>The <code>Ball</code> class has an <code>__init__</code> method that initializes the ball’s position, size, color, and speed. The <code>draw</code> method is responsible for drawing the ball on the game window. The <code>update</code> method is called every frame and updates the ball’s position, checks for collisions with the walls, paddle, and bricks, and changes the ball’s direction accordingly.</p>
<p>We also added collision detection between the ball and the paddle and bricks. We’ll define the <code>Brick</code> class next to handle brick collisions.</p>
<h2 id="adding-sounds-and-music-4">Adding sounds and music</h2>
<p>To make the game more engaging and exciting, we can add sound effects and background music. In Pygame, we can use the <code>pygame.mixer</code> module to load and play sound files.</p>
<p>First, we need to load the sound files we want to use. We can do this using the <code>pygame.mixer.Sound()</code> function, which takes a filename as its argument. For example, to load the sound effect for when the ball hits a brick, we can do:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">brick_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"brick_sound.wav"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>We can also load background music using the <code>pygame.mixer.music.load()</code> function. For example:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"background_music.mp3"</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>To play a sound effect, we can call the <code>play()</code> method of the <code>pygame.mixer.Sound</code> object. For example, to play the <code>brick_sound</code> effect, we can do:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">brick_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>To play background music, we can call the <code>pygame.mixer.music.play()</code> function. We can also specify whether we want the music to loop or not. For example:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">loops</span><span style="color: #56B6C2">=-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Here, the <code>loops</code> argument is set to <code>-1</code>, which means that the music will loop indefinitely.</p>
<p>To stop the music, we can call the <code>pygame.mixer.music.stop()</code> function.</p>
<p>We can add these sound effects and background music to the Breakout game to make it more immersive and engaging for the player.</p>
<h2 id="adding-a-game-over-screen-4">Adding a game over screen</h2>
<p>In the Breakout game, the game is over when the player misses the ball with the paddle and the ball goes off the bottom of the screen. In this case, we will display a “Game Over” message on the screen and give the player the option to restart the game or exit.</p>
<p>To implement this, we can define a function called <code>game_over</code> that will display the message and wait for the player to choose an option. We will use the <code>pygame.font</code> module to create a font object that we can use to render the text.</p>
<p>Here’s the code to implement the <code>game_over</code> function:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create a font object</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Render the text</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Get the text rectangle</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Center the text</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> screen.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().centerx</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect.centery </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> screen.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().centery</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the text</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Wait for a key press</span></span>
<span class="line"><span style="color: #ABB2BF">    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> waiting:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    waiting </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>In the <code>game_over</code> function, we first create a font object using the <code>pygame.font.Font</code> constructor. We pass <code>None</code> as the font file name, which tells Pygame to use the default system font. We also specify a font size of 36.</p>
<p>Next, we use the <code>font.render</code> method to create a text surface. We pass in the text to render, a Boolean value indicating whether to use anti-aliasing (smoothing) on the text, and the color of the text as an RGB tuple.</p>
<p>We then get the rectangle that encloses the text using the <code>get_rect</code> method of the text surface. We center the rectangle on the screen using its <code>centerx</code> and <code>centery</code> attributes.</p>
<p>We then draw the text surface on the screen using the <code>blit</code> method of the screen surface. We pass in the text surface and the rectangle that encloses the text.</p>
<p>We then call <code>pygame.display.flip()</code> to update the screen with the drawn elements.</p>
<p>Finally, we wait for the player to press a key to choose an option. We use a <code>while</code> loop to wait for events. We check for the <code>QUIT</code> event, which occurs when the player closes the game window. We also check for the <code>KEYDOWN</code> event, which occurs when the player presses a key. If the player presses the <code>Escape</code> key, we exit the game. If the player presses the <code>Return</code> key, we exit the loop and return to the game loop.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"""Display the game over screen."""</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Play the game over sound</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set the font and font size</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create the game over message</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over_msg </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create the message to restart the game</span></span>
<span class="line"><span style="color: #ABB2BF">    restart_msg </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Press ENTER to restart"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">WHITE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set the message positions</span></span>
<span class="line"><span style="color: #ABB2BF">    game_over_msg_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> game_over_msg.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">centerx</span><span style="color: #56B6C2">=</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">centery</span><span style="color: #56B6C2">=</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    restart_msg_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> restart_msg.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">centerx</span><span style="color: #56B6C2">=</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">centery</span><span style="color: #56B6C2">=</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height</span><span style="color: #56B6C2">/</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the messages on the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(game_over_msg, game_over_msg_pos)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(restart_msg, restart_msg_pos)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Wait for the player to press the Enter key</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span></span></code></pre>
<h2 id="creating-the-breakout-paddle-and-bricks">Creating the Breakout paddle and bricks</h2>
<p>To create the Breakout paddle and bricks, we need to define two new classes: <code>Paddle</code> and <code>Brick</code>. The <code>Paddle</code> class will represent the player’s paddle that will be used to bounce the ball back up to the bricks. The <code>Brick</code> class will represent the bricks that the player will destroy with the ball.</p>
<p>First, let’s create the <code>Paddle</code> class. This class will inherit from the <code>pygame.sprite.Sprite</code> class, and will have a <code>__init__</code> method that takes in a <code>width</code>, <code>height</code>, and <code>color</code>. We will also define a <code>rect</code> attribute for the paddle that will be used to detect collisions with the ball.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([width, height])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Next, let’s create the <code>Brick</code> class. This class will also inherit from the <code>pygame.sprite.Sprite</code> class, and will have a <code>__init__</code> method that takes in a <code>width</code>, <code>height</code>, and <code>color</code>. We will also define a <code>rect</code> attribute for the brick that will be used to detect collisions with the ball.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Brick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([width, height])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Now that we have defined the <code>Paddle</code> and <code>Brick</code> classes, let’s create some instances of them in the <code>Game</code> class. We will create a <code>paddle</code> attribute and a <code>bricks</code> attribute that will be used to store groups of paddles and bricks, respectively. We will also define a <code>create_bricks</code> method that will create a grid of bricks for the player to destroy.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set up the display</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Set the title of the window</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Breakout"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">350</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">560</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the bricks</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">create_bricks</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_bricks</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Define the colors for the bricks</span></span>
<span class="line"><span style="color: #ABB2BF">        colors </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [(</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Define the size of the bricks</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">80</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">30</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create a grid of bricks</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">                brick </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Brick</span><span style="color: #ABB2BF">(brick_width, brick_height, colors[i])</span></span>
<span class="line"><span style="color: #ABB2BF">                brick.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> j </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> (brick_width </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">                brick.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> (brick_height </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(brick)</span></span></code></pre>
<p>In the <code>create_bricks</code> method, we define a list of colors for the bricks, and a <code>brick_width</code> and <code>brick_height</code> that</p>
<p>will be used to create the bricks. We then loop through the rows and columns of the brick grid, creating a new <code>Brick</code> object for each brick and adding it to the <code>bricks</code> group.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Breakout</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_bricks</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        colors </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [(</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">                  (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">NUM_BRICKS_X</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BRICK_GAP</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">NUM_BRICKS_X</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BRICK_HEIGHT</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">NUM_BRICKS_Y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">NUM_BRICKS_X</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">                color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> colors[i </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">NUM_BRICKS_Y</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(colors))]</span></span>
<span class="line"><span style="color: #ABB2BF">                brick </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Brick</span><span style="color: #ABB2BF">(color, (j </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> (brick_width </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BRICK_GAP</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BRICK_GAP</span><span style="color: #ABB2BF">, i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> (brick_height </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BRICK_GAP</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">BRICK_GAP</span><span style="color: #ABB2BF">), brick_width, brick_height)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(brick)</span></span></code></pre>
<p>Here, <code>NUM_BRICKS_X</code> and <code>NUM_BRICKS_Y</code> are constants that represent the number of rows and columns of bricks in the grid, and <code>BRICK_GAP</code> is the gap between the bricks. We calculate the <code>brick_width</code> as the remaining space after subtracting the total gap width from the screen width, and then dividing by the number of bricks. Finally, we create a <code>Brick</code> object with the appropriate position, size, and color, and add it to the <code>bricks</code> group.</p>
<p>Next, we need to add the <code>Brick</code> class definition. A <code>Brick</code> is a subclass of <code>pygame.sprite.Sprite</code>, so it will have a <code>rect</code> attribute for its position and size, as well as an <code>image</code> attribute for its appearance. We will also add a <code>color</code> attribute to represent the brick’s color.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Brick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">position</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">topleft</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">position)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> color</span></span></code></pre>
<p>Here, we create a new surface for the brick with the given size and color, and set it as the <code>image</code> attribute. We also set the <code>rect</code> attribute to have the given position and size, and finally, we set the <code>color</code> attribute to the given color. This will allow us to detect collisions between the ball and the bricks, and remove the brick from the group when it is hit.</p>
<h2 id="implementing-paddle-movement-and-ball-bouncing">Implementing paddle movement and ball bouncing</h2>
<p>To implement paddle movement and ball bouncing, we need to add some more code to our <code>Game</code> class. First, let’s define some constants for the paddle and ball speed:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #D19A66">PADDLE_SPEED</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #D19A66">BALL_SPEED</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span></code></pre>
<p>Now let’s add some attributes to the <code>Game</code> class to keep track of the paddle and ball:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span></code></pre>
<p>We’ll initialize the paddle and ball in a new method called <code>create_paddle_and_ball</code>:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_paddle_and_ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle_color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> paddle_width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle_width,</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle_height</span></span>
<span class="line"><span style="color: #ABB2BF">        )</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create the ball</span></span>
<span class="line"><span style="color: #ABB2BF">        ball_radius </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        ball_color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen,</span></span>
<span class="line"><span style="color: #ABB2BF">            ball_color,</span></span>
<span class="line"><span style="color: #ABB2BF">            (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            ball_radius</span></span>
<span class="line"><span style="color: #ABB2BF">        )</span></span></code></pre>
<p>In the <code>update</code> method, we’ll add code to move the paddle left or right when the left or right arrow keys are pressed. We’ll also add code to make the ball bounce off the walls and the paddle:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">PADDLE_SPEED</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">PADDLE_SPEED</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Bounce the ball off the walls and the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.left </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.right </span><span style="color: #56B6C2">>=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball_speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball_speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.top </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball_speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball_speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the ball</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball_speed)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the game elements</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle)</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.center, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball_radius)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Note that we’ve added a <code>ball_speed</code> attribute to the <code>Game</code> class to keep track of the ball’s speed:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">BALL_SPEED</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">BALL_SPEED</span><span style="color: #ABB2BF">]</span></span></code></pre>
<p>We’ll also need to modify the <code>create_bricks</code> method to make the bricks into rectangles instead of circles:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_bricks</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">80</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">30</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_colors </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [(</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span></code></pre>
<p>Now that we have the paddle and ball set up, we need to implement the game physics that will allow the player to control the paddle and bounce the ball off of it. To do this, we will need to update the position of the paddle based on user input and implement collision detection between the ball and the paddle.</p>
<p>First, let’s define some variables to represent the paddle’s speed and the direction it’s moving in:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Paddle variables</span></span>
<span class="line"><span style="color: #ABB2BF">paddle_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">paddle_direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span></code></pre>
<p>We’ll use these variables to keep track of how fast the paddle is moving and in which direction it’s moving. We’ll update these variables based on user input in the game loop.</p>
<p>Next, let’s add some code to handle user input for moving the paddle. We’ll use the left and right arrow keys to move the paddle left and right, respectively:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Handle user input for moving the paddle</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle_direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle_direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYUP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> paddle_direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle_direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> paddle_direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle_direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span></code></pre>
<p>This code listens for <code>KEYDOWN</code> and <code>KEYUP</code> events for the left and right arrow keys. When the left arrow key is pressed, <code>paddle_direction</code> is set to -1, indicating that the paddle should move to the left. When the right arrow key is pressed, <code>paddle_direction</code> is set to 1, indicating that the paddle should move to the right. When the keys are released, <code>paddle_direction</code> is set back to 0, indicating that the paddle should stop moving.</p>
<p>Now, we can update the paddle’s position in the game loop based on the <code>paddle_direction</code> variable:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Update the paddle's position based on user input</span></span>
<span class="line"><span style="color: #ABB2BF">paddle_rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> paddle_direction </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> paddle_speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Keep the paddle on the screen</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> paddle_rect.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle_rect.left </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> paddle_rect.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> screen_width:</span></span>
<span class="line"><span style="color: #ABB2BF">    paddle_rect.right </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> screen_width</span></span></code></pre>
<p>This code updates the paddle’s position based on the value of <code>paddle_direction</code> and <code>paddle_speed</code>. We also add some code to keep the paddle within the bounds of the game screen.</p>
<p>Next, we need to implement collision detection between the ball and the paddle. We’ll use <code>pygame.Rect</code> objects to represent the ball and paddle, and we’ll use the <code>colliderect()</code> method to detect collisions:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Check for collision between the ball and the paddle</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball_rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle_rect):</span></span>
<span class="line"><span style="color: #ABB2BF">    ball_dy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF">ball_speed</span></span></code></pre>
<p>This code checks if the ball’s <code>Rect</code> object collides with the paddle’s <code>Rect</code> object using the <code>colliderect()</code> method. If there is a collision, we change the direction of the ball’s y velocity to make it bounce off the paddle.</p>
<p>With these changes, we should now have a working game where the player can move the paddle and bounce the ball off of it.</p>
<h2 id="adding-power-ups-and-power-downs-to-the-game">Adding power-ups and power-downs to the game</h2>
<p>To make the game more interesting and challenging, we can add power-ups and power-downs that can affect the game in different ways. For example, a power-up can make the paddle larger, the ball faster, or add extra balls on the screen. On the other hand, a power-down can make the paddle smaller, the ball slower, or subtract balls from the screen.</p>
<p>To implement power-ups and power-downs, we can create a new sprite class called <code>PowerUp</code> that inherits from <code>pygame.sprite.Sprite</code>. The <code>PowerUp</code> class will have a random effect on the game when it is collected by the player. We can create a similar class called <code>PowerDown</code> that has the opposite effect on the game.</p>
<p>Here is an example implementation of the <code>PowerUp</code> class:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">PowerUp</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span></code></pre>
<p>In this example, the <code>PowerUp</code> class has a green square image with a size of 20x20 pixels. The <code>x</code> and <code>y</code> parameters are the initial position of the power-up on the screen. The <code>update</code> method moves the power-up downwards at a speed of 5 pixels per frame.</p>
<p>To spawn power-ups and power-downs during the game, we can create a new method called <code>spawn_powerup</code> that generates a random power-up or power-down at a random location on the screen. Here is an example implementation of the <code>spawn_powerup</code> method:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">spawn_powerup</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Generate a random power-up or power-down</span></span>
<span class="line"><span style="color: #ABB2BF">    powerup_type </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">'powerup'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'powerdown'</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Generate a random position on the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width)</span></span>
<span class="line"><span style="color: #ABB2BF">    y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">randint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> powerup_type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'powerup'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        powerup </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">PowerUp</span><span style="color: #ABB2BF">(x, y)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.powerup_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(powerup)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        powerdown </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">PowerDown</span><span style="color: #ABB2BF">(x, y)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.powerdown_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(powerdown)</span></span></code></pre>
<p>In this example, the <code>spawn_powerup</code> method generates a random power-up or power-down by choosing a random value from a list. It then generates a random position on the screen using the <code>random.randint</code> method. Finally, it creates a new instance of the <code>PowerUp</code> or <code>PowerDown</code> class and adds it to the appropriate sprite group.</p>
<p>To collect power-ups and power-downs, we can modify the collision detection code to check if the player collides with a power-up or power-down sprite. If there is a collision, we can call a new method called <code>apply_powerup</code> that applies the effect of the power-up or power-down on the game. Here is an example implementation of the <code>apply_powerup</code> method:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">apply_powerup</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">powerup_type</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> powerup_type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'powerup'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Apply a random power-up effect</span></span>
<span class="line"><span style="color: #ABB2BF">        effect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">'enlarge_paddle'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'speed_up_ball'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'extra_life'</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'enlarge_paddle'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.</span><span style="color: #61AFEF">enlarge</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'speed_up_ball'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">speed_up</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'extra_life'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lives </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Apply a random power-up or power-down</span></span>
<span class="line"><span style="color: #ABB2BF">        effect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">'increase_paddle_size'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'decrease_paddle_size'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'extra_life'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'slow_ball_speed'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'fast_ball_speed'</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'increase_paddle_size'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.width </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'decrease_paddle_size'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.width </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'extra_life'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lives </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'slow_ball_speed'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.speed </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'fast_ball_speed'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.speed </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Create a new power-up sprite and add it to the power-ups group</span></span>
<span class="line"><span style="color: #ABB2BF">        power_up </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">PowerUp</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.rect.centerx, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.rect.centery, effect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.power_ups.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(power_up)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions between the ball and the power-ups</span></span>
<span class="line"><span style="color: #ABB2BF">    power_up_collisions </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.power_ups, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> power_up </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> power_up_collisions:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">apply_power_up</span><span style="color: #ABB2BF">(power_up.effect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">apply_power_up</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">effect</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"""</span></span>
<span class="line"><span style="color: #98C379">    Apply the effect of a power-up or power-down.</span></span>
<span class="line"><span style="color: #98C379">    """</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'increase_paddle_size'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.width </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'decrease_paddle_size'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.width </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'extra_life'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lives </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'slow_ball_speed'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.speed </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> effect </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'fast_ball_speed'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.speed </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"""</span></span>
<span class="line"><span style="color: #98C379">    Update the game state.</span></span>
<span class="line"><span style="color: #98C379">    """</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Move the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.</span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.</span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions between the ball and the walls, paddle, and bricks</span></span>
<span class="line"><span style="color: #ABB2BF">    wall_collisions </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.walls, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> wall_collisions:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    paddle_collisions </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle_group, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> paddle_collisions:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    brick_collisions </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">groupcollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball_group, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> brick </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> brick_collisions:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">create_power_up</span><span style="color: #ABB2BF">(brick.rect.centerx, brick.rect.centery)</span></span>
<span class="line"><span style="color: #ABB2BF">        brick.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions between the ball and the bottom wall</span></span>
<span class="line"><span style="color: #ABB2BF">    bottom_wall_collisions </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bottom_wall_group, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> bottom_wall_collisions:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lives </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.lives </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.ball.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle.</span><span style="color: #61AFEF">reset</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the sprites</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the score text</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Score: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score), </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score_text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set the clock speed</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span></code></pre>
<h2 id="creating-different-brick-types-with-varying-toughness">Creating different brick types with varying toughness</h2>
<p>To create different brick types with varying toughness, we can modify the <code>Brick</code> class to include a <code>strength</code> attribute. The strength represents how many hits the brick can take before it breaks. We can also modify the <code>create_bricks</code> method to randomly assign a strength value to each brick based on a predefined probability distribution.</p>
<p>Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Brick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">strength</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">([width, height])</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.strength </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> strength</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">BreakoutGame</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">create_bricks</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_bricks</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">80</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">30</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_colors </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [(</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_strengths </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">]  </span><span style="color: #7F848E; font-style: italic"># Probability distribution of brick strengths</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">                color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(brick_colors)</span></span>
<span class="line"><span style="color: #ABB2BF">                strength </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(brick_strengths)</span></span>
<span class="line"><span style="color: #ABB2BF">                brick </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Brick</span><span style="color: #ABB2BF">(color, j </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> brick_width, i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> brick_height, brick_width, brick_height, strength)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.all_sprites.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(brick)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(brick)</span></span></code></pre>
<p>In this example, we define a probability distribution of brick strengths using the <code>brick_strengths</code> list. Each element in the list represents a different strength value, and the frequency of the element in the list represents the probability of a brick having that strength.</p>
<p>When creating each brick in the <code>create_bricks</code> method, we randomly choose a strength value from the <code>brick_strengths</code> list using the <code>random.choice</code> function. The chosen strength value is then assigned to the <code>strength</code> attribute of the brick object.</p>
<h2 id="adding-levels-and-game-progression">Adding levels and game progression</h2>
<p>To add levels and game progression to Breakout, we need to create multiple levels with increasing difficulty, and add a way for the player to progress through the levels.</p>
<p>We can define each level as a list of bricks, where each brick has its own attributes, such as color and toughness. We can then create a <code>levels</code> list that contains each level.</p>
<p>To implement level progression, we can keep track of the current level and the number of remaining bricks. When the player breaks all the bricks in the current level, we can increment the current level and reset the number of remaining bricks. If the player completes all levels, we can display a “You Win!” message and end the game.</p>
<p>Here is some sample code that demonstrates how to add levels and game progression to Breakout:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define levels</span></span>
<span class="line"><span style="color: #ABB2BF">levels </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Level 1</span></span>
<span class="line"><span style="color: #ABB2BF">    [</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],  </span><span style="color: #7F848E; font-style: italic"># 1-hit brick, red</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],  </span><span style="color: #7F848E; font-style: italic"># 2-hit brick, orange</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],  </span><span style="color: #7F848E; font-style: italic"># 3-hit brick, yellow</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],  </span><span style="color: #7F848E; font-style: italic"># 4-hit brick, green</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],  </span><span style="color: #7F848E; font-style: italic"># 5-hit brick, blue</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Level 2</span></span>
<span class="line"><span style="color: #ABB2BF">    [</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],  </span><span style="color: #7F848E; font-style: italic"># 6-hit brick, purple</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Level 3</span></span>
<span class="line"><span style="color: #ABB2BF">    [</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">7</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">)],  </span><span style="color: #7F848E; font-style: italic"># Indestructible brick, gray</span></span>
<span class="line"><span style="color: #ABB2BF">        [</span><span style="color: #D19A66">7</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize level and remaining bricks</span></span>
<span class="line"><span style="color: #ABB2BF">current_level </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">remaining_bricks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(levels[current_level])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw elements</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_bricks</span><span style="color: #ABB2BF">(levels[current_level])</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_paddle</span><span style="color: #ABB2BF">(paddle)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_ball</span><span style="color: #ABB2BF">(ball)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update elements</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">update_paddle</span><span style="color: #ABB2BF">(paddle)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">update_ball</span><span style="color: #ABB2BF">(ball)</span></span>
<span class="line"><span style="color: #ABB2BF">    handle</span></span></code></pre>
<h2 id="implementing-score-tracking-and-high-score-display">Implementing score tracking and high score display</h2>
<p>To implement score tracking, we need to keep track of the score variable throughout the game. We can initialize it to zero at the beginning of the game and increment it whenever a brick is hit. We can display the score on the game screen using Pygame’s <code>Font</code> and <code>render</code> functions.</p>
<p>We can also implement a high score system where the highest score achieved is stored and displayed on the game screen. We can use Python’s built-in <code>json</code> module to read and write the high score from a JSON file.</p>
<p>Here’s some code to implement score tracking and high score display in our Breakout game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Initialize score and high score</span></span>
<span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Load high score from file</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">try</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'high_score.json'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'r'</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> f:</span></span>
<span class="line"><span style="color: #ABB2BF">        high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> json.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(f)</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">except</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up font</span></span>
<span class="line"><span style="color: #ABB2BF">font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># In the brick collision handler, update the score and high score</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> brick.health </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Add to score</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update high score</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> score </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> high_score:</span></span>
<span class="line"><span style="color: #ABB2BF">        high_score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> score</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Save high score to file</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'high_score.json'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'w'</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> f:</span></span>
<span class="line"><span style="color: #ABB2BF">            json.</span><span style="color: #61AFEF">dump</span><span style="color: #ABB2BF">(high_score, f)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Display score and high score on game screen</span></span>
<span class="line"><span style="color: #ABB2BF">score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">high_score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"High Score: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">high_score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(high_score_text, (</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> high_score_text.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span></code></pre>
<p>In this code, we initialize the <code>score</code> and <code>high_score</code> variables at the beginning of the game. We then attempt to load the <code>high_score</code> from a JSON file using a <code>try-except</code> block. If the file doesn’t exist or is empty, we ignore the error and continue with the default <code>high_score</code> value of zero.</p>
<p>We also set up a Pygame font using the <code>Font</code> function with a size of 36. In the brick collision handler, we add 10 points to the <code>score</code> variable and update the <code>high_score</code> if the <code>score</code> is higher than the current <code>high_score</code>. We then save the <code>high_score</code> to a JSON file using the <code>dump</code> function.</p>
<p>Finally, we display the <code>score</code> and <code>high_score</code> on the game screen using the <code>render</code> function to create a Pygame surface with the text, and the <code>blit</code> function to draw the surface on the screen at the desired position.</p>
<h2 id="adding-a-game-pause-and-settings-menu">Adding a game pause and settings menu</h2>
<p>To add a pause feature to our game, we can check for a <code>PAUSE</code> event while the game is running. When this event occurs, we can stop updating the game and display a pause screen. We can also add a game settings menu to allow the player to change settings such as game difficulty or sound settings.</p>
<p>Here’s an example of how we can add a pause feature to our Breakout game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Add a pause screen to the game</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">pause_game</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Paused"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().center)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Wait for user input to resume or quit the game</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_p:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #61AFEF">pause_game</span><span style="color: #ABB2BF">(screen)</span></span></code></pre>
<p>In this example, we define a <code>pause_game</code> function that displays a “Paused” message on the screen and waits for the player to press the <code>Return</code> key to resume the game or the <code>Escape</code> key to quit the game. We call this function when the player presses the <code>p</code> key.</p>
<p>We can also add a game settings menu by creating a separate function that displays a menu of options and waits for the player to select an option. Here’s an example of how we can create a simple game settings menu:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Game settings menu</span></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">game_settings</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    title </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Settings"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    title_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> title.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">centerx</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().centerx, </span><span style="color: #E06C75; font-style: italic">top</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    difficulty </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #98C379">"Easy"</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">"Medium"</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">"Hard"</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">    selected_difficulty </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    difficulty_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Difficulty: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> difficulty[selected_difficulty], </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    difficulty_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> difficulty_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">centerx</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().centerx, </span><span style="color: #E06C75; font-style: italic">top</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #98C379">"On"</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">"Off"</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">    selected_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    sound_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Sound: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> sound[selected_sound], </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    sound_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> sound_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">centerx</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().centerx, </span><span style="color: #E06C75; font-style: italic">top</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    menu_items </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [(</span><span style="color: #98C379">"Difficulty"</span><span style="color: #ABB2BF">, difficulty_text, difficulty, selected_difficulty),</span></span>
<span class="line"><span style="color: #ABB2BF">                  (</span><span style="color: #98C379">"Sound"</span><span style="color: #ABB2BF">, sound_text, sound, selected_sound)]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    menu_rects </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> item </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> menu_items:</span></span>
<span class="line"><span style="color: #ABB2BF">        menu_rects.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(item[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">centerx</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().centerx, </span><span style="color: #E06C75; font-style: italic">top</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">item[</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">().bottom </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Change the selected option</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_UP</span></span>
<span class="line"><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.options)</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sound_manager.</span><span style="color: #61AFEF">play_sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'menu_move'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.options)</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sound_manager.</span><span style="color: #61AFEF">play_sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'menu_move'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sound_manager.</span><span style="color: #61AFEF">play_sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'menu_select'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.resume_game </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">show_controls_menu</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">show_sound_menu</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">show_difficulty_menu</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw the background and title</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background_image, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">draw_title</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Paused"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw the options</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i, option </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">enumerate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.options):</span></span>
<span class="line"><span style="color: #ABB2BF">                text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(option, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.text_color </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> i </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.highlight_color)</span></span>
<span class="line"><span style="color: #ABB2BF">                rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> i </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.option_spacing)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.fps)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">show_controls_menu</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">"""</span></span>
<span class="line"><span style="color: #98C379">        Show the controls menu.</span></span>
<span class="line"><span style="color: #98C379">        """</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> event.key </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> [pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF">, pygame.</span><span style="color: #D19A66">K_KP_ENTER</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sound_manager.</span><span style="color: #61AFEF">play_sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'menu_select'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw the background and title</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background_image, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">draw_title</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Controls"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Draw the controls text</span></span>
<span class="line"><span style="color: #ABB2BF">            text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Use the left and right arrow keys to move the paddle."</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.text_color)</span></span>
<span class="line"><span style="color: #ABB2BF">            rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.fps)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">show_sound_menu</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"""</span></span>
<span class="line"><span style="color: #98C379">    Show the sound settings menu.</span></span>
<span class="line"><span style="color: #98C379">    """</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_option </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> event.key </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> [pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF">, pygame.</span><span style="color: #D19A66">K_KP_ENTER</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sound_manager.</span><span style="color: #61AFEF">play_sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'menu_select'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">return</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background and title</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background_image, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">draw_title</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Sound"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the sound text</span></span>
<span class="line"><span style="color: #ABB2BF">        text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Sound settings go here."</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.text_color)</span></span>
<span class="line"><span style="color: #ABB2BF">        rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen_height </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.fps)</span></span>
<span class="line"></span></code></pre>
<h2 id="using-pygames-sprite-and-animation-features-to-improve-game-graphics">Using Pygame’s sprite and animation features to improve game graphics</h2>
<p>To improve the game graphics, we can use Pygame’s sprite and animation features to create animated sprites for our game objects. This will make the game look more visually appealing and immersive.</p>
<p>First, let’s create a new file called <code>sprites.py</code> and define a <code>SpriteSheet</code> class that will allow us to load and extract images from a sprite sheet:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">SpriteSheet</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">filename</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprite_sheet </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(filename).</span><span style="color: #61AFEF">convert</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_image</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        image.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprite_sheet, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (x, y, width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> image</span></span></code></pre>
<p>Next, let’s create a <code>Paddle</code> class that inherits from <code>pygame.sprite.Sprite</code> and uses the <code>SpriteSheet</code> class to load and animate a sprite for the paddle:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">from</span><span style="color: #ABB2BF"> sprites </span><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> SpriteSheet</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprite_sheet </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">SpriteSheet</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'paddle.png'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprite_sheet.</span><span style="color: #61AFEF">get_image</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">96</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">24</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">dx</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> dx</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">704</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">704</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">animate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">direction</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'left'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprite_sheet.</span><span style="color: #61AFEF">get_image</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">96</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">24</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">'right'</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprite_sheet.</span><span style="color: #61AFEF">get_image</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">24</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">96</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">24</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>In this code, we load a sprite sheet for the paddle and create a new <code>Paddle</code> object with an initial position of <code>(x, y)</code>. We also define an <code>update</code> method that allows us to move the paddle left and right by a given distance <code>dx</code>. We also add some boundary conditions to make sure the paddle stays within the game window.</p>
<p>We also define an <code>animate</code> method that allows us to animate the paddle sprite based on the direction of movement. If the paddle is moving left, we show the first row of the sprite sheet, and if the paddle is moving right, we show the second row of the sprite sheet.</p>
<p>Next, let’s create a <code>Ball</code> class that inherits from <code>pygame.sprite.Sprite</code> and uses the <code>SpriteSheet</code> class to load and animate a sprite for the ball:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">from</span><span style="color: #ABB2BF"> sprites </span><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> SpriteSheet</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprite_sheet </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">SpriteSheet</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'ball.png'</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.sprite_sheet.</span><span style="color: #61AFEF">get_image</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">24</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">24</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">384</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">544</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">([</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">]), </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">752</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>To improve the graphics of the game, we can use Pygame’s sprite and animation features. We can create a sprite for the ball, paddle, and bricks, and animate them when they move or get hit.</p>
<p>First, we need to create a new class for the ball sprite. We can do this by inheriting from Pygame’s <code>Sprite</code> class and adding a few properties and methods. In the <code>__init__</code> method, we set the <code>image</code> and <code>rect</code> properties of the sprite. We also set the <code>speed</code> property, which determines how fast the ball moves.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"ball.png"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">]</span></span></code></pre>
<p>Next, we can update the game loop to use the ball sprite. Instead of creating a <code>Rect</code> object for the ball, we create a <code>Ball</code> object and add it to a <code>Sprite</code> group. We can also update the ball’s position and check for collisions using the <code>update</code> method of the <code>Sprite</code> group.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Create the ball sprite</span></span>
<span class="line"><span style="color: #ABB2BF">ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">400</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create a group for the ball sprite</span></span>
<span class="line"><span style="color: #ABB2BF">ball_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">ball_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(ball)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the ball sprite</span></span>
<span class="line"><span style="color: #ABB2BF">    ball_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the ball sprite</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(ball.image, ball.rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Wait for the next frame</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>We can do the same thing for the paddle and bricks. We create new classes for these sprites, set their images and properties in the <code>__init__</code> method, and add them to <code>Sprite</code> groups.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"paddle.png"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Brick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.hits </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span></code></pre>
<p>In the game loop, we can update and draw the sprites in the same way as before. We can also use <code>pygame.sprite.collide_rect</code> to check for collisions between the ball and other sprites.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Create the paddle sprite</span></span>
<span class="line"><span style="color: #ABB2BF">paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">250</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">570</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create a group for the paddle sprite</span></span>
<span class="line"><span style="color: #ABB2BF">paddle_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">paddle_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(paddle)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the brick sprites</span></span>
<span class="line"><span style="color: #ABB2BF">bricks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> j </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        brick </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Brick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF">i</span><span style="color: #56B6C2">*</span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF">j</span><span style="color: #56B6C2">*</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, brick_colors[j])</span></span>
<span class="line"><span style="color: #ABB2BF">        bricks.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(brick)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create a group for the brick sprites</span></span>
<span class="line"><span style="color: #ABB2BF">brick_group </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">brick_group.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(bricks)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span></code></pre>
<h2 id="adding-background-and-particle-effects">Adding background and particle effects</h2>
<p>To add a background to our Breakout game, we need to load an image file and blit it onto the game window surface. We can do this in the <code>Game</code> class by adding a <code>background</code> attribute and initializing it with the image file in the <code>__init__</code> method:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"background.png"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span></code></pre>
<p>We can then blit the background onto the screen surface before drawing the other game elements in the <code>run</code> method:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># draw other game elements</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># ...</span></span></code></pre>
<p>Next, we can add particle effects when the ball collides with a brick or a power-up. We can create a <code>Particle</code> class that represents a single particle and add a <code>particles</code> group to the game to manage all the particles on the screen.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Particle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF">random.</span><span style="color: #61AFEF">uniform</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">), random.</span><span style="color: #61AFEF">uniform</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2.5</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gravity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gravity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Game</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.background </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"background.png"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particles </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_particles</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">n</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(n):</span></span>
<span class="line"><span style="color: #ABB2BF">            particle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Particle</span><span style="color: #ABB2BF">(x, y, color)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particles.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(particle)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handle_collisions</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> brick:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> brick.toughness </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                brick.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">create_particles</span><span style="color: #ABB2BF">(brick.rect.centerx, brick.rect.centery, brick.color, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                brick.toughness </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> powerup:</span></span>
<span class="line"><span style="color: #ABB2BF">            powerup.</span><span style="color: #61AFEF">apply</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            powerup.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">create_particles</span><span style="color: #ABB2BF">(powerup.rect.centerx, powerup.rect.centery, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">run</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.running:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particles.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particles.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.screen)</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># ...</span></span></code></pre>
<p>In the <code>create_particles</code> method, we create <code>n</code> particles with a given <code>color</code> and starting position <code>(x, y)</code> and add them to the <code>particles</code> group. In the <code>handle_collisions</code> method, we create particles when a brick or a power-up is destroyed.</p>
<p>Finally, in the game loop, we update and draw the particles before updating and drawing the other game elements.</p>
<p>To add particle effects, we first create a new <code>Particle</code> class to represent individual particles.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Particle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">pos</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">8</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">8</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">pos)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [random.</span><span style="color: #61AFEF">uniform</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">), random.</span><span style="color: #61AFEF">uniform</span><span style="color: #ABB2BF">(</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gravity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.gravity</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed)</span></span></code></pre>
<p>The <code>Particle</code> class has an <code>__init__</code> method that takes a position and color argument to create a new particle. We create a new surface for the particle and fill it with the specified color. We set the particle’s initial position to the specified position and its speed to a random value in both the x and y directions. We also set a gravity constant for the particle to simulate the effect of gravity.</p>
<p>We also define an <code>update</code> method for the particle. In this method, we update the particle’s speed by adding the gravity constant to its y-speed. We then move the particle’s rectangle using its speed.</p>
<p>Next, we add a <code>ParticleEffect</code> class to manage a group of particles.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">ParticleEffect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Group</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">pos</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">colors</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.particle_list </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">            color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(colors)</span></span>
<span class="line"><span style="color: #ABB2BF">            particle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Particle</span><span style="color: #ABB2BF">(pos, color)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(particle)</span></span></code></pre>
<p>The <code>ParticleEffect</code> class has an <code>__init__</code> method that takes a position and a list of colors as arguments to create a new particle effect. We initialize the particle group and create 20 particles using the specified colors at the specified position. We then add these particles to the group.</p>
<p>Now, we can use the <code>ParticleEffect</code> class to create particle effects whenever we need them. For example, when a brick is destroyed, we can create a particle effect at the brick’s position.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># If the ball collides with a brick, remove the brick and create a particle effect</span></span>
<span class="line"><span style="color: #ABB2BF">        brick </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollideany</span><span style="color: #ABB2BF">(ball, bricks)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> brick:</span></span>
<span class="line"><span style="color: #ABB2BF">            brick.</span><span style="color: #61AFEF">effect</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.effects)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> brick.points</span></span>
<span class="line"><span style="color: #ABB2BF">            brick.</span><span style="color: #61AFEF">kill</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.effects.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(</span><span style="color: #61AFEF">ParticleEffect</span><span style="color: #ABB2BF">(brick.rect.center, brick.colors))</span></span></code></pre>
<p>In the <code>Brick</code> class, we add a call to <code>ParticleEffect</code> when the brick is destroyed. We pass in the brick’s center position and its color list to create a new particle effect at the brick’s position.</p>
<p>To add a background effect, we can create a new <code>Background</code> class that will fill the screen with a moving background image.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Background</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">image_path</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">speed</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(image_path)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span></code></pre>
<p>The <code>Background</code> class has an <code>__init__</code> method that takes an image path and a speed as arguments to create a new background. We load the specified image and set the sprite’s rectangle to match the image’s size. We also set the background’s speed to the specified value.</p>
<p>We define an <code>update</code> method for the background. In this method, we move the background’s rectangle to the left using its speed. If the</p>
<h2 id="using-pygames-physics-engine-to-create-realistic-ball-movement-and-collisions">Using Pygame’s physics engine to create realistic ball movement and collisions</h2>
<p>To create more realistic ball movement and collisions, we can use Pygame’s built-in physics engine. We can do this by using the <code>pygame.math.Vector2</code> class to represent the position and velocity of the ball, and then updating the position and velocity based on the laws of physics.</p>
<p>First, let’s create a <code>Ball</code> class that uses vectors to represent its position and velocity:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">400</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.math.</span><span style="color: #61AFEF">Vector2</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.center)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.math.</span><span style="color: #61AFEF">Vector2</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.pos </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.pos</span></span></code></pre>
<p>In this class, we create a surface for the ball, set its initial position and velocity, and use <code>pygame.math.Vector2</code> to represent its position and velocity.</p>
<p>In the <code>update</code> method, we update the position of the ball by adding its velocity to its position vector, and then update its rect position using the new position vector. This ensures that the ball moves according to its velocity.</p>
<p>Now, let’s add some collision detection and handling to the <code>Ball</code> class:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">bricks</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">400</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.math.</span><span style="color: #61AFEF">Vector2</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.center)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.math.</span><span style="color: #61AFEF">Vector2</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> bricks</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.pos </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.center </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.pos</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collision with bricks</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_hit </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> brick_hit:</span></span>
<span class="line"><span style="color: #ABB2BF">            brick_hit[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">hit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collision with walls</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collision with paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle_hit </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.paddle, </span><span style="color: #D19A66">False</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> paddle_hit:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">*=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">            diff </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> paddle_hit[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].rect.centerx</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.vel[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> diff </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span></code></pre>
<p>In this updated <code>Ball</code> class, we check for collision with bricks, walls, and the paddle using Pygame’s <code>spritecollide</code> function. If the ball collides with a brick, we call its <code>hit</code> method (which we will define later) and change the ball’s y velocity. If the ball collides with a wall, we change its x velocity. If the ball collides with the paddle, we change its y velocity based on the angle of the collision.</p>
<p>Finally, let’s create a <code>Brick</code> class with a <code>hit</code> method that reduces its toughness and changes its color:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Brick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">toughness</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">topleft</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"></span></code></pre>
<p>In order to create realistic ball movement and collisions, we can make use of Pygame’s built-in physics engine, Pygame Physics Engine (Pymunk).</p>
<p>To use Pymunk, we first need to install it. We can do this by running the following command in our terminal:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">pip install pymunk</span></span></code></pre>
<p>Once Pymunk is installed, we can import it in our code and create a Pymunk space object to handle our physics calculations.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pymunk</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create a Pymunk space object</span></span>
<span class="line"><span style="color: #ABB2BF">space </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pymunk.</span><span style="color: #61AFEF">Space</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We can then define our game elements as Pymunk bodies and shapes, and add them to the Pymunk space. For example, we can create a Pymunk body for the ball, with a circle shape to represent its collision area:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">ball_body </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pymunk.</span><span style="color: #61AFEF">Body</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">ball_shape </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pymunk.</span><span style="color: #61AFEF">Circle</span><span style="color: #ABB2BF">(ball_body, </span><span style="color: #E06C75; font-style: italic">radius</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">ball_shape.elasticity </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1.0</span><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic"># make the ball bounce perfectly off other objects</span></span>
<span class="line"><span style="color: #ABB2BF">ball_shape.friction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.0</span><span style="color: #ABB2BF">   </span><span style="color: #7F848E; font-style: italic"># make the ball slide easily off other objects</span></span>
<span class="line"><span style="color: #ABB2BF">space.</span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">(ball_body, ball_shape)</span></span></code></pre>
<p>To update the ball’s position and handle collisions, we can use Pymunk’s <code>step</code> method in our game loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Update the Pymunk physics simulation</span></span>
<span class="line"><span style="color: #ABB2BF">space.</span><span style="color: #61AFEF">step</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">60.0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Update the ball's position based on its Pymunk body</span></span>
<span class="line"><span style="color: #ABB2BF">ball_rect.x, ball_rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> ball_body.position</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Check for collisions with other Pymunk shapes</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> arbiter </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> space.arbiters:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball_shape </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> arbiter.shapes:</span></span>
<span class="line"><span style="color: #ABB2BF">        other_shape </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> arbiter.shapes[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> arbiter.shapes[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> ball_shape </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF"> arbiter.shapes[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># handle collision with other object</span></span></code></pre>
<p>Using Pymunk can help us create a more realistic and satisfying game experience, with accurate physics-based movement and collisions.</p>
<h2 id="adding-multiplayer-and-co-op-modes">Adding multiplayer and co-op modes</h2>
<p>To add multiplayer and co-op modes to the Breakout game, we will need to modify the game logic and introduce network communication between the players.</p>
<p>For a multiplayer mode, we can have two or more players connected over a network, where each player controls their own paddle and tries to destroy the bricks on their side of the screen. The game will end when all the bricks on one side of the screen are destroyed.</p>
<p>To implement this, we will need to set up a network connection between the players, and have them send messages to each other to update the game state. We can use Python’s built-in <code>socket</code> module to create a server that listens for connections from clients, and have each client send updates to the server. The server will then broadcast the updates to all the clients, so that each player sees the same game state.</p>
<p>For a co-op mode, we can have two players controlling a single paddle, trying to destroy the bricks together. This mode will require some modifications to the game logic, as we will need to keep track of the position of the paddle based on the input from both players. We can use Pygame’s event handling system to detect input from multiple sources, and use this to update the paddle position.</p>
<p>In addition to the game logic changes, we will also need to modify the game interface to display information about the other players, such as their score and lives remaining. We can use Pygame’s <code>Surface</code> class to create a separate display for each player, and update these displays with the relevant information.</p>
<p>Overall, adding multiplayer and co-op modes will require significant modifications to the game code, but can greatly enhance the replayability and fun factor of the game.</p>
<h2 id="implementing-artificial-intelligence-for-single-player-mode">Implementing artificial intelligence for single player mode</h2>
<p>Sure! Implementing artificial intelligence for single player mode would add a new level of challenge and variety to the game. Here’s an example of how it could be done:</p>
<ol>
<li>
<p>Define the AI class: We can create a new class called <code>AIPaddle</code> that will control the movement of the paddle for the AI player. It will inherit from the <code>Paddle</code> class and override the <code>update()</code> method to implement the AI logic.</p>
</li>
<li>
<p>Implement the AI logic: In the <code>update()</code> method of the <code>AIPaddle</code> class, we can calculate the position of the ball and move the paddle accordingly. For example, if the ball is moving towards the left, we can move the paddle towards the left as well to intercept the ball.</p>
</li>
<li>
<p>Instantiate the AI paddle: In the game loop, we can create a new instance of the <code>AIPaddle</code> class and add it to the sprite group along with the other game elements.</p>
</li>
</ol>
<p>Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define the AI paddle class</span></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">AIPaddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(x, y)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">ball</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Calculate the position of the ball</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.speed[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Ball is moving towards the right, center the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">400</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Ball is moving towards the left, move the paddle towards the left</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.centerx </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> ball.rect.centerx </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the game window</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Breakout"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the game elements</span></span>
<span class="line"><span style="color: #ABB2BF">player_paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">350</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">550</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">ai_paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">AIPaddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">350</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">400</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create the sprite groups</span></span>
<span class="line"><span style="color: #ABB2BF">all_sprites </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.sprite.</span><span style="color: #61AFEF">Group</span><span style="color: #ABB2BF">(player_paddle, ai_paddle, ball)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(ball)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    all_sprites.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we’ve implemented a simple AI logic that centers the paddle when the ball is moving towards the right, and moves the paddle towards the ball when it’s moving towards the left. Of course, this can be further improved and made more complex depending on the desired level of difficulty.</p>
<h2 id="adding-customization-options-for-paddle-and-ball">Adding customization options for paddle and ball</h2>
<p>To add customization options for paddle and ball, we can create separate classes for them, each with their own properties and methods. These classes can be instantiated with different parameters to create different variations of the paddle and ball.</p>
<p>For example, let’s create a <code>Paddle</code> class with properties for its size, color, and speed. We can also add a method to handle user input for moving the paddle:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">speed</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">topleft</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">move</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">direction</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"left"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> direction </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"right"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Keep the paddle inside the screen bounds</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span></span></code></pre>
<p>Similarly, we can create a <code>Ball</code> class with properties for its size, color, speed, and bounce angle. We can also add methods for updating its position and handling collisions with the paddle and bricks:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">size</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">speed</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">angle</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((size, size))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> angle</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the ball based on its speed and angle</span></span>
<span class="line"><span style="color: #ABB2BF">        dx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> math.</span><span style="color: #61AFEF">cos</span><span style="color: #ABB2BF">(math.</span><span style="color: #61AFEF">radians</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle))</span></span>
<span class="line"><span style="color: #ABB2BF">        dy </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> math.</span><span style="color: #61AFEF">sin</span><span style="color: #ABB2BF">(math.</span><span style="color: #61AFEF">radians</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">move_ip</span><span style="color: #ABB2BF">(dx, dy)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Bounce the ball off the walls</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.left </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.right </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">180</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">collide_paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">paddle</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Bounce the ball off the paddle</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">90</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> ((</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.centerx </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> paddle.rect.centerx) </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> paddle.rect.width) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">60</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.bottom </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> paddle.rect.top</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">collide_brick</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">brick</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Bounce the ball off the brick</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(brick.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.top </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> brick.rect.bottom</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>With these classes in place, we can create different variations of the paddle and ball by instantiating them with different parameters. For example, we can create a larger paddle with a slower speed by instantiating the <code>Paddle</code> class as follows:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">75</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Similarly, we can create a smaller ball with a faster speed and steeper bounce angle by instantiating the <code>Ball</code> class as follows:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">7</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">45</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>To add customization options for the paddle and ball, we can create separate classes for the paddle and the ball, and define their properties such as size, color, speed, and other attributes as variables. Then, we can create instances of these classes with the desired attributes and add them to the game loop.</p>
<p>For example, we can create a <code>Paddle</code> class with the following properties:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">speed</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(color)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">topleft</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> speed</span></span></code></pre>
<p>Here, we define the paddle’s <code>x</code> and <code>y</code> position, <code>width</code>, <code>height</code>, <code>color</code>, and <code>speed</code> as parameters for the constructor. We also create a surface with the specified dimensions and color, and set the paddle’s position and speed.</p>
<p>Similarly, we can create a <code>Ball</code> class with the following properties:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">pygame</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">sprite</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">Sprite</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">radius</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">speed</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">angle</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">((radius</span><span style="color: #56B6C2">*</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, radius</span><span style="color: #56B6C2">*</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> color</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, color, (radius, radius), radius)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> speed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> math.</span><span style="color: #61AFEF">radians</span><span style="color: #ABB2BF">(angle)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.direction </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [math.</span><span style="color: #61AFEF">cos</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle), </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF">math.</span><span style="color: #61AFEF">sin</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.angle)]</span></span></code></pre>
<p>Here, we define the ball’s <code>x</code> and <code>y</code> position, <code>radius</code>, <code>color</code>, <code>speed</code>, and <code>angle</code> as parameters for the constructor. We also create a surface with the specified dimensions and color, and draw a circle with the specified radius and color. We set the ball’s position, speed, angle, and direction based on the input parameters.</p>
<p>To create instances of these classes with the desired attributes, we can define the properties as variables and pass them as parameters when creating the instances. For example:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">paddle_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">paddle_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">20</span></span>
<span class="line"><span style="color: #ABB2BF">paddle_color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">paddle_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">7</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">paddle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Paddle</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> paddle_width </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, paddle_width, paddle_height, paddle_color, paddle_speed)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">ball_radius </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">ball_color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">ball_speed </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">7</span></span>
<span class="line"><span style="color: #ABB2BF">ball_angle </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">45</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">ball </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Ball</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, ball_radius, ball_color, ball_speed, ball_angle)</span></span></code></pre>
<p>Here, we define the <code>paddle_width</code>, <code>paddle_height</code>, <code>paddle_color</code>, and <code>paddle_speed</code> as variables and use them to create an instance of the <code>Paddle</code> class. Similarly, we define the <code>ball_radius</code>, <code>ball_color</code>, <code>ball_speed</code>, and <code>ball_angle</code> as variables and use them to create an instance of the <code>Ball</code> class. We can then add these instances to the game loop and use them to control the paddle and ball movements.</p>
<p>This allows for more flexibility in customizing the game, as users can choose the size, color, and speed of the paddle and ball according to their preferences.</p>
<h2 id="optimizing-game-performance-and-improving-game-physics">Optimizing game performance and improving game physics</h2>
<p>Optimizing game performance and improving game physics are crucial steps to create a smooth and engaging gameplay experience. Here are some ways to accomplish these tasks in a Breakout game:</p>
<ol>
<li>
<p>Use Pygame’s built-in clock to set a consistent frame rate for the game. By default, Pygame will try to render the game as quickly as possible, which can lead to inconsistent frame rates and gameplay issues. To set a consistent frame rate, use Pygame’s built-in clock to control the rate at which the game updates.</p>
</li>
<li>
<p>Implement collision detection between the ball and the bricks using Pygame’s <code>colliderect()</code> function. This function allows for fast and accurate collision detection between two rectangular objects.</p>
</li>
<li>
<p>Implement collision detection between the ball and the paddle using Pygame’s <code>colliderect()</code> function. To make the ball bounce in a more realistic way, you can calculate the angle at which the ball should bounce based on the position of the ball relative to the center of the paddle.</p>
</li>
<li>
<p>Use Pygame’s sprite groups to optimize rendering performance. Sprite groups are collections of sprites that can be updated and drawn in a single step, improving rendering performance.</p>
</li>
<li>
<p>Use Pygame’s <code>surfarray</code> module to manipulate pixel data directly, allowing for faster rendering of complex game elements such as particle effects.</p>
</li>
<li>
<p>Implement simple physics for the ball, such as adding gravity and air resistance. This can add realism to the ball’s movement and create a more engaging gameplay experience.</p>
</li>
<li>
<p>Limit the number of particles on screen at any given time to improve performance. You can do this by using a list to keep track of the particles and removing particles that have reached the end of their lifespan.</p>
</li>
<li>
<p>Use Pygame’s built-in profiling tools to identify and optimize performance bottlenecks. Profiling can help you identify which parts of the code are taking the most time to execute, allowing you to focus your optimization efforts where they will have the most impact.</p>
</li>
</ol>
<h2 id="adding-save-game-feature-and-resuming-functionality">Adding save game feature and resuming functionality</h2>
<p>To implement a save game feature and resuming functionality, we need to keep track of the game state and save it to a file. We can use Python’s <code>pickle</code> module to serialize and deserialize the game state.</p>
<p>First, we need to define a function that saves the game state to a file. This function should take the current game state as an argument and save it to a file using the <code>pickle.dump()</code> function. We can call this function whenever the player chooses to save the game, such as when they pause the game or quit the game.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pickle</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">save_game</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">state</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'savegame.dat'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'wb'</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> f:</span></span>
<span class="line"><span style="color: #ABB2BF">        pickle.</span><span style="color: #61AFEF">dump</span><span style="color: #ABB2BF">(state, f)</span></span></code></pre>
<p>Next, we need to define a function that loads the game state from a file. This function should open the save file using the <code>pickle.load()</code> function and return the deserialized game state. We can call this function when the player chooses to resume the game, such as when they start the game or load a saved game from the main menu.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">load_game</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">try</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'savegame.dat'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'rb'</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> f:</span></span>
<span class="line"><span style="color: #ABB2BF">            state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pickle.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(f)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> state</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">except</span><span style="color: #ABB2BF"> FileNotFoundError:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">None</span></span></code></pre>
<p>Now, we can update the game loop to check for a saved game state when the game starts, and to save the game state whenever the player chooses to save the game. We can also add a menu option to load a saved game from the main menu.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Load saved game if available</span></span>
<span class="line"><span style="color: #ABB2BF">game_state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">load_game</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_state:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">save_game</span><span style="color: #ABB2BF">(game_state)</span></span>
<span class="line"><span style="color: #ABB2BF">                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_p:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_state:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">save_game</span><span style="color: #ABB2BF">(game_state)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #61AFEF">pause_game</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_s:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_state:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">save_game</span><span style="color: #ABB2BF">(game_state)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_l:</span></span>
<span class="line"><span style="color: #ABB2BF">                state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">load_game</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> state:</span></span>
<span class="line"><span style="color: #ABB2BF">                    game_state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> state</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">start_game</span><span style="color: #ABB2BF">(game_state)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle other events (e.g. paddle movement)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game state</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw game elements</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>With these changes, the player can save the game at any time by pressing the <code>s</code> key, and can resume a saved game from the main menu by selecting the “Load Game” option. When the player quits the game or pauses the game, the current game state is saved automatically. When the player starts a new game, the game state is loaded from the save file if one exists.</p>
<p>To implement the save game feature, we need to define a function that will save the current game state to a file. We’ll call this function <code>save_game</code>. This function will take two arguments: the current level number and the player’s current score.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">save_game</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">level</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">score</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    save_data </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span><span style="color: #98C379">'level'</span><span style="color: #ABB2BF">: level, </span><span style="color: #98C379">'score'</span><span style="color: #ABB2BF">: score}</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'save.json'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'w'</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> save_file:</span></span>
<span class="line"><span style="color: #ABB2BF">        json.</span><span style="color: #61AFEF">dump</span><span style="color: #ABB2BF">(save_data, save_file)</span></span></code></pre>
<p>The <code>save_game</code> function creates a dictionary containing the current level number and score, and saves it to a JSON file called <code>save.json</code>.</p>
<p>To implement the resume functionality, we need to modify the game loop to check for the existence of the save file at the start of the game, and load the game state from the file if it exists. We’ll call this function <code>load_game</code>. This function will return a tuple containing the level number and the player’s score.</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">load_game</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">try</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">with</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">open</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">'save.json'</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">'r'</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD; font-style: italic">as</span><span style="color: #ABB2BF"> save_file:</span></span>
<span class="line"><span style="color: #ABB2BF">            save_data </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> json.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(save_file)</span></span>
<span class="line"><span style="color: #ABB2BF">            level </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> save_data[</span><span style="color: #98C379">'level'</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">            score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> save_data[</span><span style="color: #98C379">'score'</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">except</span><span style="color: #ABB2BF"> FileNotFoundError:</span></span>
<span class="line"><span style="color: #ABB2BF">        level </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> level, score</span></span></code></pre>
<p>The <code>load_game</code> function attempts to open the save file and load the game state from it. If the file doesn’t exist, it sets the level to 1 and the score to 0. It then returns a tuple containing the level and score.</p>
<p>We can now modify the game loop to use these functions:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">level, score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">load_game</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">save_game</span><span style="color: #ABB2BF">(level, score)</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #61AFEF">save_game</span><span style="color: #ABB2BF">(level, score)</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RETURN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                game_paused </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_paused</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_paused:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.mixer.music.</span><span style="color: #61AFEF">pause</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.mixer.music.</span><span style="color: #61AFEF">unpause</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> game_paused:</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background_image, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw game elements</span></span>
<span class="line"><span style="color: #ABB2BF">        paddle_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        ball_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        particle_group.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        paddle_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">        ball_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">        brick_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        particle_group.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> ball </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> ball_group:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> ball.rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(paddle.rect):</span></span>
<span class="line"><span style="color: #ABB2BF">                ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(paddle)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(pygame.sprite.</span><span style="color: #61AFEF">spritecollide</span><span style="color: #ABB2BF">(ball, brick_group, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">)) </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                ball.</span><span style="color: #61AFEF">bounce</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check for game over</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(ball_group) </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            game_over </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">break</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the display</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for game pause</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_paused:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #98C379">'Paused'</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game over screen</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">stop</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background_image, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #98C379">'Game Over'</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #98C379">'Score: '</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(score), </span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #61AFEF">draw_text</span><span style="color: #ABB2BF">(screen, </span><span style="color: #98C379">'Press Enter to Continue'</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">)</span></span></code></pre>
<h2 id="implementing-level-editor-for-creating-custom-levels">Implementing level editor for creating custom levels</h2>
<p>To implement a level editor, we can create a new mode in the game where the user can create custom levels. This mode will allow the user to place bricks, set their types and strengths, and save the level to a file.</p>
<p>Here’s an example implementation:</p>
<ol>
<li>First, we create a new mode in the game. This can be done by creating a new class that inherits from the <code>GameState</code> class:</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">LevelEditor</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">GameState</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Initialize level editor variables here</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handle_events</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">events</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle input events here</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the level editor state here</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the level editor state here</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span></code></pre>
<ol start="2">
<li>
<p>We then add a button to the main menu that allows the user to enter the level editor mode.</p>
</li>
<li>
<p>In the <code>LevelEditor</code> class, we can use Pygame’s mouse event handling functions to allow the user to place bricks on the screen. When the user clicks the mouse, we create a new <code>Brick</code> object at the mouse position and add it to a list of bricks.</p>
</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">LevelEditor</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">GameState</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handle_events</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">events</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> events:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Get the mouse position and create a new brick</span></span>
<span class="line"><span style="color: #ABB2BF">                x, y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                brick </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Brick</span><span style="color: #ABB2BF">(x, y, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(brick)</span></span></code></pre>
<ol start="4">
<li>We can use the <code>pygame.key.get_pressed()</code> function to allow the user to change the brick types and strengths. For example, we can use the number keys 1-4 to select different brick types, and the left and right arrow keys to change the brick strength.</li>
</ol>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">LevelEditor</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">GameState</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_type </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_strength </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handle_events</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">events</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> events:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Get the mouse position and create a new brick</span></span>
<span class="line"><span style="color: #ABB2BF">                x, y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                brick </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Brick</span><span style="color: #ABB2BF">(x, y, </span><span style="color: #D19A66">80</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">get_brick_color</span><span style="color: #ABB2BF">(), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_strength)</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.bricks.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(brick)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.K_1]:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_type </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> keys[pygame.K_2]:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_type </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> keys[pygame.K_3]:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_type </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> keys[pygame.K_4]:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_type </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_strength </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_strength </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_strength </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">max</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #56B6C2">min</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_strength, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_brick_color</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Return the color for the current brick type</span></span>
<span class="line"><span style="color: #ABB2BF">        colors </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [(</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> colors[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.brick_type]</span></span></code></pre>
<ol start="5">
<li>Finally, we can add a button to the level editor that allows the user to save the current level to a</li>
</ol>
<p>file. This can be done by creating a new <code>SaveButton</code> class, similar to the <code>LoadButton</code> class. The <code>SaveButton</code> class will have a <code>handle_event</code> method that is called when the button is clicked. This method will open a file dialog and allow the user to choose a filename and location to save the level data.</p>
<p>Once the user has selected a filename, the <code>handle_event</code> method will create a new <code>Level</code> object with the current state of the editor, and call its <code>save</code> method to write the level data to the file. The <code>Level</code> class can be updated to include a <code>save</code> method that writes the level data to a file in a format that can be loaded later.</p>
<p>Overall, implementing a level editor can be a great way to add replay value and user-generated content to a game. With a bit of work, it is possible to create a powerful level editor that allows players to create and share their own custom levels, and keep players engaged with a game long after they have finished the main campaign.</p>
<h2 id="adding-different-game-modes-such-as-time-attack-endless-mode-and-challenge-mode">Adding different game modes such as time attack, endless mode, and challenge mode</h2>
<p>To add different game modes, we can introduce various changes to the game mechanics and rules. Here are a few examples:</p>
<ol>
<li>
<p>Time Attack Mode: In this mode, the player must break all the bricks within a specific time limit. The player earns points based on the time remaining when they complete the level.</p>
</li>
<li>
<p>Endless Mode: In this mode, the player faces an endless stream of bricks with no end goal. The objective is to score as many points as possible before losing all the lives.</p>
</li>
<li>
<p>Challenge Mode: In this mode, the player must complete a set of increasingly difficult levels to progress. Each level has a specific objective, such as breaking all the bricks with limited lives or time.</p>
</li>
</ol>
<p>To implement these modes, we can add a new game state machine that manages the different modes. We can then modify the game logic to fit the rules of each mode.</p>
<p>For example, to implement Time Attack Mode, we can modify the <code>Game</code> class to include a timer. We can then subtract time from the timer each frame and end the game if the timer reaches zero.</p>
<p>To implement Endless Mode, we can modify the <code>Game</code> class to generate an endless stream of levels. We can also remove the win condition and allow the player to continue playing until they lose all their lives.</p>
<p>To implement Challenge Mode, we can modify the <code>Game</code> class to include a list of levels. We can then modify the win condition for each level and add a progression system that unlocks new levels as the player completes the previous ones.</p>
<p>Overall, adding different game modes can provide a more diverse and engaging experience for players. By modifying the game mechanics and rules, we can create a variety of challenges and objectives that keep players engaged and motivated to keep playing.</p>
<h2 id="adding-keyboard-and-mouse-controls-for-player-movement-2">Adding keyboard and mouse controls for player movement</h2>
<p>To add keyboard and mouse controls for player movement in the Breakout game, we first need to define the event handling in the game loop.</p>
<p>For keyboard controls, we can use the <code>pygame.key</code> module to detect when certain keys are pressed or released. We can then use these events to move the paddle left or right. Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            player.</span><span style="color: #61AFEF">move_left</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            player.</span><span style="color: #61AFEF">move_right</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYUP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">or</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            player.</span><span style="color: #61AFEF">stop_moving</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this example, we first check if the user has quit the game by pressing the ‘X’ button on the window. Then, if a key is pressed down, we check if it’s the left or right arrow key and move the player in the corresponding direction using the <code>move_left()</code> and <code>move_right()</code> methods. If a key is released, we stop the player’s movement with the <code>stop_moving()</code> method.</p>
<p>For mouse controls, we can use the <code>pygame.mouse</code> module to detect when the mouse is moved and use the position of the mouse to move the player. Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEMOTION</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        x, y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> event.pos</span></span>
<span class="line"><span style="color: #ABB2BF">        player.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span></code></pre>
<p>In this example, we first check if the user has quit the game by pressing the ‘X’ button on the window. Then, if the mouse is moved, we get the position of the mouse using <code>event.pos</code> and set the center x coordinate of the player’s rectangle to the mouse x coordinate.</p>
<p>Note that in this example, the player’s rectangle must have the <code>centerx</code> attribute defined to be able to move the player using the mouse.</p>
<h2 id="adding-touch-controls-for-mobile-devices-2">Adding touch controls for mobile devices</h2>
<p>To add touch controls for mobile devices, we need to modify the game to respond to touch events instead of mouse events. We can use Pygame’s <code>event.type</code> attribute to determine if the event is a touch event, and then get the position of the touch using the <code>event.pos</code> attribute.</p>
<p>Here is an example of how we can implement touch controls for the paddle in the Breakout game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Inside the game loop</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Check for touch events</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">FINGERDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Get the position of the touch</span></span>
<span class="line"><span style="color: #ABB2BF">        touch_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (event.x, event.y)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Move the paddle to the position of the touch</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> touch_pos[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            paddle.rect.centerx </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> touch_pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span></code></pre>
<p>In this example, we check for <code>FINGERDOWN</code> events, which are generated when the player touches the screen. We then get the position of the touch using <code>event.x</code> and <code>event.y</code>, and move the paddle to the x-position of the touch. We also check that the y-position of the touch is at the bottom of the screen, to prevent the player from accidentally moving the paddle while touching other parts of the screen.</p>
<p>We can also add touch controls for the game menu and other buttons by creating <code>pygame.Rect</code> objects for each button and checking if the touch position is inside the rect. For example:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Define the rect for the play button</span></span>
<span class="line"><span style="color: #ABB2BF">play_button_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_WIDTH</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">SCREEN_HEIGHT</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Check for touch events</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">FINGERDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Get the position of the touch</span></span>
<span class="line"><span style="color: #ABB2BF">        touch_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (event.x, event.y)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Check if the touch is inside the play button rect</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> play_button_rect.</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(touch_pos):</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Start the game</span></span>
<span class="line"><span style="color: #ABB2BF">            game_state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> GameState.</span><span style="color: #D19A66">PLAYING</span></span></code></pre>
<p>In this example, we create a <code>pygame.Rect</code> object for the play button and check if the touch position is inside the rect using the <code>collidepoint()</code> method. If the touch is inside the rect, we start the game.</p>
<h2 id="customizing-game-settings-and-options-3">Customizing game settings and options</h2>
<p>To allow for customization of game settings and options, we can create a separate settings menu that the player can access from the main menu or pause menu.</p>
<p>In the settings menu, the player can adjust various settings such as:</p>
<ul>
<li>Sound volume</li>
<li>Music volume</li>
<li>Graphics quality</li>
<li>Paddle and ball speed</li>
<li>Control options (keyboard, mouse, touch)</li>
</ul>
<p>We can use Pygame’s <code>pygame.mixer</code> module to adjust the sound and music volume, and allow the player to adjust the volume with a slider or a series of buttons.</p>
<p>For graphics quality, we can create different graphics presets (low, medium, high) that adjust the quality of the game’s graphics. This can be done by changing the resolution of the game, adjusting the detail level of textures, or disabling certain graphical effects.</p>
<p>To adjust paddle and ball speed, we can provide sliders or buttons that allow the player to adjust the speed on a scale of 1-10, with 1 being the slowest and 10 being the fastest.</p>
<p>For control options, we can provide a dropdown menu or a series of buttons that allow the player to select their preferred control method (keyboard, mouse, touch). We can also provide the option for the player to customize their control scheme, allowing them to assign different actions to different keys or buttons.</p>
<p>Once the player has made their desired changes to the settings, we can save these settings to a file, so that they persist across multiple game sessions.</p>
<h2 id="adding-different-themes-and-music-tracks-1">Adding different themes and music tracks</h2>
<p>To add different themes and music tracks to the game, we can start by creating a <code>Themes</code> class that will contain all the different themes we want to include in the game. Each theme will have its own background image and music track. We can define this class in a separate file and import it into our main game file.</p>
<p>Here’s an example implementation of the <code>Themes</code> class:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Themes</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Theme 1</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme1 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #98C379">"background_image"</span><span style="color: #ABB2BF">: pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"theme1_bg.jpg"</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #98C379">"music_track"</span><span style="color: #ABB2BF">: pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"theme1_music.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Theme 2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme2 </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #98C379">"background_image"</span><span style="color: #ABB2BF">: pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"theme2_bg.jpg"</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #98C379">"music_track"</span><span style="color: #ABB2BF">: pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"theme2_music.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Add more themes as needed</span></span></code></pre>
<p>In the above code, we define two themes, each with its own background image and music track. We can add more themes by following the same structure.</p>
<p>Next, we need to add a settings menu to our game that allows the player to select their desired theme. We can do this by adding a new button to the settings menu that opens a sub-menu with all the available themes. The player can then select their desired theme and save the settings.</p>
<p>Here’s an example implementation of the settings menu:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">SettingsMenu</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_options </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #98C379">"Theme 1"</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">"Theme 2"</span><span style="color: #ABB2BF">]  </span><span style="color: #7F848E; font-style: italic"># Add more themes as needed</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_theme </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Other settings options</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_menu</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw settings menu</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw theme option button</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Other settings options</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_theme_menu</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw theme selection menu</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Display all available themes with their respective background images</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handle_input</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">events</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> events:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONUP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                mouse_pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Check if theme option button was clicked</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_option_button_rect.</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(mouse_pos):</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">draw_theme_menu</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic"># Check if theme selection was made</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i, theme </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">enumerate</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_options):</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_selection_rects[i].</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(mouse_pos):</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_theme </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> i</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">draw_menu</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic"># Handle other input events</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">save_settings</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Save settings to a file</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Other methods for handling settings options</span></span></code></pre>
<p>In the above code, we define a <code>SettingsMenu</code> class that contains a list of available themes and a <code>selected_theme</code> attribute that stores the player’s selected theme. We also define a <code>draw_menu</code> method that draws the settings menu and a <code>draw_theme_menu</code> method that draws the theme selection menu.</p>
<p>We handle user input by checking if the theme option button was clicked, and if it was, we display the theme selection menu. We then check if a theme selection was made, and if it was, we update the <code>selected_theme</code> attribute and redraw the settings menu.</p>
<p>Finally, we define a <code>save_settings</code> method that saves the player’s selected settings to a file.</p>
<p>To use the selected theme in our game, we can modify our game loop to load the background image and music track for the selected theme. Here’s an example implementation:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">themes </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Themes</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">settings </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">SettingsMenu</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Game loop</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle user input</span></span>
<span class="line"><span style="color: #ABB2BF">    settings.</span><span style="color: #61AFEF">handle_input</span><span style="color: #ABB2BF">(pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">())</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Load selected theme</span></span>
<span class="line"><span style="color: #ABB2BF">    selected_theme </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> settings.selected_theme</span></span>
<span class="line"><span style="color: #ABB2BF">    background_image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> themes.theme_options[selected_theme][</span><span style="color: #98C379">"background_image"</span><span style="color: #ABB2BF">]</span></span></code></pre>
<p>To add music tracks for different themes, we can define a dictionary of music files for each theme, and load the appropriate music when the theme is changed. Here’s an example:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">ThemeManager</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.themes </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #98C379">"default"</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"background_image"</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">"default_background.jpg"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"brick_colors"</span><span style="color: #ABB2BF">: [(</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">165</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">                                 (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"music"</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">"default_music.mp3"</span></span>
<span class="line"><span style="color: #ABB2BF">            },</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #98C379">"beach"</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"background_image"</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">"beach_background.jpg"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"brick_colors"</span><span style="color: #ABB2BF">: [(</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">153</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">51</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">102</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">128</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">                                 (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">51</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">51</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">204</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">102</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">204</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">204</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"music"</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">"beach_music.mp3"</span></span>
<span class="line"><span style="color: #ABB2BF">            },</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #98C379">"space"</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"background_image"</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">"space_background.jpg"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"brick_colors"</span><span style="color: #ABB2BF">: [(</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">102</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">204</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">204</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">204</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">                                 (</span><span style="color: #D19A66">153</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">153</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">153</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">102</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">102</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">102</span><span style="color: #ABB2BF">), (</span><span style="color: #D19A66">51</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">51</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">51</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #98C379">"music"</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">"space_music.mp3"</span></span>
<span class="line"><span style="color: #ABB2BF">            }</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_theme </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"default"</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">set_theme</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">theme</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_theme </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> theme</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.mixer.music.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"music/"</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.themes[theme][</span><span style="color: #98C379">"music"</span><span style="color: #ABB2BF">])</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_brick_colors</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.themes[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_theme][</span><span style="color: #98C379">"brick_colors"</span><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">get_background_image</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"images/"</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.themes[</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.selected_theme][</span><span style="color: #98C379">"background_image"</span><span style="color: #ABB2BF">]</span></span></code></pre>
<p>In this example, we’ve added a “music” key to each theme, which points to the file name of the music track to be played when the theme is selected. We load the music file using Pygame’s <code>mixer</code> module, which provides functionality for playing sounds and music in the game.</p>
<p>To add a settings menu where the player can choose the theme and other options, we can create a new <code>SettingsMenu</code> class, similar to the <code>MainMenu</code> and <code>PauseMenu</code> classes. The <code>SettingsMenu</code> can have buttons to allow the player to change the theme, adjust the volume, and change other settings.</p>
<p>Here’s an example of what the <code>SettingsMenu</code> class might look like:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">SettingsMenu</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Menu</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">theme_manager</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">super</span><span style="color: #ABB2BF">().</span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(surface)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_manager </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> theme_manager</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add_button</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Theme: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_manager.selected_theme, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.change_theme)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add_button</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Volume: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(pygame.mixer.music.</span><span style="color: #61AFEF">get_volume</span><span style="color: #ABB2BF">()), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.change_volume)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">add_button</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Back to Main Menu"</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.back_to_main_menu)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">change_theme</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        themes </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_manager.themes</span></span>
<span class="line"><span style="color: #ABB2BF">        current_theme </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_manager.selected_theme</span></span>
<span class="line"><span style="color: #ABB2BF">        theme_keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">list</span><span style="color: #ABB2BF">(themes.</span><span style="color: #61AFEF">keys</span><span style="color: #ABB2BF">())</span></span>
<span class="line"><span style="color: #ABB2BF">        next_theme_index </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (theme_keys.</span><span style="color: #61AFEF">index</span><span style="color: #ABB2BF">(current_theme) </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(theme_keys)</span></span>
<span class="line"><span style="color: #ABB2BF">        next_theme </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> theme_keys[next_theme_index]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_manager.</span><span style="color: #61AFEF">set_theme</span><span style="color: #ABB2BF">(next_theme)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.buttons[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">set_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Theme: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.theme_manager.selected_theme)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">change_volume</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        current_volume </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.music.</span><span style="color: #61AFEF">get_volume</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> current_volume </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.mixer.music.</span><span style="color: #61AFEF">set_volume</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0.1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> current_volume </span><span style="color: #56B6C2">&#x3C;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.mixer.music.</span><span style="color: #61AFEF">set_volume</span><span style="color: #ABB2BF">(current_volume </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.mixer.music.</span><span style="color: #61AFEF">set_volume</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0.1</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.buttons[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">set_text</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Volume: "</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">str</span><span style="color: #ABB2BF">(pygame.mixer.music.</span><span style="color: #61AFEF">get_volume</span><span style="color: #ABB2BF">()))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">back_to_main_menu</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">close</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This <code>SettingsMenu</code> class inherits from the <code>Menu</code> class and adds buttons for changing the theme, adjusting the volume, and returning to the main menu. The <code>__init__</code> method sets up the initial buttons with their appropriate labels and callbacks. The <code>change_theme</code> method cycles through the available themes in the <code>ThemeManager</code> object and sets the chosen theme. The <code>change_volume</code> method adjusts the volume of the music player by increments of 0.1, and the <code>back_to_main_menu</code> method closes the <code>SettingsMenu</code> to return to the main menu.</p>
<h1 id="chapter-9-building-a-memory-game">Chapter 9: Building a Memory Game</h1>
<h2 id="introduction-to-memory-game">Introduction to Memory Game</h2>
<p>Memory Game is a popular game that challenges players to match pairs of cards with the same image or pattern. In this book, we will be building a simple version of the Memory Game using Python and the Pygame library. The Memory Game is a great starting point for beginners who are interested in game development, as it involves working with graphics, user input, and game logic.</p>
<p>Throughout the book, we will be building seven different versions of the Memory Game, each one adding new features and complexity to the game. By the end of the book, you will have a solid foundation in game development and the skills necessary to build your own games using Python and Pygame.</p>
<p>Before we get started, make sure you have Python 3 and Pygame installed on your machine. You can download Python from the official website, and Pygame can be installed using pip.</p>
<h2 id="setting-up-the-game-board">Setting up the game board</h2>
<p>To get started, let’s create a basic game board with a grid of cards. Each card will have a hidden image or pattern, and the player’s goal is to match pairs of cards with the same image or pattern.</p>
<p>We’ll start by importing the Pygame library and initializing it:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the size of the game window</span></span>
<span class="line"><span style="color: #ABB2BF">window_size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">500</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">500</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">(window_size)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the title of the game window</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Memory Game"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Define some colors</span></span>
<span class="line"><span style="color: #ABB2BF">black </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">white </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Next, let’s create a <code>Card</code> class to represent each card on the game board. Each card will have a position, size, and image. We’ll start with a basic <code>Card</code> class that just draws a rectangle on the screen:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Card</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(surface, white, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height))</span></span></code></pre>
<p>Now let’s create a grid of cards on the game board. We’ll define the size of the grid and the size of each card, and use a nested loop to create a <code>Card</code> object for each position on the grid:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Set the size of the grid</span></span>
<span class="line"><span style="color: #ABB2BF">rows </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span></span>
<span class="line"><span style="color: #ABB2BF">cols </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set the size of each card</span></span>
<span class="line"><span style="color: #ABB2BF">card_width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">card_height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Create a list of cards</span></span>
<span class="line"><span style="color: #ABB2BF">cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> row </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(rows):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> col </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(cols):</span></span>
<span class="line"><span style="color: #ABB2BF">        x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> col </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> card_width</span></span>
<span class="line"><span style="color: #ABB2BF">        y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> row </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> card_height</span></span>
<span class="line"><span style="color: #ABB2BF">        card </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Card</span><span style="color: #ABB2BF">(x, y, card_width, card_height)</span></span>
<span class="line"><span style="color: #ABB2BF">        cards.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card)</span></span></code></pre>
<p>Finally, we’ll add a main game loop that updates the screen and waits for the player to quit the game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Main game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">(black)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        card.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>That’s it for now! Run the code to see the basic game board with a grid of cards.</p>
<h2 id="drawing-game-elements-such-as-cards">Drawing game elements such as cards</h2>
<p>Now that we have a basic game board with a grid of cards, let’s add some graphics to make it more visually appealing. We’ll start by adding images to the <code>Card</code> class.</p>
<p>First, let’s create a list of image paths to use for the cards. You can use any images you like, but make sure they are all the same size:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># List of image paths</span></span>
<span class="line"><span style="color: #ABB2BF">image_paths </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"image1.png"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"image2.png"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"image3.png"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"image4.png"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"image5.png"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"image6.png"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"image7.png"</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"image8.png"</span></span>
<span class="line"><span style="color: #ABB2BF">]</span></span></code></pre>
<p>Next, we’ll modify the <code>Card</code> class to load a random image from the list of image paths when it is created:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> random</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Card</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_path </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(image_paths)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_path)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y))</span></span></code></pre>
<p>Now each <code>Card</code> object will have a random image loaded from the list of image paths.</p>
<p>Let’s also add a background image to the game board. Create a new file called “background.png” with the same dimensions as the game window, and add the following code to load the background image and blit it to the screen before drawing the cards:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Load the background image</span></span>
<span class="line"><span style="color: #ABB2BF">background </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"background.png"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Main game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the cards</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        card.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Now when you run the game, you should see a background image behind the grid of cards, with each card displaying a random image from the list of image paths.</p>
<h2 id="adding-game-logic-to-handle-game-mechanics-such-as-flipping-cards">Adding game logic to handle game mechanics such as flipping cards</h2>
<p>Now that we have the game board and graphics set up, let’s add some game logic to handle flipping cards and checking for matches.</p>
<p>First, let’s modify the <code>Card</code> class to keep track of whether it is flipped over or not:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Card</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_path </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> random.</span><span style="color: #61AFEF">choice</span><span style="color: #ABB2BF">(image_paths)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image_path)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped:</span></span>
<span class="line"><span style="color: #ABB2BF">            surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(surface, white, (</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.x, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.y, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height))</span></span></code></pre>
<p>Now we can flip a card by calling its <code>flip()</code> method.</p>
<p>Next, let’s add some game logic to handle flipping cards and checking for matches. We’ll create a list to keep track of the cards that are currently flipped over, and a <code>check_matches()</code> function to check if there are any pairs of cards with the same image that are flipped over:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># List of flipped cards</span></span>
<span class="line"><span style="color: #ABB2BF">flipped_cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_matches</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">global</span><span style="color: #ABB2BF"> flipped_cards</span></span>
<span class="line"><span style="color: #ABB2BF">    matches </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card1 </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> flipped_cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card2 </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> flipped_cards:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> card1 </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> card2 </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> card1.image_path </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> card2.image_path:</span></span>
<span class="line"><span style="color: #ABB2BF">                matches.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card1)</span></span>
<span class="line"><span style="color: #ABB2BF">                matches.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card2)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> matches:</span></span>
<span class="line"><span style="color: #ABB2BF">        card.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    flipped_cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span></code></pre>
<p>We’ll call the <code>check_matches()</code> function whenever a second card is flipped over. If there is a match, we’ll flip both cards back over. If there is no match, we’ll leave both cards flipped over.</p>
<p>Here’s the updated main game loop with game logic added:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Main game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONUP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> card.x </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> card.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> card_width </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> card.y </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> pos[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> card.y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> card_height:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> card.flipped:</span></span>
<span class="line"><span style="color: #ABB2BF">                        card.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                        flipped_cards.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card)</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(flipped_cards) </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                            pygame.time.</span><span style="color: #61AFEF">wait</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">500</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                            </span><span style="color: #61AFEF">check_matches</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the cards</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        card.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Now when you run the game, you should be able to flip cards over and see them flip back over if there is no match, or stay flipped over if there is a match.</p>
<p>One thing to note is that when two cards are flipped over, we’re calling <code>pygame.time.wait(500)</code> to wait for half a second before checking for matches. This gives the player a chance to see both cards before they flip back over. If you find that this delay is too long or too short, you can adjust the value to your liking.</p>
<p>We’ve now implemented the basic game mechanics of flipping cards and checking for matches. In the next section, we’ll add some finishing touches to make the game more polished, such as adding sound effects and a win condition.</p>
<h2 id="keeping-track-of-the-score-and-the-progress-of-the-game">Keeping track of the score and the progress of the game</h2>
<p>To keep track of the progress of the game, we’ll add a score counter and a win condition.</p>
<p>First, let’s add a <code>score</code> variable and a <code>draw_score()</code> function to display the score on the screen:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">36</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, black)</span></span>
<span class="line"><span style="color: #ABB2BF">    surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span></code></pre>
<p>Next, let’s modify the <code>check_matches()</code> function to increase the score whenever there is a match:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_matches</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">global</span><span style="color: #ABB2BF"> flipped_cards, score</span></span>
<span class="line"><span style="color: #ABB2BF">    matches </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card1 </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> flipped_cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card2 </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> flipped_cards:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> card1 </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> card2 </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> card1.image_path </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> card2.image_path:</span></span>
<span class="line"><span style="color: #ABB2BF">                matches.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card1)</span></span>
<span class="line"><span style="color: #ABB2BF">                matches.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card2)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(matches) </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(matches) </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> matches:</span></span>
<span class="line"><span style="color: #ABB2BF">            card.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> flipped_cards:</span></span>
<span class="line"><span style="color: #ABB2BF">            card.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    flipped_cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span></code></pre>
<p>Now the player will earn one point for each match they make.</p>
<p>Finally, let’s add a win condition that checks if all the cards have been matched:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_win</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> card.flipped:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Main game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONUP</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pos </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mouse.</span><span style="color: #61AFEF">get_pos</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> card.x </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> pos[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> card.x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> card_width </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> card.y </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> pos[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">&#x3C;=</span><span style="color: #ABB2BF"> card.y </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> card_height:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> card.flipped:</span></span>
<span class="line"><span style="color: #ABB2BF">                        card.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                        flipped_cards.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card)</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(flipped_cards) </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                            pygame.time.</span><span style="color: #61AFEF">wait</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">500</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                            </span><span style="color: #61AFEF">check_matches</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_win</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">                                </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"You win!"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">                                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the cards</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        card.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Quit Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Now when all the cards have been matched, the game will print “You win!” and exit the main game loop.</p>
<p>With these final additions, our memory game is now complete. Congratulations on building your very own game with Pygame!</p>
<h2 id="adding-sounds-and-music-to-enhance-the-game-experience">Adding sounds and music to enhance the game experience</h2>
<p>Adding sounds and music can greatly enhance the overall game experience. In this section, we’ll add sound effects for flipping cards, matching pairs, and winning the game. We’ll also add background music to play throughout the game.</p>
<p>First, let’s load our sound and music files at the beginning of the program:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Load sounds</span></span>
<span class="line"><span style="color: #ABB2BF">flip_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"flip.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">match_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"match.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">win_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"win.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Load music</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"music.mp3"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.mixer.music.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">loops</span><span style="color: #56B6C2">=-</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span></span></code></pre>
<p>Make sure to replace the filenames with the actual names of your sound and music files.</p>
<p>Next, let’s modify the <code>Card</code> class to play the flip sound effect whenever a card is flipped:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Card</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped</span></span>
<span class="line"><span style="color: #ABB2BF">        flip_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Now the flip sound effect will play each time a card is flipped.</p>
<p>Let’s also modify the <code>check_matches()</code> function to play the match sound effect whenever a pair of cards is matched:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_matches</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">global</span><span style="color: #ABB2BF"> flipped_cards, score</span></span>
<span class="line"><span style="color: #ABB2BF">    matches </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card1 </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> flipped_cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card2 </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> flipped_cards:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> card1 </span><span style="color: #56B6C2">!=</span><span style="color: #ABB2BF"> card2 </span><span style="color: #C678DD; font-style: italic">and</span><span style="color: #ABB2BF"> card1.image_path </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> card2.image_path:</span></span>
<span class="line"><span style="color: #ABB2BF">                matches.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card1)</span></span>
<span class="line"><span style="color: #ABB2BF">                matches.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card2)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(matches) </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">len</span><span style="color: #ABB2BF">(matches) </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">        match_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> matches:</span></span>
<span class="line"><span style="color: #ABB2BF">            card.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> flipped_cards:</span></span>
<span class="line"><span style="color: #ABB2BF">            card.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    flipped_cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span></code></pre>
<p>Now the match sound effect will play each time a pair of cards is matched.</p>
<p>Finally, let’s add a call to the <code>win_sound.play()</code> function when the player wins the game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Main game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># ...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the cards</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        card.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_win</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        win_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"You win!"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span></code></pre>
<p>Now the win sound effect will play when the player wins the game.</p>
<p>With these additions, our memory game now has sound effects and music to enhance the overall game experience.</p>
<h2 id="implementing-a-game-over-screen-and-options-to-restart-the-game">Implementing a game over screen and options to restart the game</h2>
<p>In this section, we’ll implement a game over screen and add options to restart the game or quit the game.</p>
<p>First, let’s define a new function to display the game over screen:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Press R to restart or Q to quit"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span></code></pre>
<p>This function displays the text “Game Over” in large font and “Press R to restart or Q to quit” in smaller font. It centers the text on the screen.</p>
<p>Next, let’s modify the main game loop to check for the game over condition:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #7F848E; font-style: italic"># Main game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_r:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #61AFEF">restart_game</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_q:</span></span>
<span class="line"><span style="color: #ABB2BF">                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_win</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        win_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"You win!"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the cards</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">        card.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Now if the <code>check_win()</code> function returns <code>True</code>, we play the win sound effect, display the game over screen, and enter a loop that waits for the player to press either “R” to restart the game or “Q” to quit the game. If the player presses “R”, we call a new function <code>restart_game()</code> that resets the game variables and starts a new game. If the player presses “Q”, we set <code>running</code> to <code>False</code>, which exits the main game loop and ends the program.</p>
<p>Let’s define the <code>restart_game()</code> function:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">restart_game</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">global</span><span style="color: #ABB2BF"> cards, flipped_cards, score</span></span>
<span class="line"><span style="color: #ABB2BF">    cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_cards</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    flipped_cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span></code></pre>
<p>This function resets the <code>cards</code>, <code>flipped_cards</code>, and <code>score</code> variables to their initial values, effectively starting a new game.</p>
<p>With these additions, our memory game now has a game over screen and options to restart the game or quit the game.</p>
<h2 id="implementing-difficulty-levels-for-the-game-to-increase-the-challenge">Implementing difficulty levels for the game to increase the challenge</h2>
<p>In this section, we’ll add difficulty levels to the game to increase the challenge. We’ll do this by modifying the <code>create_cards()</code> function to generate a different number of cards based on the selected difficulty level.</p>
<p>First, let’s define the different difficulty levels and the corresponding number of cards:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #D19A66">DIFFICULTY_LEVELS</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"Easy"</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"Medium"</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"Hard"</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">8</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span></code></pre>
<p>Next, let’s modify the <code>create_cards()</code> function to take a difficulty level parameter and generate the corresponding number of cards:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_cards</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">difficulty</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    card_images </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> i </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">range</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">DIFFICULTY_LEVELS</span><span style="color: #ABB2BF">[difficulty] </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        card_images.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"card</span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">i</span><span style="color: #D19A66">}</span><span style="color: #98C379">.png"</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        card_images.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(pygame.image.</span><span style="color: #61AFEF">load</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"card</span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">i</span><span style="color: #D19A66">}</span><span style="color: #98C379">.png"</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    random.</span><span style="color: #61AFEF">shuffle</span><span style="color: #ABB2BF">(card_images)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    x, y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CARD_START_POS</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> image </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> card_images:</span></span>
<span class="line"><span style="color: #ABB2BF">        card </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">Card</span><span style="color: #ABB2BF">(image, (x, y))</span></span>
<span class="line"><span style="color: #ABB2BF">        cards.</span><span style="color: #61AFEF">append</span><span style="color: #ABB2BF">(card)</span></span>
<span class="line"><span style="color: #ABB2BF">        x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CARD_SIZE</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CARD_GAP</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> x </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CARD_SIZE</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">></span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">SCREEN_SIZE</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">            x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CARD_START_POS</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">            y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CARD_SIZE</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">CARD_GAP</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> cards</span></span></code></pre>
<p>We modified the <code>create_cards()</code> function to take a <code>difficulty</code> parameter, which is used to determine the number of cards to generate. We replaced the hard-coded value of 4 with <code>DIFFICULTY_LEVELS[difficulty]</code> to get the corresponding number of cards.</p>
<p>Now, let’s modify the <code>main()</code> function to display the difficulty level options and allow the player to select a difficulty level:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">main</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Memory Game"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create the background</span></span>
<span class="line"><span style="color: #ABB2BF">    background </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Surface</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">SCREEN_SIZE</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    background.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create the cards</span></span>
<span class="line"><span style="color: #ABB2BF">    difficulty </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">select_difficulty</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">create_cards</span><span style="color: #ABB2BF">(difficulty)</span></span>
<span class="line"><span style="color: #ABB2BF">    flipped_cards </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create the score</span></span>
<span class="line"><span style="color: #ABB2BF">    score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Create the sounds</span></span>
<span class="line"><span style="color: #ABB2BF">    match_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"match.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    win_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"win.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    lose_sound </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.mixer.</span><span style="color: #61AFEF">Sound</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"lose.wav"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Main game loop</span></span>
<span class="line"><span style="color: #ABB2BF">    running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_r:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #61AFEF">restart_game</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_q:</span></span>
<span class="line"><span style="color: #ABB2BF">                    running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(background, (</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">check_win</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            win_sound.</span><span style="color: #61AFEF">play</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"You win!"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the cards</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> card </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> cards:</span></span>
<span class="line"><span style="color: #ABB2BF">            card.</span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the score</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_score</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We added a call to a new function <code>select_difficulty()</code> that displays the difficulty level options and waits for the player to select a difficulty level:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">select_difficulty</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Select Difficulty"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.get_height</span></span></code></pre>
<p>We added a call to a new function <code>select_difficulty()</code> that displays the difficulty level options and waits for the player to select a difficulty level:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">select_difficulty</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Select Difficulty"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    easy_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Easy"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    easy_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> easy_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    medium_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Medium"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    medium_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> medium_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    hard_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Hard"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    hard_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> hard_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_e:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"Easy"</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_m:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"Medium"</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_h:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"Hard"</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the text</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(easy_text, easy_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(medium_text, medium_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(hard_text, hard_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We defined the <code>select_difficulty()</code> function that displays the difficulty level options and waits for the player to select a difficulty level. The function creates four <code>Surface</code> objects for the text, with the <code>render()</code> function used to create a <code>Surface</code> object containing the text rendered with the specified font. We used the <code>KEYDOWN</code> event to handle the player’s input to select a difficulty level.</p>
<p>Now, when the player starts the game, they are prompted to select a difficulty level before the game board is generated. The <code>create_cards()</code> function generates the number of cards based on the selected difficulty level. This adds a level of challenge to the game and makes it more interesting.</p>
<h2 id="implementing-game-states">Implementing game states</h2>
<p>To enhance the game further, we can implement game states to handle transitions between different states of the game, such as the main menu, difficulty selection, game play, and game over.</p>
<p>We can define a dictionary to represent the different game states and their corresponding functions:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">game_states </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"main_menu"</span><span style="color: #ABB2BF">: main_menu,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"select_difficulty"</span><span style="color: #ABB2BF">: select_difficulty,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"game_play"</span><span style="color: #ABB2BF">: game_play,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">"game_over"</span><span style="color: #ABB2BF">: game_over,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span></code></pre>
<p>Each key in the dictionary represents a game state, and its value is the corresponding function that handles the state.</p>
<p>We can then define a variable to keep track of the current game state and initialize it to the main menu state:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #ABB2BF">current_state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"main_menu"</span></span></code></pre>
<p>In the game loop, we can call the function corresponding to the current game state to update and draw the screen:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Call the function corresponding to the current state</span></span>
<span class="line"><span style="color: #ABB2BF">    current_function </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> game_states[current_state]</span></span>
<span class="line"><span style="color: #ABB2BF">    current_state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">current_function</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>The <code>current_function</code> variable contains the function corresponding to the current game state. We call the function with the <code>screen</code> parameter and receive the next game state, which we store in the <code>current_state</code> variable.</p>
<p>We can define the <code>main_menu()</code> function to display the main menu and wait for the player to start the game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">main_menu</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Memory Game"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    start_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Press SPACE to start"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    start_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> start_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"select_difficulty"</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the text</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(start_text, start_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>Similarly, we can define the <code>game_over()</code> function to display the game over screen and wait for the player to restart the game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">game_over</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">score</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Game Over"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    score_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> score_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    restart_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Press SPACE to restart"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    restart_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> restart_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_SPACE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"select_difficulty"</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the text</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, score_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(restart_text, restart_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>We can also define the <code>select_difficulty()</code> function to display the difficulty selection screen and wait for the player to choose a difficulty:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">select_difficulty</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">64</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Select Difficulty"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    easy_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Easy"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    easy_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> easy_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    medium_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Medium"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    medium_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> medium_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    hard_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Hard"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    hard_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> hard_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">KEYDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">K_ESCAPE</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_1:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"game_play"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_2:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"game_play"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">6</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.key </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.K_3:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"game_play"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">8</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the background</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the text</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text, text_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(easy_text, easy_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(medium_text, medium_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(hard_text, hard_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">update</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In the <code>select_difficulty()</code> function, we display three difficulty options, and wait for the player to press the corresponding number keys (<code>1</code> for easy, <code>2</code> for medium, and <code>3</code> for hard). We then return the <code>game_play</code> state and the corresponding number of cards to the game loop.</p>
<p>Finally, we can modify the <code>game_play()</code> function to handle the game state transitions. When the game is over, we can return the <code>game_over</code> state and the final score:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">game_play</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">num_cards</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set up the game</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                sys.</span><span style="color: #61AFEF">exit</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the game state</span></span>
<span class="line"><span style="color: #ABB2BF">        game_over, score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">update_game_state</span><span style="color: #ABB2BF">()  </span><span style="color: #7F848E; font-style: italic"># Replace with your actual game state update logic</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_over:</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"game_over"</span><span style="color: #ABB2BF">, score  </span><span style="color: #7F848E; font-style: italic"># Transition to the game over state with the final score</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Draw the game state</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">draw_game_state</span><span style="color: #ABB2BF">()  </span><span style="color: #7F848E; font-style: italic"># Replace with your actual game state drawing logic</span></span>
<span class="line"><span style="color: #ABB2BF">        </span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span></code></pre>
<h2 id="adding-game-menus">Adding game menus</h2>
<p>To enhance the user experience and make the game more engaging, we can add some menus to the game. These menus can provide options such as starting a new game, changing the difficulty level, and adjusting the sound and music settings.</p>
<p>First, let’s create a function to display the main menu:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">show_menu</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66; font-style: italic">screen</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">    menu_font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">50</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    menu_title </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> menu_font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Memory Game"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    title_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> menu_title.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    start_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> menu_font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Start Game"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    start_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> start_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    difficulty_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> menu_font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Change Difficulty"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    difficulty_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> difficulty_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">75</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    settings_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> menu_font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Settings"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    settings_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> settings_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">150</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    quit_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> menu_font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Quit Game"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    quit_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> quit_text.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_width</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, screen.</span><span style="color: #61AFEF">get_height</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">//</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">225</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(menu_title, title_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(start_text, start_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(difficulty_text, difficulty_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(settings_text, settings_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(quit_text, quit_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> start_rect, difficulty_rect, settings_rect, quit_rect</span></span></code></pre>
<p>This function creates a menu with several options, such as starting the game, changing the difficulty level, adjusting the settings, and quitting the game. The function returns the rectangular areas for each option, which we can use later to detect when the user clicks on one of the options.</p>
<p>Next, we need to modify our main loop to display the menu when the game is not in progress. We can use a game state variable to keep track of the current state of the game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">main</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Initialize Pygame</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Set the window size</span></span>
<span class="line"><span style="color: #ABB2BF">    size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">(size)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">set_caption</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Memory Game"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Initialize game variables</span></span>
<span class="line"><span style="color: #ABB2BF">    game_state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"menu"</span></span>
<span class="line"><span style="color: #ABB2BF">    start_rect, difficulty_rect, settings_rect, quit_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">show_menu</span><span style="color: #ABB2BF">(screen)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Main game loop</span></span>
<span class="line"><span style="color: #ABB2BF">    running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">MOUSEBUTTONDOWN</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> game_state </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"menu"</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> start_rect.</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(event.pos):</span></span>
<span class="line"><span style="color: #ABB2BF">                        game_state </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">"playing"</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #61AFEF">start_game</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> difficulty_rect.</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(event.pos):</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #7F848E; font-style: italic"># </span><span style="color: #C678DD; font-style: italic">TODO</span><span style="color: #7F848E; font-style: italic">: implement difficulty settings menu</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">pass</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> settings_rect.</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(event.pos):</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #7F848E; font-style: italic"># </span><span style="color: #C678DD; font-style: italic">TODO</span><span style="color: #7F848E; font-style: italic">: implement settings menu</span></span>
<span class="line"><span style="color: #ABB2BF">                        </span><span style="color: #C678DD; font-style: italic">pass</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #C678DD; font-style: italic">elif</span><span style="color: #ABB2BF"> quit_rect.</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(event.pos):</span></span>
<span class="line"><span style="color: #ABB2BF">                        running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic"># Update the screen</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Clean up</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>In this modified main loop, we first show the menu and set the initial game state to “menu”. We also get the</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf"># Get the font for menu items</span></span>
<span class="line"><span style="color: #abb2bf">menu_font = pygame.font.SysFont("Arial", 50)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Set up menu items</span></span>
<span class="line"><span style="color: #abb2bf">menu_title = menu_font.render("Memory Game", True, (255, 255, 255))</span></span>
<span class="line"><span style="color: #abb2bf">menu_title_rect = menu_title.get_rect(center=(screen.get_width() // 2, screen.get_height() // 4))</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">play_text = menu_font.render("Play", True, (255, 255, 255))</span></span>
<span class="line"><span style="color: #abb2bf">play_rect = play_text.get_rect(center=(screen.get_width() // 2, screen.get_height() // 2))</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">quit_text = menu_font.render("Quit", True, (255, 255, 255))</span></span>
<span class="line"><span style="color: #abb2bf">quit_rect = quit_text.get_rect(center=(screen.get_width() // 2, (screen.get_height() // 4) * 3))</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Set the initial game state to "menu"</span></span>
<span class="line"><span style="color: #abb2bf">game_state = "menu"</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">while True:</span></span>
<span class="line"><span style="color: #abb2bf">    # Event handling</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">            sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">        # Handle mouse click events</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.MOUSEBUTTONUP:</span></span>
<span class="line"><span style="color: #abb2bf">            # Check if the "play" button was clicked</span></span>
<span class="line"><span style="color: #abb2bf">            if game_state == "menu" and play_rect.collidepoint(pygame.mouse.get_pos()):</span></span>
<span class="line"><span style="color: #abb2bf">                # Set up game state for playing</span></span>
<span class="line"><span style="color: #abb2bf">                game_state = "playing"</span></span>
<span class="line"><span style="color: #abb2bf">                difficulty_level = 1</span></span>
<span class="line"><span style="color: #abb2bf">                score = 0</span></span>
<span class="line"><span style="color: #abb2bf">                cards = create_cards(difficulty_level)</span></span>
<span class="line"><span style="color: #abb2bf">                revealed_cards = []</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">            # Check if the "quit" button was clicked</span></span>
<span class="line"><span style="color: #abb2bf">            elif game_state == "menu" and quit_rect.collidepoint(pygame.mouse.get_pos()):</span></span>
<span class="line"><span style="color: #abb2bf">                pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">                sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">            # Check if the "restart" button was clicked</span></span>
<span class="line"><span style="color: #abb2bf">            elif game_state == "game over" and restart_rect.collidepoint(pygame.mouse.get_pos()):</span></span>
<span class="line"><span style="color: #abb2bf">                # Set up game state for playing</span></span>
<span class="line"><span style="color: #abb2bf">                game_state = "playing"</span></span>
<span class="line"><span style="color: #abb2bf">                score = 0</span></span>
<span class="line"><span style="color: #abb2bf">                cards = create_cards(difficulty_level)</span></span>
<span class="line"><span style="color: #abb2bf">                revealed_cards = []</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">        # Handle key press events</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.KEYDOWN:</span></span>
<span class="line"><span style="color: #abb2bf">            # Check if the "escape" key was pressed to return to the menu</span></span>
<span class="line"><span style="color: #abb2bf">            if event.key == pygame.K_ESCAPE:</span></span>
<span class="line"><span style="color: #abb2bf">                # Set up game state for the menu</span></span>
<span class="line"><span style="color: #abb2bf">                game_state = "menu"</span></span>
<span class="line"><span style="color: #abb2bf">                difficulty_level = 1</span></span>
<span class="line"><span style="color: #abb2bf">                score = 0</span></span>
<span class="line"><span style="color: #abb2bf">                cards = []</span></span>
<span class="line"><span style="color: #abb2bf">                revealed_cards = []</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">            # Check if the "up" arrow key was pressed to increase the difficulty level</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_UP and game_state == "playing":</span></span>
<span class="line"><span style="color: #abb2bf">                if difficulty_level &#x3C; 3:</span></span>
<span class="line"><span style="color: #abb2bf">                    difficulty_level += 1</span></span>
<span class="line"><span style="color: #abb2bf">                    cards = create_cards(difficulty_level)</span></span>
<span class="line"><span style="color: #abb2bf">                    revealed_cards = []</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">            # Check if the "down" arrow key was pressed to decrease the difficulty level</span></span>
<span class="line"><span style="color: #abb2bf">            elif event.key == pygame.K_DOWN and game_state == "playing":</span></span>
<span class="line"><span style="color: #abb2bf">                if difficulty_level > 1:</span></span>
<span class="line"><span style="color: #abb2bf">                    difficulty_level -= 1</span></span>
<span class="line"><span style="color: #abb2bf">                    cards = create_cards(difficulty_level)</span></span>
<span class="line"><span style="color: #abb2bf">                    revealed_cards = []</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Update game state based on current state</span></span>
<span class="line"><span style="color: #abb2bf">    if game_state == "menu":</span></span>
<span class="line"><span style="color: #abb2bf">        # Draw menu items</span></span>
<span class="line"><span style="color: #abb2bf">        screen.blit(menu_title, menu_title_rect)</span></span>
<span class="line"><span style="color: #abb2bf">        screen.blit(play_text, play_rect)</span></span>
<span class="line"><span style="color: #abb2bf">        screen.blit(quit_text, quit_rect)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    elif game_state == "playing":</span></span>
<span class="line"><span style="color: #abb2bf">        # Draw game elements</span></span>
<span class="line"><span style="color: #abb2bf">        screen.fill((0, 0, 0))</span></span>
<span class="line"><span style="color: #abb2bf">        draw_cards(cards, revealed_cards, screen)</span></span>
<span class="line"><span style="color: #abb2bf">        draw_score(score, screen)</span></span>
<span class="line"><span style="color: #abb2bf">        draw_difficulty_level(difficulty_level, screen)</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">        # Check for card matches</span></span>
<span class="line"><span style="color: #abb2bf">        if len(revealed_cards) == 2:</span></span>
<span class="line"><span style="color: #abb2bf">            if cards[revealed_cards[0]] == cards[revealed_cards[</span></span></code></pre>
<h2 id="creating-reusable-game-components">Creating reusable game components</h2>
<p>Creating reusable game components is an essential part of game development, as it allows us to avoid duplicating code and reduces the risk of introducing bugs. In this section, we will create two reusable components: a button and a card.</p>
<p>Let’s start with the button. We will create a Button class that will allow us to create buttons with different sizes, colors, and text. Here’s the code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Button</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">text_color</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">text</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">font_size</span><span style="color: #ABB2BF">=</span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(x, y, width, height)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> color</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.text_color </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text_color</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">Font</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, font_size)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(surface, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.color, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        text_surface </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.text, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.text_color)</span></span>
<span class="line"><span style="color: #ABB2BF">        text_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> text_surface.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">center</span><span style="color: #56B6C2">=</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.center)</span></span>
<span class="line"><span style="color: #ABB2BF">        surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(text_surface, text_rect)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">is_clicked</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">pos</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.</span><span style="color: #61AFEF">collidepoint</span><span style="color: #ABB2BF">(pos)</span></span></code></pre>
<p>The <code>Button</code> class takes six arguments: the button’s position (<code>x</code> and <code>y</code>), width and height (<code>width</code> and <code>height</code>), color (<code>color</code>), text color (<code>text_color</code>), and text (<code>text</code>). We also have an optional argument for the font size (<code>font_size</code>), which defaults to 32.</p>
<p>In the constructor, we create a <code>pygame.Rect</code> object to represent the button’s rectangle, and store the other arguments as attributes.</p>
<p>The <code>draw</code> method is used to draw the button on a surface. We first draw the button’s rectangle with the given color, and then render the text with the given font, text color, and text. We use the <code>get_rect</code> method to center the text on the button’s rectangle.</p>
<p>Finally, the <code>is_clicked</code> method takes a position (<code>pos</code>) and returns <code>True</code> if the position is inside the button’s rectangle, and <code>False</code> otherwise.</p>
<p>Now, let’s create a <code>Card</code> class for creating card objects. Each card object will have an image, a position, a size, and a state (flipped or not flipped). Here’s the code:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Card</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">__init__</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">image</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">x</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">y</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">width</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">height</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.transform.</span><span style="color: #61AFEF">scale</span><span style="color: #ABB2BF">(image, (width, height))</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image.</span><span style="color: #61AFEF">get_rect</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> x</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect.y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> y</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.width </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> width</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.height </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> height</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">draw</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B; font-style: italic">self</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66; font-style: italic">surface</span><span style="color: #ABB2BF">):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD; font-style: italic">not</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.flipped:</span></span>
<span class="line"><span style="color: #ABB2BF">            surface.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.image, </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">else</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(surface, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), </span><span style="color: #E5C07B">self</span><span style="color: #ABB2BF">.rect)</span></span></code></pre>
<p>The <code>Card</code> class takes five arguments: the card’s image (<code>image</code>), position (<code>x</code> and <code>y</code>), width and height (<code>width</code> and <code>height</code>). In the constructor, we create a <code>pygame.Rect</code> object to represent the card’s rectangle, and store the other arguments as attributes. We also set the <code>flipped</code> attribute to <code>False</code>.</p>
<p>The <code>flip</code> method is used to flip the card by toggling the <code>flipped</code> attribute.</p>
<p>The <code>draw</code> method is used to draw the card on a surface. If the card is not flipped, we simply blit the image onto the surface. Otherwise, we draw a white rectangle over the card’s rectangle to represent the flipped state.</p>
<p>With these reusable components, we can create
more complex games that utilize the same building blocks. For example, we can create a game where the user has to match more than two cards, or a game where the cards have different shapes and colors.</p>
<p>We can also make use of the <code>Card</code> class and <code>CardDeck</code> class in other parts of the game, such as a card selection menu or a game end screen. By separating the card-related logic from the main game loop, we can easily add or remove functionality without affecting the rest of the code.</p>
<p>In addition to the <code>Card</code> and <code>CardDeck</code> classes, we can also create reusable components for other game elements such as buttons, menus, and text displays. By doing so, we can minimize the amount of code we need to write for each new game we create.</p>
<p>With these reusable components, we can create more complex and polished games with ease. By focusing on modularity and separation of concerns, we can write clean and maintainable code that can be easily extended and modified.</p>
<h2 id="optimizing-game-performance">Optimizing game performance</h2>
<p>Optimizing game performance is an important consideration, especially for games that require a lot of processing power or have complex graphics. Here are some tips on how to optimize game performance in Python:</p>
<ol>
<li>
<p>Use Pygame’s built-in functions: Pygame provides many built-in functions for handling game graphics and input, and these functions are optimized for performance. For example, you can use the <code>blit()</code> function to quickly draw game elements onto the screen.</p>
</li>
<li>
<p>Use efficient algorithms: When implementing game logic, try to use algorithms that are efficient and optimized for speed. For example, you can use hash tables to quickly look up card matches, or use binary search to quickly find cards in a sorted deck.</p>
</li>
<li>
<p>Reduce unnecessary processing: In the game loop, try to only process elements that need to be updated. For example, if a card is already flipped over, there is no need to update its position or image. By reducing unnecessary processing, you can improve the overall speed of the game.</p>
</li>
<li>
<p>Use Pygame’s double-buffering: Pygame has a built-in double-buffering system that can help improve game performance by reducing flickering and lag. Double-buffering essentially involves drawing the game elements onto a separate buffer and then displaying the buffer on the screen, which can help smooth out animation and improve performance.</p>
</li>
<li>
<p>Optimize graphics: If your game uses a lot of graphics, consider optimizing the images to reduce file size and improve load times. You can also reduce the number of sprites or use simpler graphics to improve performance.</p>
</li>
</ol>
<p>By following these tips, you can optimize your game’s performance and create a smoother and more enjoyable gaming experience.</p>
<h1 id="chapter-10-creating-a-game-engine">Chapter 10: Creating a Game Engine</h1>
<h2 id="overview-of-game-engines">Overview of game engines</h2>
<p>A game engine is a software framework designed to help developers create video games more efficiently. Game engines provide a range of tools and features to help with tasks such as graphics rendering, physics simulation, audio processing, and more. By using a game engine, developers can focus on game design and gameplay mechanics, rather than spending time writing low-level code.</p>
<p>Here are some of the most popular game engines currently in use:</p>
<ol>
<li>
<p>Unity: Unity is one of the most popular game engines and is used to create games for a wide range of platforms, including PC, mobile, and console. Unity uses C# as its primary programming language and provides a range of tools and features for graphics rendering, physics simulation, audio processing, and more.</p>
</li>
<li>
<p>Unreal Engine: Unreal Engine is a powerful game engine used to create high-end AAA games, as well as virtual reality experiences and architectural visualizations. Unreal Engine uses a visual scripting language called Blueprints, as well as C++ for low-level programming.</p>
</li>
<li>
<p>Godot Engine: Godot Engine is a free and open-source game engine that is becoming increasingly popular among indie developers. Godot uses a custom scripting language called GDScript, as well as C++ for low-level programming. It provides features such as 2D and 3D rendering, physics simulation, and audio processing.</p>
</li>
<li>
<p>CryEngine: CryEngine is a powerful game engine that has been used to create games such as Crysis and Far Cry. CryEngine uses C++ as its primary programming language and provides features such as advanced graphics rendering, physics simulation, and AI.</p>
</li>
<li>
<p>Construct: Construct is a game engine designed for creating 2D games without the need for programming. It uses a visual scripting system that allows developers to create game logic and events by dragging and dropping objects.</p>
</li>
</ol>
<p>There are many other game engines available, each with their own strengths and weaknesses. The choice of game engine will depend on the type of game being developed, the target platform, and the developer’s preferences and experience.</p>
<h2 id="creating-a-basic-game-engine">Creating a basic game engine</h2>
<p>Creating a basic game engine involves creating a framework that can handle common tasks required in game development, such as graphics rendering, input handling, physics simulation, and audio processing. Here are some steps to create a basic game engine:</p>
<ol>
<li>
<p>Choose a programming language: Choose a programming language that is suitable for game development. Popular programming languages for game development include C++, Java, and C#.</p>
</li>
<li>
<p>Create a game loop: The game loop is responsible for updating the game state and rendering the game world. The loop runs continuously while the game is being played, and should update at a fixed time interval to ensure a consistent frame rate.</p>
</li>
<li>
<p>Implement input handling: Input handling allows the player to interact with the game using a keyboard, mouse, or game controller. This involves detecting input events and mapping them to actions in the game.</p>
</li>
<li>
<p>Implement graphics rendering: Graphics rendering is responsible for displaying the game world to the player. This involves drawing 2D or 3D objects on the screen using a graphics library such as OpenGL or DirectX.</p>
</li>
<li>
<p>Implement physics simulation: Physics simulation allows for realistic movement and interaction of game objects. This involves implementing collision detection and response, gravity, and other physical forces.</p>
</li>
<li>
<p>Implement audio processing: Audio processing allows for the creation of sound effects and background music. This involves playing and mixing audio files, and implementing sound filters and effects.</p>
</li>
<li>
<p>Create reusable components: To make game development more efficient, create reusable components such as game objects, animation systems, and AI routines.</p>
</li>
<li>
<p>Test and optimize: Test the game engine thoroughly to ensure that it performs well on a range of hardware and software configurations. Optimize the engine to improve performance and reduce resource usage.</p>
</li>
</ol>
<p>Creating a basic game engine can be a challenging task, but it can also be a rewarding experience. A well-designed game engine can help streamline game development and allow developers to focus on creating engaging gameplay experiences.</p>
<h2 id="building-a-game-loop">Building a game loop</h2>
<p>The game loop is the heart of any game engine, responsible for updating the game state and rendering the game world at a consistent frame rate. Here are the basic steps to building a game loop:</p>
<ol>
<li>
<p>Initialize the game: This step involves initializing the game window, graphics library, and other game components.</p>
</li>
<li>
<p>Set up the game loop: The game loop runs continuously while the game is being played, and should update at a fixed time interval to ensure a consistent frame rate. The loop should also handle input from the player and other events.</p>
</li>
<li>
<p>Update the game state: In each iteration of the game loop, the game state should be updated based on user input, physics calculations, and other factors.</p>
</li>
<li>
<p>Render the game world: After updating the game state, the game world should be rendered to the screen using a graphics library such as OpenGL or DirectX.</p>
</li>
<li>
<p>Repeat the loop: The game loop should continue to run until the game is exited by the player.</p>
</li>
</ol>
<p>Here’s an example implementation of a game loop in Python using Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game clock</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game state</span></span>
<span class="line"><span style="color: #ABB2BF">player_x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">400</span></span>
<span class="line"><span style="color: #ABB2BF">player_y </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">300</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game state</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Render the game world</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">circle</span><span style="color: #ABB2BF">(screen, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), (player_x, player_y), </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit the frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up resources</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This implementation sets up a game window and a game clock, and then enters the game loop. The loop handles events, updates the game state based on user input, and renders the game world to the screen. Finally, the loop limits the frame rate to 60 frames per second using the game clock.</p>
<h2 id="adding-collision-detection">Adding collision detection</h2>
<p>Collision detection is an important aspect of many games, allowing objects to interact with each other and respond to collisions. Here’s an example implementation of collision detection in Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game clock</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game state</span></span>
<span class="line"><span style="color: #ABB2BF">player_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">400</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">40</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">40</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">target_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game state</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> player_rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(target_rect):</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">print</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">"Collision detected!"</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Render the game world</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(screen, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), player_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(screen, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), target_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit the frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up resources</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This implementation creates two rectangles, one for the player and one for the target, and then checks for collisions between them using the <code>colliderect</code> method of the Pygame <code>Rect</code> class. If a collision is detected, a message is printed to the console.</p>
<p>Note that this implementation only checks for collisions between two rectangles, but more complex shapes can be checked for collisions using other methods, such as collision masks or pixel-based collision detection.</p>
<h2 id="adding-scoring">Adding scoring</h2>
<p>Adding scoring to a game can be a great way to increase the sense of accomplishment and replayability. Here’s an example implementation of scoring in Pygame:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #C678DD; font-style: italic">import</span><span style="color: #ABB2BF"> pygame</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">init</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game window</span></span>
<span class="line"><span style="color: #ABB2BF">screen </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.display.</span><span style="color: #61AFEF">set_mode</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">800</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">600</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game clock</span></span>
<span class="line"><span style="color: #ABB2BF">clock </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.time.</span><span style="color: #61AFEF">Clock</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game state</span></span>
<span class="line"><span style="color: #ABB2BF">player_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">400</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">40</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">40</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">target_rect </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #61AFEF">Rect</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">score </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Set up the game loop</span></span>
<span class="line"><span style="color: #ABB2BF">running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">True</span></span>
<span class="line"><span style="color: #C678DD; font-style: italic">while</span><span style="color: #ABB2BF"> running:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Handle events</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">for</span><span style="color: #ABB2BF"> event </span><span style="color: #C678DD; font-style: italic">in</span><span style="color: #ABB2BF"> pygame.event.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">():</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> event.type </span><span style="color: #56B6C2">==</span><span style="color: #ABB2BF"> pygame.</span><span style="color: #D19A66">QUIT</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">            running </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">False</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Update game state</span></span>
<span class="line"><span style="color: #ABB2BF">    keys </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.key.</span><span style="color: #61AFEF">get_pressed</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_LEFT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_rect.x </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_RIGHT</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_rect.x </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_UP</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_rect.y </span><span style="color: #56B6C2">-=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> keys[pygame.</span><span style="color: #D19A66">K_DOWN</span><span style="color: #ABB2BF">]:</span></span>
<span class="line"><span style="color: #ABB2BF">        player_rect.y </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">5</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Check for collisions and update score</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD; font-style: italic">if</span><span style="color: #ABB2BF"> player_rect.</span><span style="color: #61AFEF">colliderect</span><span style="color: #ABB2BF">(target_rect):</span></span>
<span class="line"><span style="color: #ABB2BF">        score </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span></span>
<span class="line"><span style="color: #ABB2BF">        target_rect.x </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.math.</span><span style="color: #61AFEF">Vector2</span><span style="color: #ABB2BF">(screen.</span><span style="color: #61AFEF">get_size</span><span style="color: #ABB2BF">()) </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> pygame.math.Vector2.</span><span style="color: #61AFEF">random</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        target_rect.size </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Render the game world</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">fill</span><span style="color: #ABB2BF">((</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(screen, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">), player_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.draw.</span><span style="color: #61AFEF">rect</span><span style="color: #ABB2BF">(screen, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">), target_rect)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Render the score</span></span>
<span class="line"><span style="color: #ABB2BF">    font </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> pygame.font.</span><span style="color: #61AFEF">SysFont</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">None</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    score_text </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> font.</span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">(</span><span style="color: #C678DD">f</span><span style="color: #98C379">"Score: </span><span style="color: #D19A66">{</span><span style="color: #ABB2BF">score</span><span style="color: #D19A66">}</span><span style="color: #98C379">"</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">True</span><span style="color: #ABB2BF">, (</span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">255</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    screen.</span><span style="color: #61AFEF">blit</span><span style="color: #ABB2BF">(score_text, (</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span></span>
<span class="line"><span style="color: #ABB2BF">    pygame.display.</span><span style="color: #61AFEF">flip</span><span style="color: #ABB2BF">()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic"># Limit the frame rate</span></span>
<span class="line"><span style="color: #ABB2BF">    clock.</span><span style="color: #61AFEF">tick</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">60</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic"># Clean up resources</span></span>
<span class="line"><span style="color: #ABB2BF">pygame.</span><span style="color: #61AFEF">quit</span><span style="color: #ABB2BF">()</span></span></code></pre>
<p>This implementation uses a variable <code>score</code> to keep track of the player’s score. When a collision is detected between the player and the target, the score is increased by 10 and the target is moved to a random location on the screen. The score is then rendered to the screen using a Pygame font.</p>
<h2 id="packaging-and-distributing-the-game-engine">Packaging and distributing the game engine</h2>
<p>Packaging and distributing a game engine can be a complex process that varies depending on the platform and language being used. However, here are some general guidelines for packaging and distributing a Python-based game engine using Pygame:</p>
<ol>
<li>
<p>Create a virtual environment and install Pygame and any other required dependencies using pip.</p>
</li>
<li>
<p>Organize your game engine’s code into modules and packages that can be easily imported by game developers.</p>
</li>
<li>
<p>Write documentation for your game engine, including installation instructions, usage instructions, and API documentation.</p>
</li>
<li>
<p>Create a setup.py file that defines your game engine’s metadata, such as its name, version, author, and dependencies. This file should also specify any entry points or scripts that should be installed with the game engine.</p>
</li>
<li>
<p>Use a build tool like setuptools or PyInstaller to build a distributable package of your game engine. This package can be in the form of a source distribution (tarball or zip file) or a binary distribution (wheel file or executable installer).</p>
</li>
<li>
<p>Publish your game engine to a package index like PyPI, or distribute it directly to game developers via a file hosting service like GitHub or Dropbox.</p>
</li>
<li>
<p>Promote your game engine through social media, developer communities, and other channels to attract users and contributors.</p>
</li>
</ol>
<p>Keep in mind that packaging and distributing a game engine can be a complex process, and there are many tools and frameworks available to help simplify the process. It’s important to research best practices and consult with experienced developers to ensure that your game engine is packaged and distributed in a secure, reliable, and user-friendly manner.</p>
<h2 id="creating-games-using-the-game-engine">Creating games using the game engine</h2>
<p>Once you have created and packaged your game engine, game developers can use it to create their own games by importing and using its modules and packages. Here’s an example of how a game developer might create a simple game using your game engine:</p>
<ol>
<li>
<p>Install your game engine using pip or by downloading the distributable package.</p>
</li>
<li>
<p>Create a new Python file and import the necessary modules and packages from your game engine.</p>
</li>
<li>
<p>Define the game’s assets, such as images, sounds, and fonts, and load them into memory using the Pygame functions provided by your game engine.</p>
</li>
<li>
<p>Create a new game object using the Game class provided by your game engine, and configure its settings, such as the screen size, frame rate, and background color.</p>
</li>
<li>
<p>Create the game’s sprites, which are objects that represent the game’s characters, objects, and obstacles, using the Sprite class provided by your game engine. Add these sprites to a group object provided by your game engine, which allows for easy management and collision detection.</p>
</li>
<li>
<p>Write the game’s logic and update functions, which define how the game’s sprites behave and interact with each other. Use the collision detection functions provided by your game engine to detect when sprites collide with each other or with other game objects.</p>
</li>
<li>
<p>Write the game’s event handling function, which defines how the game responds to user input and other events, such as collisions or game over conditions.</p>
</li>
<li>
<p>Write the game’s main loop, which updates the game’s state and draws the game’s graphics on the screen. Use the functions provided by your game engine to update the game’s sprites, handle events, and draw the screen.</p>
</li>
<li>
<p>Test the game to ensure that it runs correctly and is free of bugs or other issues.</p>
</li>
<li>
<p>Distribute the game to players using a variety of methods, such as a downloadable executable file, a web-based app, or a mobile app.</p>
</li>
</ol>
<p>Remember that creating a game using a game engine requires a combination of programming skills, game design expertise, and creativity. It’s important to create a game that is fun, engaging, and challenging, and to test it thoroughly to ensure that it meets the expectations of players.</p>
<h2 id="customizing-the-game-engine-for-specific-game-types">Customizing the game engine for specific game types</h2>
<p>Customizing a game engine for specific game types involves creating game-specific modules or classes that extend the functionality of the game engine. Here are the steps you can follow to customize your game engine for a specific game type:</p>
<ol>
<li>
<p>Determine the specific requirements of the game type you want to support. For example, if you want to create a platformer game, you will need to implement features such as gravity, jumping, and collisions.</p>
</li>
<li>
<p>Analyze the existing modules and classes provided by your game engine to identify which ones you can reuse and which ones you need to customize.</p>
</li>
<li>
<p>Create new game-specific modules or classes that extend the functionality of your game engine. For example, you might create a new module that implements a platformer-specific physics engine.</p>
</li>
<li>
<p>Implement game-specific features and behaviors in your custom modules or classes. For example, you might implement jumping and gravity physics in your custom physics engine module.</p>
</li>
<li>
<p>Test your custom modules or classes thoroughly to ensure that they work correctly and do not introduce new bugs or issues.</p>
</li>
<li>
<p>Update the main game loop and other relevant modules to use your custom modules or classes instead of the default ones provided by your game engine.</p>
</li>
<li>
<p>Test the game thoroughly to ensure that it works correctly and meets the requirements of the specific game type.</p>
</li>
<li>
<p>Distribute the customized game engine to other developers or game designers who want to create games of the same type.</p>
</li>
</ol>
<p>By customizing your game engine for specific game types, you can provide developers and game designers with a set of tools and features that are tailored to their specific needs. This can help them to create games more quickly and efficiently, while also ensuring that their games are high-quality and engaging.</p>
<h1 id="chapter-11-debugging-and-testing-games">Chapter 11: Debugging and Testing Games</h1>
<h2 id="overview-of-debugging-and-testing">Overview of debugging and testing</h2>
<p>Debugging and testing are critical processes in software development that ensure that code is error-free and functions as intended. Here is an overview of debugging and testing:</p>
<p>Debugging:
Debugging is the process of identifying and fixing errors, bugs, or issues in code. Debugging involves a systematic process of analyzing code to identify errors, determining the cause of the error, and then making changes to fix the error. Common debugging techniques include logging, breakpoint debugging, and unit testing.</p>
<p>Testing:
Testing is the process of validating that software functions as intended and meets the requirements of the end-user. Testing is an essential step in the development process to ensure that the software meets the desired quality and functionality. Testing can be manual or automated and can include a variety of techniques such as unit testing, integration testing, and user acceptance testing.</p>
<p>Types of Testing:</p>
<ol>
<li>
<p>Unit Testing:
Unit testing involves testing individual units or components of the software to ensure they work as intended.</p>
</li>
<li>
<p>Integration Testing:
Integration testing involves testing how different modules or components of the software work together to ensure they integrate seamlessly.</p>
</li>
<li>
<p>System Testing:
System testing involves testing the entire software system to ensure it meets the requirements and functions as intended.</p>
</li>
<li>
<p>Acceptance Testing:
Acceptance testing involves testing the software to ensure it meets the requirements of the end-user.</p>
</li>
</ol>
<p>Benefits of Debugging and Testing:</p>
<ul>
<li>Reduced risk of errors and issues in production.</li>
<li>Improved software quality and reliability.</li>
<li>Reduced development time and costs.</li>
<li>Improved user experience and satisfaction.</li>
</ul>
<p>Debugging and testing are essential steps in the software development process. Proper debugging and testing help ensure that the software functions as intended, is error-free, and meets the requirements of the end-user.</p>
<h2 id="types-of-bugs-and-how-to-identify-them">Types of bugs and how to identify them</h2>
<p>Bugs are issues or errors in software code that result in unexpected or unintended behavior. Here are some common types of bugs and how to identify them:</p>
<ol>
<li>
<p>Syntax Errors:
Syntax errors are caused by incorrect syntax or structure in the code. They are typically detected by the compiler or interpreter when the code is executed.</p>
</li>
<li>
<p>Logical Errors:
Logical errors occur when the code runs without any syntax errors but produces incorrect results. These errors can be challenging to detect and may require careful analysis of the code.</p>
</li>
<li>
<p>Runtime Errors:
Runtime errors occur when the code runs and produces an unexpected error or crash. These errors are often caused by input data or conditions that the code was not designed to handle.</p>
</li>
<li>
<p>Memory Leaks:
Memory leaks occur when a program allocates memory but fails to release it, resulting in the program using up more and more memory over time. These errors can cause the program to crash or become unresponsive.</p>
</li>
<li>
<p>Concurrency Bugs:
Concurrency bugs occur when multiple threads or processes in a program access shared resources in an unexpected way, leading to unexpected results or errors.</p>
</li>
</ol>
<p>To identify bugs, developers can use a variety of techniques, including:</p>
<ol>
<li>
<p>Code Review:
Code review involves having other developers review the code for syntax errors, logical errors, and other issues.</p>
</li>
<li>
<p>Unit Testing:
Unit testing involves writing code that tests individual units or components of the software to ensure they function as intended.</p>
</li>
<li>
<p>Integration Testing:
Integration testing involves testing how different modules or components of the software work together to ensure they integrate seamlessly.</p>
</li>
<li>
<p>Debugging Tools:
Debugging tools such as debuggers and profilers can be used to identify and fix errors in the code.</p>
</li>
</ol>
<p>By using these techniques, developers can identify and fix bugs before they affect the end-user, resulting in higher quality software and a better user experience.</p>
<h2 id="using-print-statements-for-debugging">Using print statements for debugging</h2>
<p>Print statements are a simple and effective way to debug code. By adding print statements at strategic locations in the code, developers can track the flow of data and identify where errors may be occurring.</p>
<p>Here are some tips for using print statements for debugging:</p>
<ol>
<li>
<p>Use descriptive messages:
When adding a print statement, make sure the message is descriptive enough to identify what is happening in the code. This will make it easier to locate the print statements when reviewing the output.</p>
</li>
<li>
<p>Add print statements to the beginning and end of functions:
Adding print statements at the beginning and end of functions can help identify where the function is being called and whether it is returning the expected value.</p>
</li>
<li>
<p>Print variable values:
Adding print statements to print the values of variables can help identify where the values may be getting changed unexpectedly.</p>
</li>
<li>
<p>Use conditional print statements:
Using conditional print statements, such as if statements, can help identify when certain conditions are met or not met.</p>
</li>
<li>
<p>Use logging instead of print statements:
While print statements can be useful for debugging, they can also clutter up the code and be difficult to remove once the debugging is complete. Using a logging library, such as Python’s built-in <code>logging</code> module, can provide more flexibility and control over how messages are displayed and stored.</p>
</li>
</ol>
<p>Overall, using print statements for debugging can be a quick and effective way to identify and fix errors in the code. However, it’s important to use them sparingly and remove them once the debugging is complete to avoid cluttering up the code.</p>
<h2 id="debugging-tools-and-techniques">Debugging tools and techniques</h2>
<p>Debugging is the process of finding and fixing errors, or bugs, in software. While print statements can be a simple and effective way to debug code, there are also more powerful tools and techniques available to help identify and fix bugs.</p>
<p>Here are some common debugging tools and techniques:</p>
<ol>
<li>
<p>Debuggers:
Debuggers are tools that allow developers to step through code and inspect variables and data in real time. They can be used to set breakpoints, pause code execution, and examine the state of the program at specific points in time. Python’s built-in <code>pdb</code> module is one example of a debugger.</p>
</li>
<li>
<p>IDEs:
Integrated development environments (IDEs) often have built-in debugging tools that can make it easier to track down errors. IDEs such as PyCharm, Visual Studio Code, and Spyder all have debugging capabilities.</p>
</li>
<li>
<p>Profilers:
Profiling tools can be used to analyze the performance of code and identify bottlenecks or areas of slow performance. Python’s built-in <code>cProfile</code> module is one example of a profiler.</p>
</li>
<li>
<p>Code reviews:
Code reviews involve having other developers review code for errors, inconsistencies, and best practices. Code reviews can catch errors that may not be immediately apparent to the original developer.</p>
</li>
<li>
<p>Automated testing:
Automated testing involves writing code that tests other code to ensure it works as expected. By writing tests for code, developers can catch errors before they make it into production.</p>
</li>
<li>
<p>Loggers:
Logging tools allow developers to record and review information about the program’s behavior at runtime. This can be useful for tracking down errors that are difficult to reproduce.</p>
</li>
</ol>
<p>Overall, there are many different tools and techniques available for debugging code. By using a combination of these tools, developers can quickly and effectively identify and fix bugs in their software.</p>
<h2 id="writing-test-cases-for-games">Writing test cases for games</h2>
<p>Testing games can be challenging due to the many different possible player interactions and outcomes. However, writing test cases for games is still an important part of ensuring that the game works as intended and is free of bugs.</p>
<p>Here are some tips for writing test cases for games:</p>
<ol>
<li>
<p>Start with the basics:
Begin by testing the core gameplay mechanics to ensure they work as expected. This includes things like movement, collision detection, and scoring.</p>
</li>
<li>
<p>Test edge cases:
Edge cases refer to situations that are unlikely to occur but could potentially cause problems. For example, what happens if the player moves outside of the game area, or if the game is left running for an extended period of time? Testing edge cases can help catch unexpected bugs.</p>
</li>
<li>
<p>Test different levels or difficulty settings:
If the game has different levels or difficulty settings, make sure to test each one to ensure that they work as expected.</p>
</li>
<li>
<p>Test for multiplayer or online functionality:
If the game includes multiplayer or online functionality, make sure to test these features thoroughly to ensure they work correctly.</p>
</li>
<li>
<p>Test on different platforms:
Games can behave differently on different platforms, so it’s important to test on as many platforms as possible, including different operating systems, screen resolutions, and hardware configurations.</p>
</li>
<li>
<p>Use automated testing tools:
Automated testing tools can be a powerful way to quickly and efficiently test games. Tools like Selenium, Pytest, and Robot Framework can help automate the testing process and catch bugs before they make it into production.</p>
</li>
<li>
<p>Get feedback from beta testers:
Finally, it’s important to get feedback from beta testers to identify any bugs or issues that may have been missed during testing. Beta testers can provide valuable feedback on the gameplay experience, as well as any bugs or issues they encounter while playing the game.</p>
</li>
</ol>
<p>By following these tips and testing the game thoroughly, developers can help ensure that their game works as intended and provides a great gameplay experience for players.</p>
<h2 id="unit-testing-and-integration-testing">Unit testing and integration testing</h2>
<p>Unit testing and integration testing are two important types of testing that are used in software development. Unit testing is the process of testing individual units or components of a software system to ensure that each unit works as expected. Integration testing, on the other hand, is the process of testing how different units or components of a software system work together as a whole.</p>
<p>In game development, unit testing can be used to test individual game mechanics, such as the movement of a character or the behavior of a specific game object. This can be done using automated testing frameworks such as PyTest or unittest, which allow developers to write test cases that can be executed automatically.</p>
<p>Integration testing is used to test how different game mechanics work together. This can be done manually by playing the game and testing different combinations of mechanics to ensure that they work correctly. Automated integration testing can also be done using tools such as PyTest, which can simulate different game scenarios and ensure that the mechanics work together as expected.</p>
<p>Overall, unit testing and integration testing are important tools for ensuring the quality of a game and preventing bugs and issues from appearing in the final product.</p>
<h2 id="regression-testing-and-performance-testing">Regression testing and performance testing</h2>
<p>Regression testing and performance testing are two other important types of testing in game development.</p>
<p>Regression testing is the process of retesting previously tested code to ensure that changes or new features do not introduce new bugs or issues. This is important in game development because changes to one part of the game can potentially affect other parts of the game, leading to new bugs. Automated testing frameworks such as PyTest or unittest can be used to automate regression testing, making it easier for developers to quickly identify and fix issues.</p>
<p>Performance testing is the process of testing the game’s performance under different conditions, such as high player counts or complex game scenarios. This can be done manually by simulating these conditions, or through the use of automated performance testing tools such as Apache JMeter. Performance testing is important to ensure that the game runs smoothly and is able to handle the expected number of players or game scenarios.</p>
<p>Both regression testing and performance testing are important in game development to ensure that the game is of high quality, performs well, and is free of bugs and issues.</p>
<h2 id="common-bugs-in-game-development-and-how-to-fix-them">Common bugs in game development and how to fix them</h2>
<p>Game development is a complex process, and bugs can arise from a variety of sources. Here are some common bugs in game development and ways to fix them:</p>
<ol>
<li>
<p>Logic errors: These bugs occur when there is an error in the game’s programming logic, causing unexpected behavior. To fix this, you need to review the code and identify the logic error. Debugging tools like print statements or breakpoints can be useful in identifying where the error is occurring.</p>
</li>
<li>
<p>Memory leaks: These bugs occur when the game continues to allocate memory but doesn’t release it, eventually causing the game to crash. To fix this, you need to identify the code that is causing the memory leak and modify it to properly release the memory when it’s no longer needed.</p>
</li>
<li>
<p>Performance issues: These bugs can be caused by inefficient code or resource-intensive game assets. To fix this, you need to optimize the code and/or reduce the resource usage of the game assets. Profiling tools can be useful in identifying performance bottlenecks in your code.</p>
</li>
<li>
<p>Graphics rendering issues: These bugs can be caused by incorrect use of rendering techniques or graphics hardware. To fix this, you need to identify the cause of the rendering issue and modify the code to properly render the graphics.</p>
</li>
<li>
<p>Network connectivity issues: These bugs can occur when there is an issue with the game’s network code, causing players to experience connectivity problems or other issues. To fix this, you need to identify the network code that is causing the issue and modify it to properly handle network connectivity.</p>
</li>
</ol>
<p>Overall, the key to fixing bugs in game development is to identify the source of the issue and modify the code accordingly. Good debugging skills and tools are essential for identifying and fixing bugs, and testing is important to ensure that the fixes have resolved the issue and not introduced any new problems.</p>
<h2 id="testing-game-on-different-platforms-and-devices">Testing game on different platforms and devices</h2>
<p>When developing games, it is important to test them on different platforms and devices to ensure they work as intended and provide a good user experience. Here are some tips for testing games on different platforms and devices:</p>
<ol>
<li>
<p>Use emulators and simulators: Emulators and simulators allow you to test your game on different platforms and devices without having to physically own them. This can save time and money, especially if you don’t have access to all the devices you want to test on.</p>
</li>
<li>
<p>Test on real devices: While emulators and simulators are useful, it’s also important to test your game on real devices to get an accurate idea of how it will perform. Test on a variety of devices with different screen sizes, resolutions, and processing power to ensure your game is compatible with a wide range of devices.</p>
</li>
<li>
<p>Test different operating systems: Make sure to test your game on different operating systems, such as iOS, Android, Windows, and macOS. Each operating system has its own unique features and requirements, so it’s important to ensure your game works well on all of them.</p>
</li>
<li>
<p>Test network connectivity: If your game requires an internet connection, make sure to test it on different networks with varying levels of connectivity to ensure it works well under different conditions.</p>
</li>
<li>
<p>Test user inputs: Test your game with different input methods, such as touchscreens, keyboards, and gamepads, to ensure it works well with all input methods.</p>
</li>
<li>
<p>Gather feedback from testers: It’s important to gather feedback from testers to identify any issues or bugs that may have been missed during testing. Make it easy for testers to report bugs and provide feedback, and be responsive to their feedback to ensure a positive user experience.</p>
</li>
</ol>
<h2 id="tips-for-improving-game-design-and-mechanics">Tips for improving game design and mechanics</h2>
<p>Sure, here are some tips for improving game design and mechanics:</p>
<ol>
<li>
<p>Keep it simple: Simplicity is key when it comes to game design. A game that is easy to understand and play will always be more appealing to a wider audience.</p>
</li>
<li>
<p>Focus on user experience: Pay close attention to how your game feels to play. A good user experience is critical to the success of a game.</p>
</li>
<li>
<p>Balance the game mechanics: A game that is too easy or too hard can quickly become frustrating for players. It’s important to find the right balance to keep players engaged.</p>
</li>
<li>
<p>Incorporate feedback: Listen to feedback from players and incorporate it into your game design. This will help you identify areas where the game can be improved.</p>
</li>
<li>
<p>Iterate and test: The best way to improve your game is to keep testing and iterating. This will help you identify and fix any issues that arise.</p>
</li>
<li>
<p>Focus on aesthetics: The visual design of a game is just as important as the game mechanics. A game that looks good will be more appealing to players.</p>
</li>
<li>
<p>Make it fun: Ultimately, a game needs to be fun to play. If it’s not, players won’t keep coming back to it.</p>
</li>
</ol>
<p>I hope these tips are helpful for improving your game design and mechanics!</p>
<h1 id="chapter-12-next-steps">Chapter 12: Next Steps</h1>
<h2 id="overview-of-popular-game-engines-and-frameworks">Overview of popular game engines and frameworks</h2>
<p>Sure, here’s an overview of some of the popular game engines and frameworks:</p>
<ol>
<li>
<p>Unity: Unity is a popular game engine used to create 2D and 3D games for multiple platforms, including mobile, desktop, and consoles. It features a user-friendly editor, a wide range of tools and assets, and supports various programming languages.</p>
</li>
<li>
<p>Unreal Engine: Unreal Engine is another popular game engine used for developing 2D and 3D games. It features a powerful editor, a visual scripting language called Blueprint, and supports C++ programming.</p>
</li>
<li>
<p>Godot Engine: Godot Engine is a free and open-source game engine used for developing 2D and 3D games. It features a node-based editor, supports multiple programming languages, and includes a wide range of tools and features.</p>
</li>
<li>
<p>Phaser: Phaser is a popular game framework used for creating 2D games that run on web browsers. It features a powerful physics engine, supports multiple input methods, and includes a wide range of plugins and tools.</p>
</li>
<li>
<p>Pygame: Pygame is a set of Python modules used for developing 2D games. It provides access to various game-related functions, such as graphics, sound, and input handling, and is relatively easy to learn and use.</p>
</li>
<li>
<p>Construct: Construct is a game development platform used for creating 2D games. It features a drag-and-drop editor, supports multiple platforms, and includes various plugins and tools.</p>
</li>
</ol>
<p>These are just a few examples of the popular game engines and frameworks available for game development. The choice of game engine or framework largely depends on the type of game you want to create, the platform you want to target, and your level of expertise.</p>
<h2 id="introduction-to-game-development-communities-and-forums">Introduction to game development communities and forums</h2>
<p>Game development communities and forums are online platforms where game developers come together to share their experiences, knowledge, and tips for creating games. These communities are often made up of individuals who are passionate about game development and are looking to connect with others who share their interests.</p>
<p>These communities and forums can be found on various websites and social media platforms such as Reddit, Discord, and Facebook. They often have sub-forums or channels dedicated to specific game engines, programming languages, and game genres.</p>
<p>Game development communities and forums can be a great resource for new and experienced game developers alike. They provide opportunities for networking, collaboration, and support. Members can also share their work and receive feedback from others, which can be valuable in improving their skills and creating better games.</p>
<h2 id="advice-on-building-a-portfolio-and-showcasing-game-development-skills">Advice on building a portfolio and showcasing game development skills</h2>
<p>Building a portfolio is an essential step for showcasing game development skills to potential employers, clients, or collaborators. Here are some tips for creating an impressive game development portfolio:</p>
<ol>
<li>
<p>Include a variety of projects: Showcasing a range of projects in your portfolio can demonstrate your versatility and skillset. Include games of different genres and styles to showcase your abilities in different areas.</p>
</li>
<li>
<p>Use high-quality visuals and descriptions: Your portfolio should be visually appealing and easy to navigate. Include screenshots, videos, and descriptions of your projects to give potential employers or clients an idea of what you can do.</p>
</li>
<li>
<p>Show off your process: Don’t just showcase the finished product. Include some information about your development process, including how you came up with the idea, how you designed the game mechanics, and how you solved any technical problems you encountered.</p>
</li>
<li>
<p>Highlight your skills: Make sure to showcase your strengths, such as your programming abilities, design skills, or knowledge of specific game engines or frameworks.</p>
</li>
<li>
<p>Include links to playable demos or downloads: If possible, include playable demos or downloads of your games in your portfolio. This can give potential employers or clients a more hands-on experience of your work.</p>
</li>
<li>
<p>Get feedback: Before finalizing your portfolio, share it with peers or mentors to get feedback on its layout, content, and messaging. This can help you identify areas for improvement and make your portfolio more effective.</p>
</li>
</ol>
<p>Remember that your portfolio is a representation of your skills and abilities, so take the time to make it a strong reflection of what you can do. Keep it up-to-date and showcase your best work to attract potential clients, employers, or collaborators.</p>
<h2 id="exploring-game-development-careers-and-opportunities">Exploring game development careers and opportunities</h2>
<p>Game development is a vast field that encompasses a range of career paths, from programming to art and design. Some common career paths in game development include:</p>
<ol>
<li>
<p>Game Programmer: A game programmer is responsible for writing the code that makes the game function. They use programming languages such as C++, Java, and Python to create game mechanics, graphics, and user interfaces.</p>
</li>
<li>
<p>Game Designer: A game designer is responsible for the overall design and concept of a game. They create game mechanics, rules, levels, and storylines.</p>
</li>
<li>
<p>Game Artist: A game artist is responsible for creating the visual elements of a game, such as characters, environments, and objects. They use tools like Photoshop and 3D modeling software to create 2D and 3D art assets.</p>
</li>
<li>
<p>Game Producer: A game producer oversees the entire game development process, from conception to release. They work with the development team to ensure that the game is completed on time and within budget.</p>
</li>
<li>
<p>Game Tester: A game tester plays a crucial role in ensuring the quality of the game. They test the game for bugs and glitches and provide feedback to the development team.</p>
</li>
</ol>
<p>There are many different types of game development companies, ranging from small indie studios to large corporations. Some common types of companies include:</p>
<ol>
<li>
<p>Indie Studios: Indie studios are small, independent game development companies that typically focus on creating smaller, more niche games.</p>
</li>
<li>
<p>AAA Studios: AAA studios are large, established game development companies that typically create high-budget, blockbuster games.</p>
</li>
<li>
<p>Mobile Game Studios: Mobile game studios specialize in creating games for mobile devices such as smartphones and tablets.</p>
</li>
<li>
<p>VR Game Studios: VR game studios focus on creating games for virtual reality platforms.</p>
</li>
</ol>
<p>Game development is a highly competitive field, and it can be challenging to break into the industry. Some tips for aspiring game developers include building a strong portfolio of game development projects, networking with other game developers, and staying up-to-date with the latest trends and technologies in the industry.</p>
<h2 id="additional-programming-concepts-and-skills-useful-for-game-development">Additional programming concepts and skills useful for game development</h2>
<p>Game development involves a wide range of programming concepts and skills beyond the basics of a programming language. Some of these include:</p>
<ol>
<li>
<p>Object-oriented programming (OOP): OOP is a programming paradigm that involves organizing code into objects, which can have properties and methods. OOP is useful for game development because it can help organize complex game systems and make it easier to reuse code.</p>
</li>
<li>
<p>Data structures and algorithms: Game development often requires handling large amounts of data, such as graphics, sounds, and game states. Understanding data structures such as arrays, linked lists, and trees, as well as algorithms such as sorting and searching, can help optimize game performance.</p>
</li>
<li>
<p>Physics engines: Many games require physics simulations, such as collision detection and gravity. Understanding physics engines and how to use them can help create realistic game mechanics.</p>
</li>
<li>
<p>Artificial intelligence (AI): AI is used in many games to create non-player characters (NPCs) that behave intelligently. Understanding AI concepts such as pathfinding, decision-making, and behavior trees can help create engaging and challenging gameplay.</p>
</li>
<li>
<p>Networking: Multiplayer games require networking skills to enable communication between players over the internet. Understanding network protocols, latency, and security can help create robust multiplayer systems.</p>
</li>
<li>
<p>User interface (UI) design: Good UI design is crucial for creating intuitive and engaging games. Understanding UI concepts such as layout, color theory, and user experience (UX) can help create polished game interfaces.</p>
</li>
<li>
<p>Version control: Game development often involves collaborating with a team of developers and artists. Understanding version control concepts such as branching, merging, and conflict resolution can help manage game development projects more efficiently.</p>
</li>
</ol>
<p>These are just a few of the many programming concepts and skills that are useful for game development. As with any field, continuous learning and staying up-to-date with the latest tools and technologies is important for success.</p>
<h2 id="using-external-libraries-and-apis-for-game-development">Using external libraries and APIs for game development</h2>
<p>Using external libraries and APIs is a common practice in game development as it allows developers to leverage existing functionality and focus on implementing unique features. Here are some popular external libraries and APIs used in game development:</p>
<ol>
<li>
<p>OpenGL: a graphics rendering library that provides a low-level interface to GPU hardware. It is commonly used to create 3D graphics in games.</p>
</li>
<li>
<p>DirectX: a collection of APIs for handling multimedia tasks including graphics, audio, input, and networking. It is mostly used for Windows game development.</p>
</li>
<li>
<p>Unity: a game engine that provides a high-level interface for game development, including a visual editor and support for multiple platforms.</p>
</li>
<li>
<p>Unreal Engine: another game engine that provides a visual editor and supports multiple platforms, including desktop and mobile devices.</p>
</li>
<li>
<p>Pygame: a set of Python modules that provides functionality for game development, including graphics, sound, and input handling.</p>
</li>
<li>
<p>Box2D: a physics engine library that provides functionality for simulating rigid body physics in games.</p>
</li>
<li>
<p>FMOD: a library for handling audio in games, providing features such as 3D sound, sound effects, and music playback.</p>
</li>
</ol>
<p>When using external libraries and APIs, it is important to ensure that you have the necessary permissions and licensing to use them in your game. Additionally, it is important to keep these libraries and APIs up-to-date with the latest versions to ensure optimal performance and security.</p>
<h2 id="overview-of-game-monetization-strategies">Overview of game monetization strategies</h2>
<p>Game monetization refers to the ways in which game developers make money from their games. There are several different strategies that can be used for game monetization, including:</p>
<ol>
<li>
<p>In-app purchases: This is where players can purchase virtual goods or currency within the game using real money.</p>
</li>
<li>
<p>Advertising: This is where ads are displayed within the game, either as banner ads, interstitial ads, or rewarded video ads.</p>
</li>
<li>
<p>Subscription models: This is where players pay a monthly or yearly fee to access premium content within the game.</p>
</li>
<li>
<p>Premium model: This is where players pay an upfront fee to download the game, and there are no in-app purchases or ads within the game.</p>
</li>
<li>
<p>Sponsorship: This is where a brand or company pays to have their products or services featured within the game.</p>
</li>
</ol>
<p>It’s important to consider the target audience and gameplay mechanics when deciding on a monetization strategy. Some players may be more receptive to certain monetization strategies over others.</p>
<h2 id="tips-for-publishing-and-distributing-games">Tips for publishing and distributing games</h2>
<p>Sure! Here are some tips for publishing and distributing games:</p>
<ol>
<li>
<p>Choose the right platform: There are many platforms to choose from for publishing and distributing games, such as Steam, Google Play, the App Store, and more. Choose a platform that is appropriate for your game and target audience.</p>
</li>
<li>
<p>Build a community: Build a community of fans and supporters for your game through social media, forums, and other channels. Engage with your audience and keep them up-to-date on your progress.</p>
</li>
<li>
<p>Create a marketing plan: Develop a marketing plan that includes social media, email marketing, and other promotional activities. Consider working with influencers and content creators to reach a wider audience.</p>
</li>
<li>
<p>Offer demos and early access: Offer demos and early access to build excitement for your game and get feedback from players.</p>
</li>
<li>
<p>Optimize for different devices: Optimize your game for different devices, including desktops, laptops, tablets, and smartphones. Make sure your game is compatible with different operating systems and hardware configurations.</p>
</li>
<li>
<p>Consider localization: Consider localizing your game for different languages and cultures to reach a wider audience.</p>
</li>
<li>
<p>Monitor feedback and reviews: Monitor feedback and reviews from players and make improvements to your game based on their feedback.</p>
</li>
<li>
<p>Provide support: Provide support to your players through FAQs, forums, and other channels. Address bugs and issues promptly to ensure a positive experience for your players.</p>
</li>
<li>
<p>Build relationships with publishers: Consider working with publishers to help with marketing, distribution, and other aspects of game development. Build relationships with publishers by attending events and networking.</p>
</li>
<li>
<p>Stay up-to-date on industry trends: Stay up-to-date on industry trends and best practices to stay competitive in the market. Attend industry events and conferences, and network with other game developers to learn from their experiences.</p>
</li>
</ol>
<h2 id="introduction-to-game-analytics-and-player-data-analysis">Introduction to game analytics and player data analysis</h2>
<p>Game analytics and player data analysis are essential aspects of game development that can provide valuable insights into the behavior of players and the performance of the game. These insights can be used to improve the game mechanics, identify issues, and optimize the game for a better user experience.</p>
<p>Game analytics involves the collection and analysis of player data, such as player demographics, playtime, game progress, in-game purchases, and user feedback. This data can be used to track player behavior and preferences, identify trends, and make informed decisions about game design and development.</p>
<p>Player data analysis, on the other hand, involves analyzing the game’s performance, such as load times, frame rate, memory usage, and other technical aspects. This analysis can help identify performance issues and optimize the game for better performance on different platforms and devices.</p>
<p>To collect and analyze player data, game developers can use a range of tools and platforms, including built-in game analytics features in popular game engines, third-party analytics platforms, and custom-built analytics systems.</p>
<p>In addition to providing insights into player behavior and game performance, game analytics and player data analysis can also be used to optimize game monetization strategies, such as in-game ads, microtransactions, and subscription-based models.</p>
<p>Overall, game analytics and player data analysis are essential tools for game developers to improve game mechanics, identify issues, and optimize the game for a better user experience.</p>
<h2 id="discussing-trends-and-emerging-technologies-in-game-development">Discussing trends and emerging technologies in game development</h2>
<p>Game development is a constantly evolving field, with new technologies and trends emerging all the time. One of the most exciting recent developments is the rise of virtual reality (VR) and augmented reality (AR) gaming. These technologies allow players to immerse themselves in the game world in ways that were previously impossible, creating new opportunities for developers to create unique and compelling gaming experiences.</p>
<p>Another trend in game development is the increasing focus on mobile gaming. As more and more people turn to mobile devices for entertainment, developers are finding new ways to create engaging games that can be played on smartphones and tablets.</p>
<p>Artificial intelligence (AI) is also becoming an important tool for game development. AI can be used to create more intelligent and challenging opponents, as well as to enhance the player’s overall gaming experience.</p>
<p>In addition to these emerging technologies, game development is also being influenced by broader trends in the tech industry. For example, there is a growing emphasis on user-generated content and social gaming, which allow players to create and share their own game content and connect with other players around the world.</p>
<p>Overall, game development is an exciting and dynamic field, and there are many opportunities for developers to explore new technologies and create innovative and engaging games.</p>
<h1 id="appendix-pygame-reference-guide">Appendix: Pygame Reference Guide</h1>
<h2 id="pygame-installation-guide-for-different-operating-systems">Pygame installation guide for different operating systems</h2>
<p>Sure, here’s a guide for installing Pygame on different operating systems:</p>
<h2 id="windows">Windows</h2>
<ol>
<li>Open the Command Prompt by pressing <code>Win + R</code> and typing <code>cmd</code>.</li>
<li>Type the following command to install Pygame: <code>pip install pygame</code></li>
<li>Wait for the installation to finish. Once it’s done, you should see a message saying that Pygame has been successfully installed.</li>
</ol>
<h2 id="macos">macOS</h2>
<ol>
<li>Open the Terminal by pressing <code>Command + Space</code> and typing <code>Terminal</code>.</li>
<li>Type the following command to install Pygame: <code>pip3 install pygame</code></li>
<li>Wait for the installation to finish. Once it’s done, you should see a message saying that Pygame has been successfully installed.</li>
</ol>
<h2 id="linux">Linux</h2>
<ol>
<li>Open the terminal by pressing <code>Ctrl + Alt + T</code>.</li>
<li>Type the following command to install Pygame: <code>sudo apt-get install python3-pygame</code></li>
<li>Wait for the installation to finish. Once it’s done, you should see a message saying that Pygame has been successfully installed.</li>
</ol>
<p>Keep in mind that these commands may vary depending on your system configuration and the version of Python you’re using. It’s also recommended to use a virtual environment when installing packages to avoid conflicts with other Python packages that you may have installed.</p>
<h2 id="overview-of-pygame-modules-and-classes">Overview of Pygame modules and classes</h2>
<p>Pygame is a Python module for game programming. It provides many useful classes and functions for creating games and multimedia applications. Some of the most commonly used Pygame modules and classes include:</p>
<ol>
<li>
<p>pygame.Surface - This is a class used for representing images in Pygame. It provides functions for loading and manipulating image data.</p>
</li>
<li>
<p>pygame.Rect - This is a class used for representing rectangular areas on the screen. It provides functions for checking collision between rectangles.</p>
</li>
<li>
<p>pygame.event - This module provides functions for handling events such as key presses and mouse clicks.</p>
</li>
<li>
<p>pygame.display - This module provides functions for managing the display window and setting the display mode.</p>
</li>
<li>
<p>pygame.time - This module provides functions for managing time in Pygame. It can be used for creating timers and delaying execution of code.</p>
</li>
<li>
<p>pygame.mixer - This module provides functions for playing and controlling sound in Pygame. It supports various audio formats such as WAV and MP3.</p>
</li>
<li>
<p>pygame.sprite - This module provides classes for creating sprite objects in Pygame. Sprites are game objects that can be moved around the screen and have their own properties and behaviors.</p>
</li>
<li>
<p>pygame.font - This module provides functions for creating and rendering text in Pygame. It supports various font formats such as TrueType and OpenType.</p>
</li>
<li>
<p>pygame.mouse - This module provides functions for getting the state of the mouse and handling mouse events.</p>
</li>
<li>
<p>pygame.key - This module provides functions for getting the state of the keyboard and handling keyboard events.</p>
</li>
</ol>
<h2 id="pygame-event-handling-and-event-types">Pygame event handling and event types</h2>
<p>In Pygame, event handling allows you to capture and respond to events such as mouse clicks, keyboard presses, and window resizing. Events are objects that contain information about the event that has occurred. Pygame has a built-in event queue where events are placed as they occur, and your game can retrieve them from the queue and respond accordingly.</p>
<p>Here are some common Pygame event types:</p>
<ul>
<li>QUIT: This event is generated when the user closes the game window.</li>
<li>KEYDOWN and KEYUP: These events are generated when a key on the keyboard is pressed down or released, respectively.</li>
<li>MOUSEBUTTONDOWN and MOUSEBUTTONUP: These events are generated when the user clicks a mouse button.</li>
<li>MOUSEMOTION: This event is generated when the user moves the mouse.</li>
</ul>
<p>To handle events in Pygame, you need to use a loop to continually check the event queue for new events. Here is an example event loop:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">import pygame</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">pygame.init()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Set up the game window</span></span>
<span class="line"><span style="color: #abb2bf">screen = pygame.display.set_mode((640, 480))</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Main game loop</span></span>
<span class="line"><span style="color: #abb2bf">while True:</span></span>
<span class="line"><span style="color: #abb2bf">    # Check for events</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            # User closed the window</span></span>
<span class="line"><span style="color: #abb2bf">            pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">            sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf">        elif event.type == pygame.KEYDOWN:</span></span>
<span class="line"><span style="color: #abb2bf">            if event.key == pygame.K_ESCAPE:</span></span>
<span class="line"><span style="color: #abb2bf">                # User pressed the escape key</span></span>
<span class="line"><span style="color: #abb2bf">                pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">                sys.exit()</span></span></code></pre>
<p>In this example, the event loop checks for two types of events: the QUIT event, which is generated when the user closes the game window, and the KEYDOWN event, which is generated when a key on the keyboard is pressed down. If the user closes the window or presses the escape key, the game quits.</p>
<p>You can also create custom events in Pygame using the pygame.event.Event class. For example, you could create a custom event to signal the end of a level in your game:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">import pygame</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">pygame.init()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Custom event to signal end of level</span></span>
<span class="line"><span style="color: #abb2bf">END_LEVEL = pygame.USEREVENT + 1</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Set up the game window</span></span>
<span class="line"><span style="color: #abb2bf">screen = pygame.display.set_mode((640, 480))</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Main game loop</span></span>
<span class="line"><span style="color: #abb2bf">while True:</span></span>
<span class="line"><span style="color: #abb2bf">    # Check for events</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            # User closed the window</span></span>
<span class="line"><span style="color: #abb2bf">            pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">            sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf">        elif event.type == END_LEVEL:</span></span>
<span class="line"><span style="color: #abb2bf">            # End of level reached</span></span>
<span class="line"><span style="color: #abb2bf">            print("Level complete!")</span></span>
<span class="line"><span style="color: #abb2bf">    </span></span>
<span class="line"><span style="color: #abb2bf">    # Do game logic here...</span></span></code></pre>
<p>In this example, we create a custom event called END_LEVEL using the pygame.USEREVENT constant, which is a value that Pygame reserves for custom events. In the event loop, we check for this event type and respond accordingly.</p>
<h2 id="pygame-graphics-and-image-manipulation-functions">Pygame graphics and image manipulation functions</h2>
<p>Pygame provides a variety of functions and modules for creating and manipulating graphics and images in your game. Some of the key modules and functions include:</p>
<ol>
<li>
<p><code>pygame.Surface</code>: This module is used to represent a rectangular area of pixels, which can be used to draw shapes, images, and text. You can create a new Surface with the <code>pygame.Surface</code> constructor, and then use functions like <code>fill</code>, <code>blit</code>, and <code>get_rect</code> to manipulate and draw the Surface.</p>
</li>
<li>
<p><code>pygame.draw</code>: This module provides functions for drawing shapes and lines on a Surface. Some of the available shapes include rectangles, circles, arcs, lines, and polygons. You can also specify the color, thickness, and other attributes of the shapes.</p>
</li>
<li>
<p><code>pygame.image</code>: This module provides functions for loading and manipulating image files. You can use the <code>load</code> function to load an image from a file, and then use functions like <code>convert</code> and <code>scale</code> to manipulate the image as needed.</p>
</li>
<li>
<p><code>pygame.transform</code>: This module provides functions for transforming images, such as scaling, rotating, and flipping them.</p>
</li>
<li>
<p><code>pygame.font</code>: This module provides functions for rendering text on a Surface. You can use the <code>Font</code> class to create a new font object, and then use functions like <code>render</code> and <code>size</code> to render and measure text.</p>
</li>
<li>
<p><code>pygame.sprite</code>: This module provides classes for creating and manipulating sprite objects. Sprites are typically used to represent game objects that can move, collide, and interact with each other. You can create a new sprite object with the <code>Sprite</code> class, and then use functions like <code>update</code> and <code>draw</code> to manipulate and display the sprite.</p>
</li>
<li>
<p><code>pygame.time</code>: This module provides functions for tracking time and controlling the game loop. You can use the <code>Clock</code> class to create a new clock object, and then use functions like <code>tick</code> and <code>get_time</code> to control the frame rate of your game.</p>
</li>
</ol>
<p>These are just a few of the key modules and functions provided by Pygame for graphics and image manipulation. By learning how to use these tools effectively, you can create engaging and visually appealing games.</p>
<h2 id="pygame-audio-and-sound-functions">Pygame audio and sound functions</h2>
<p>Pygame provides several functions and classes for playing and manipulating audio and sound in games. Some of the commonly used functions and classes are:</p>
<ol>
<li>
<p><code>pygame.mixer.init()</code>: Initializes the mixer module of Pygame and sets the default audio playback settings.</p>
</li>
<li>
<p><code>pygame.mixer.Sound(file)</code>: Loads a sound file and returns a Sound object that can be played.</p>
</li>
<li>
<p><code>Sound.play()</code>: Plays the Sound object.</p>
</li>
<li>
<p><code>Sound.stop()</code>: Stops playing the Sound object.</p>
</li>
<li>
<p><code>Sound.fadeout(ms)</code>: Stops playing the Sound object with a fade-out effect over the specified duration in milliseconds.</p>
</li>
<li>
<p><code>pygame.mixer.music.load(file)</code>: Loads a music file and prepares it for playback.</p>
</li>
<li>
<p><code>pygame.mixer.music.play(loops=0, start=0.0)</code>: Starts playing the loaded music file with the specified number of loops and starting position.</p>
</li>
<li>
<p><code>pygame.mixer.music.stop()</code>: Stops playing the loaded music file.</p>
</li>
<li>
<p><code>pygame.mixer.music.pause()</code>: Pauses the loaded music file.</p>
</li>
<li>
<p><code>pygame.mixer.music.unpause()</code>: Resumes playing the loaded music file after it has been paused.</p>
</li>
<li>
<p><code>pygame.mixer.music.set_volume(value)</code>: Sets the volume level of the loaded music file.</p>
</li>
<li>
<p><code>pygame.mixer.Channel</code>: Allows multiple sounds to be played simultaneously on different channels, each with its own volume and effects.</p>
</li>
<li>
<p><code>Channel.play()</code>: Plays a Sound object on a channel.</p>
</li>
<li>
<p><code>Channel.stop()</code>: Stops playing a Sound object on a channel.</p>
</li>
<li>
<p><code>Channel.set_volume(value)</code>: Sets the volume level of a Sound object on a channel.</p>
</li>
<li>
<p><code>Channel.set_endevent(event)</code>: Sets an event to be triggered when a Sound object on a channel finishes playing.</p>
</li>
</ol>
<p>These functions and classes can be used to create dynamic and engaging audio experiences in games.</p>
<h2 id="pygame-input-handling-and-input-devices">Pygame input handling and input devices</h2>
<p>Pygame offers several ways to handle input from different devices such as keyboards, mice, joysticks, and gamepads.</p>
<p>The <code>pygame.event</code> module handles all input events. It provides an <code>Event</code> class that represents an input event. Each event has an event type and some additional data. The event types are defined as constants, and you can use them to check what type of event has occurred.</p>
<p>For example, to check if a key has been pressed, you can use the <code>KEYDOWN</code> event type. The <code>pygame.key</code> module provides constants for all keys on a keyboard. Here’s an example:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">import pygame</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">pygame.init()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Set up the display and the clock</span></span>
<span class="line"><span style="color: #abb2bf">screen = pygame.display.set_mode((640, 480))</span></span>
<span class="line"><span style="color: #abb2bf">clock = pygame.time.Clock()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf"># Main game loop</span></span>
<span class="line"><span style="color: #abb2bf">while True:</span></span>
<span class="line"><span style="color: #abb2bf">    # Handle events</span></span>
<span class="line"><span style="color: #abb2bf">    for event in pygame.event.get():</span></span>
<span class="line"><span style="color: #abb2bf">        if event.type == pygame.QUIT:</span></span>
<span class="line"><span style="color: #abb2bf">            # Quit the game</span></span>
<span class="line"><span style="color: #abb2bf">            pygame.quit()</span></span>
<span class="line"><span style="color: #abb2bf">            sys.exit()</span></span>
<span class="line"><span style="color: #abb2bf">        elif event.type == pygame.KEYDOWN:</span></span>
<span class="line"><span style="color: #abb2bf">            if event.key == pygame.K_SPACE:</span></span>
<span class="line"><span style="color: #abb2bf">                # Do something when the space bar is pressed</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Update the screen</span></span>
<span class="line"><span style="color: #abb2bf">    pygame.display.update()</span></span>
<span class="line"><span style="color: #abb2bf"></span></span>
<span class="line"><span style="color: #abb2bf">    # Wait for the next frame</span></span>
<span class="line"><span style="color: #abb2bf">    clock.tick(60)</span></span></code></pre>
<p>In this example, we check for two types of events: the <code>QUIT</code> event, which is triggered when the user closes the game window, and the <code>KEYDOWN</code> event, which is triggered when a key on the keyboard is pressed. We also check if the space bar is pressed by comparing the <code>event.key</code> attribute with the <code>pygame.K_SPACE</code> constant.</p>
<p>Pygame also supports handling input from other devices such as joysticks and gamepads. The <code>pygame.joystick</code> module provides functions to initialize and get information about connected joysticks. The <code>pygame.event</code> module also has event types for joystick events, such as <code>JOYAXISMOTION</code> and <code>JOYBUTTONDOWN</code>. You can use these events to handle input from a joystick or gamepad.</p>
<h2 id="pygame-time-management-functions">Pygame time management functions</h2>
<p>Pygame provides functions to handle time in games. These functions help control frame rate and create animations. Some of the most commonly used Pygame time management functions are:</p>
<ol>
<li>
<p><code>pygame.time.get_ticks()</code> - returns the number of milliseconds since Pygame was initialized. This can be used to measure the time between frames, for example.</p>
</li>
<li>
<p><code>pygame.time.Clock()</code> - creates a Clock object, which can be used to control the frame rate of the game. The <code>tick()</code> method can be called on the clock object to limit the frame rate to a certain number of frames per second.</p>
</li>
<li>
<p><code>pygame.time.delay(milliseconds)</code> - pauses the game for a specified number of milliseconds. This function can be used to create timed events or animations.</p>
</li>
<li>
<p><code>pygame.time.set_timer(eventid, milliseconds)</code> - creates an event that is triggered every specified number of milliseconds. This function can be used to create timed events, such as spawning enemies at regular intervals.</p>
</li>
</ol>
<p>These functions can be used in combination to create smooth animations and control the pace of the game.</p>
<h2 id="pygame-documentation-and-online-resources">Pygame documentation and online resources</h2>
<p>Pygame has an extensive documentation available on their official website that covers all aspects of Pygame development. The documentation includes a Getting Started guide, tutorials, and a reference section that provides detailed information on all Pygame modules and functions.</p>
<p>In addition to the official documentation, there are numerous online resources available for Pygame development. These include:</p>
<ol>
<li>
<p>Pygame Community - A community-driven website that includes forums, tutorials, and resources for Pygame developers.</p>
</li>
<li>
<p>Pygame subreddit - A subreddit dedicated to Pygame development that includes news, tutorials, and discussions.</p>
</li>
<li>
<p>Pygame tutorials on YouTube - There are many Pygame tutorials available on YouTube that cover different aspects of Pygame development.</p>
</li>
<li>
<p>Pygame on GitHub - Pygame’s source code is available on GitHub, and developers can contribute to the project or create their own Pygame extensions.</p>
</li>
<li>
<p>Pygame on Stack Overflow - There is a dedicated section for Pygame on Stack Overflow, where developers can ask questions and get help from the community.</p>
</li>
<li>
<p>Pygame books and courses - There are numerous books and courses available on Pygame development that cover different aspects of game development using Pygame.</p>
</li>
</ol>
<p>Overall, Pygame is a well-documented and well-supported framework for game development, with a strong community and many online resources available.</p>
<h2 id="pygame-version-control-and-updates">Pygame version control and updates</h2>
<p>Pygame is an open-source project that is constantly evolving with new features and bug fixes. It is recommended to keep the Pygame version up-to-date to take advantage of new improvements and to ensure that the code is compatible with the latest version.</p>
<p>To update Pygame, one can use the following command in the command line:</p>
<pre is:raw="" class="astro-code one-dark-pro" style="background-color: #282c34; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #abb2bf">pip install --upgrade pygame</span></span></code></pre>
<p>This will upgrade the Pygame version to the latest available version. One can also specify a particular version of Pygame to install or upgrade by specifying the version number in the command.</p>
<p>It is also important to use a version control system to manage Pygame updates and changes to the codebase. This allows developers to easily revert to a previous version of Pygame or the code if needed. Git is a popular version control system used for this purpose, and platforms like GitHub and GitLab provide online repositories for hosting code and managing changes.</p>
<h2 id="troubleshooting-common-pygame-errors-and-issues">Troubleshooting common Pygame errors and issues</h2>
<p>Here are some common Pygame errors and issues you may encounter during development:</p>
<ol>
<li>
<p>Pygame window not opening: This could be due to incorrect initialization of Pygame or a missing game loop. Check that you are properly initializing Pygame, creating a game loop, and updating the display.</p>
</li>
<li>
<p>Slow game performance: This could be due to a large number of sprites, inefficient code, or slow hardware. Try optimizing your code, reducing the number of sprites, and using hardware acceleration.</p>
</li>
<li>
<p>Sprite not appearing on screen: This could be due to incorrect placement or size of the sprite or a missing <code>draw</code> method call. Check that your sprite is properly placed and has a <code>draw</code> method called on it.</p>
</li>
<li>
<p>Sound not playing: This could be due to a missing or incorrect file path, or an incorrect audio format. Check that your audio file is in the correct format and is located at the specified file path.</p>
</li>
<li>
<p>Input not registering: This could be due to an incorrect event type being used or a missing <code>event.get()</code> call. Check that you are using the correct event type for the input and that you are calling <code>event.get()</code> in your game loop.</p>
</li>
</ol>
<p>To troubleshoot these and other Pygame errors, you can consult the Pygame documentation and community forums, as well as use print statements to debug your code.</p>
            </article>
          </div>
          <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var c;{let d={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,r)=>{if(t===""||!Array.isArray(r))return r;let[e,n]=r;return e in d?d[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(c=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{var l;if(!this.hydrator||!this.isConnected||(l=this.parentElement)!=null&&l.closest("astro-island[ssr]"))return;let r=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(let s of n){let i=s.closest(this.tagName);!i||!i.isSameNode(this)||(e[s.getAttribute("data-astro-template")||"default"]=s.innerHTML,s.remove())}for(let s of r){let i=s.closest(this.tagName);!i||!i.isSameNode(this)||(e[s.getAttribute("name")||"default"]=s.innerHTML)}let a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((r,e)=>{e.disconnect(),setTimeout(()=>this.childrenConnectedCallback(),0)}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let r=this.getAttribute("before-hydration-url");r&&await import(r),this.start()}start(){let r=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{let n=this.getAttribute("renderer-url"),[a,{default:l}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),s=this.getAttribute("component-export")||"default";if(!s.includes("."))this.Component=a[s];else{this.Component=a;for(let i of s.split("."))this.Component=this.Component[i]}return this.hydrator=l,this.hydrate},r,this)}attributeChangedCallback(){this.hydrate()}},c.observedAttributes=["props"],c))}})();</script><astro-island uid="ZbKvuO" prefix="r0" component-url="/_astro/Disqus.101366bd.js" component-export="default" renderer-url="/_astro/client.663bf61e.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;Disqus&quot;,&quot;value&quot;:true}" await-children=""><div class="row mt-16 justify-center "><div id="disqus_thread"></div></div></astro-island>
        </div>
      </div>
    </div>
  </section>

    </main>
    <footer class="footer bg-[#F1F1F1]">
  <div class="container">
    <div class="gx-5 row pb-10 pt-[52px]">
      <div class="col-12 mt-12 md:col-6 lg:col-3">
        <a href="/" class="navbar-brand block">
  <img alt="Pinwheel Astro" style="height:31px;width:147px" width="294" height="62" src="/_astro/logo_ZThIBR.png" loading="lazy" decoding="async">
</a>
        <p class="mt-6">
          Trying to make the world a better place.
        </p>
      </div>
      <div class="col-12 mt-12 md:col-6 lg:col-3">
        <h6>Socials</h6>

        <ul class="social-icons mt-4 lg:mt-6">
  <li class="inline-block">
        <a aria-label="facebook" href="https://facebook.com/" target="_blank" rel="noopener noreferrer nofollow">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M480 257.35c0-123.7-100.3-224-224-224s-224 100.3-224 224c0 111.8 81.9 204.47 189 221.29V322.12h-56.89v-64.77H221V208c0-56.13 33.45-87.16 84.61-87.16 24.51 0 50.15 4.38 50.15 4.38v55.13H327.5c-27.81 0-36.51 17.26-36.51 35v42h62.12l-9.92 64.77H291v156.54c107.1-16.81 189-109.48 189-221.31z"></path></svg>
        </a>
      </li>
  <li class="inline-block">
        <a aria-label="twitter" href="https://twitter.com/" target="_blank" rel="noopener noreferrer nofollow">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M496 109.5a201.8 201.8 0 01-56.55 15.3 97.51 97.51 0 0043.33-53.6 197.74 197.74 0 01-62.56 23.5A99.14 99.14 0 00348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 002.54 22.1 280.7 280.7 0 01-203-101.3A95.69 95.69 0 0036 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0135.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 01-25.94 3.4 94.38 94.38 0 01-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0139.5 405.6a203 203 0 01-23.5-1.4A278.68 278.68 0 00166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 00496 109.5z"></path></svg>
        </a>
      </li>
  
  
  
  <li class="inline-block">
        <a aria-label="linkedin" href="https://linkedin.com/" target="_blank" rel="noopener noreferrer nofollow">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M444.17 32H70.28C49.85 32 32 46.7 32 66.89v374.72C32 461.91 49.85 480 70.28 480h373.78c20.54 0 35.94-18.21 35.94-38.39V66.89C480.12 46.7 464.6 32 444.17 32zm-273.3 373.43h-64.18V205.88h64.18zM141 175.54h-.46c-20.54 0-33.84-15.29-33.84-34.43 0-19.49 13.65-34.42 34.65-34.42s33.85 14.82 34.31 34.42c-.01 19.14-13.31 34.43-34.66 34.43zm264.43 229.89h-64.18V296.32c0-26.14-9.34-44-32.56-44-17.74 0-28.24 12-32.91 23.69-1.75 4.2-2.22 9.92-2.22 15.76v113.66h-64.18V205.88h64.18v27.77c9.34-13.3 23.93-32.44 57.88-32.44 42.13 0 74 27.77 74 87.64z"></path></svg>
        </a>
      </li>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="inline-block">
        <a aria-label="skype" href="https://skype.com/" target="_blank" rel="noopener noreferrer nofollow">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M467.16 303.6a205.69 205.69 0 004.9-45.15c0-116.32-95.69-210.7-213.79-210.7a221.83 221.83 0 00-36.52 3A123.58 123.58 0 00155.93 32C87.55 32 32 86.72 32 154.15A119.56 119.56 0 0049 216a211.16 211.16 0 00-4.32 42.35c0 116.44 95.69 210.7 213.67 210.7a214 214 0 0039.09-3.5A125.45 125.45 0 00356.07 480C424.57 480 480 425.28 480 357.85a118 118 0 00-12.84-54.25zM368 359c-9.92 13.76-24.51 24.73-43.41 32.43S283.36 403 257.69 403c-30.69 0-56.36-5.37-76.55-15.87a101 101 0 01-35.24-30.8c-9.11-12.83-13.66-25.66-13.66-38 0-7.7 3-14.35 8.87-19.95 5.84-5.37 13.42-8.17 22.29-8.17 7.35 0 13.65 2.1 18.79 6.42 4.9 4.08 9.1 10.15 12.48 18.08A108.09 108.09 0 00207 336.15q6.32 8.22 17.86 13.65c7.82 3.62 18.2 5.48 31 5.48 17.62 0 32.09-3.73 42.94-11.08 10.74-7.12 15.88-15.75 15.88-26.25 0-8.28-2.69-14.82-8.29-19.95-5.83-5.37-13.42-9.57-22.87-12.37-9.69-3-22.87-6.18-39.21-9.56-22.17-4.67-41-10.27-56-16.57-15.28-6.42-27.65-15.4-36.76-26.48-9.22-11.32-13.77-25.55-13.77-42.24a67.86 67.86 0 0114.47-42.58c9.57-12.25 23.46-21.82 41.55-28.35 17.74-6.53 38.86-9.8 62.66-9.8 19.14 0 35.83 2.22 49.83 6.42s25.91 10.15 35.36 17.38 16.34 14.93 20.77 23 6.66 16.22 6.66 24c0 7.46-2.92 14.35-8.76 20.3a29.65 29.65 0 01-21.94 9.1c-7.93 0-14.12-1.87-18.43-5.6-4-3.5-8.17-8.87-12.72-16.69-5.37-9.91-11.79-17.85-19.14-23.45-7.24-5.36-19.14-8.16-35.71-8.16-15.29 0-27.77 3-37 9-8.87 5.72-13.19 12.37-13.19 20.18a18.26 18.26 0 004.32 12.25 38.13 38.13 0 0012.72 9.57 90.14 90.14 0 0017.15 6.53c6 1.64 15.87 4.09 29.53 7.12 17.38 3.62 33.25 7.82 47.26 12.13 14.24 4.55 26.49 10 36.52 16.45a72.93 72.93 0 0124.16 25.09c5.72 10 8.64 22.63 8.64 37.1A75.09 75.09 0 01368 359z"></path></svg>
        </a>
      </li>
  
  
  
  
  
</ul>
      </div>
      <div class="col-12 mt-12 md:col-6 lg:col-3">
        <h6>Quick Links</h6>
        <ul>
          <li class="mb-4">
                <a class="hover:text-primary hover:underline " href="/about">
                  About
                </a>
              </li><li class="mb-4">
                <a class="hover:text-primary hover:underline " href="/contact">
                  Contact
                </a>
              </li><li class="mb-4">
                <a class="hover:text-primary hover:underline " href="/elements">
                  Elements
                </a>
              </li><li class="mb-0">
                <a class="hover:text-primary hover:underline " href="/changelog">
                  Changelog
                </a>
              </li>
        </ul>
      </div>
      <div class="col-12 mt-12 md:col-6 lg:col-3">
        <h6>Location & Contact</h6>
        <ul>
          <li class="mb-2">Somewhere in Canada</li>
          <li class="mb-2">
            <a class="mb-2 hover:text-primary" href="mailto:colourfulmerchtik@gmail.com">colourfulmerchtik@gmail.com</a>
          </li>
          <li>
            <a class="hover:text-primary hover:underline" href="tel:+704-555-0127">+704-555-0127</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="container max-w-[1440px]">
    <div class="footer-copyright mx-auto border-t border-border pb-10 pt-7 text-center">
      <p class="content text-text">Copyright © 2023</p>
    </div>
  </div>
</footer>
    
    <script src="https://mediafiles.botpress.cloud/0df54034-3318-451a-aed0-3923a4ee25a5/webchat/config.js" defer></script>
  </body>
</html>